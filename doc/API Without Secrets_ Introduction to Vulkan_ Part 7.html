<!DOCTYPE html>
<html class="rwd geo-override  vis no-rtl headerfooter-menu3  js flexbox flexboxlegacy canvas canvastext webgl no-touch geolocation postmessage no-websqldatabase indexeddb hashchange history draganddrop websockets rgba hsla multiplebgs backgroundsize borderimage borderradius boxshadow textshadow opacity cssanimations csscolumns cssgradients no-cssreflections csstransforms csstransforms3d csstransitions fontface generatedcontent video audio localstorage sessionstorage webworkers no-applicationcache svg inlinesvg smil svgclippaths" lang="en" style="--wm-toolbar-height: 67px;"><head><script src="API%20Without%20Secrets_%20Introduction%20to%20Vulkan_%20Part%207_files/athena.js" type="text/javascript"></script><link type="text/css" rel="stylesheet" id="dark-mode-general-link"><link type="text/css" rel="stylesheet" id="dark-mode-custom-link"><style lang="en" type="text/css" id="dark-mode-custom-style"></style><style lang="en" type="text/css" id="dark-mode-native-style"></style><style lang="en" type="text/css" id="dark-mode-native-sheet"></style>
<script type="text/javascript">window.addEventListener('DOMContentLoaded',function(){var v=archive_analytics.values;v.service='wb';v.server_name='wwwb-app218.us.archive.org';v.server_ms=432;archive_analytics.send_pageview({});});</script>
<script type="text/javascript" src="API%20Without%20Secrets_%20Introduction%20to%20Vulkan_%20Part%207_files/bundle-playback.js" charset="utf-8"></script>
<script type="text/javascript" src="API%20Without%20Secrets_%20Introduction%20to%20Vulkan_%20Part%207_files/wombat.js" charset="utf-8"></script>
<script>window.RufflePlayer=window.RufflePlayer||{};window.RufflePlayer.config={"autoplay":"on","unmuteOverlay":"hidden","showSwfDownload":true};</script>
<script type="text/javascript" src="API%20Without%20Secrets_%20Introduction%20to%20Vulkan_%20Part%207_files/ruffle.js"></script>
<script type="text/javascript">
    __wm.init("https://web.archive.org/web");
  __wm.wombat("https://software.intel.com/content/www/us/en/develop/articles/api-without-secrets-introduction-to-vulkan-part-7.html","20200917044701","https://web.archive.org/","web","https://web-static.archive.org/_static/",
	      "1600318021");
</script>
<link rel="stylesheet" type="text/css" href="API%20Without%20Secrets_%20Introduction%20to%20Vulkan_%20Part%207_files/banner-styles.css">
<link rel="stylesheet" type="text/css" href="API%20Without%20Secrets_%20Introduction%20to%20Vulkan_%20Part%207_files/iconochive.css">
<!-- End Wayback Rewrite JS Include -->

    <meta charset="UTF-8">
    





<title>API Without Secrets: Introduction to Vulkan* Part 7</title>
    








    <script type="text/javascript" src="API%20Without%20Secrets_%20Introduction%20to%20Vulkan_%20Part%207_files/performance-config.js"></script>

<link rel="preconnect" href="https://web.archive.org/web/20200917044701/https://dpm.demdex.net/" crossorigin="">
<link rel="dns-prefetch" href="https://web.archive.org/web/20200917044701/https://dpm.demdex.net/">
<link rel="preconnect" href="https://web.archive.org/web/20200917044701/https://starget.intel.com/">
<link rel="dns-prefetch" href="https://web.archive.org/web/20200917044701/https://starget.intel.com/">
<link rel="preconnect" href="https://web.archive.org/web/20200917044701/https://a.idio.co/" crossorigin="">
<link rel="dns-prefetch" href="https://web.archive.org/web/20200917044701/https://a.idio.co/">
<link rel="preconnect" href="https://web.archive.org/web/20200917044701/https://s334284386.t.eloqua.com/">
<link rel="dns-prefetch" href="https://web.archive.org/web/20200917044701/https://s334284386.t.eloqua.com/">
<link rel="dns-prefetch" href="https://web.archive.org/web/20200917044701/https://onsite2.researchintel.com/">
<link rel="preconnect" href="https://web.archive.org/web/20200917044701/https://tags.tiqcdn.com/" crossorigin="">
<link rel="dns-prefetch" href="https://web.archive.org/web/20200917044701/https://tags.tiqcdn.com/">
<link rel="preconnect" href="https://web.archive.org/web/20200917044701/https://www91.intel.com/">
<link rel="dns-prefetch" href="https://web.archive.org/web/20200917044701/https://www91.intel.com/">

    














<meta http-equiv="X-UA-Compatible" content="IE=Edge">
<!--[if lte IE 9]>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<![endif]-->


    <meta name="keywords" content="Game Dev">

    <meta name="description" content="We will extend code from the previous tutorial by adding a transformation matrix to the shader uniform data. This way we can see how to use multiple different descriptors in a single descriptor set. In this tutorial, the focus is on buffers, and learn how to use them as a source of uniform data, how to prepare a projection matrix, and how to copy it to a buffer, and how to access it inside shaders.">

    <meta name="language" content="en">

    <meta name="location" content="us">

    <meta name="robots" content="follow,index,noarchive">

    <meta name="X-Server" content="INTE-T1">


    <meta property="og:image" content="https://web.archive.org/web/20200917044701im_/https://www.intel.com/content/dam/develop/external/us/en/images/introduction-to-vulkan-part-7-fig1-758012.png">

    <meta property="og:type" content="company">

    <meta property="og:site_name" content="Intel">

    <meta property="og:title" content="API Without Secrets: Introduction to Vulkan* Part 7">

    <meta property="fb:admins" content="267985180046218">

    <meta property="og:url" content="https://web.archive.org/web/20200917044701/https://www.intel.com/content/www/us/en/develop/articles/api-without-secrets-introduction-to-vulkan-part-7.html">

    <meta property="og:description" content="We will extend code from the previous tutorial by adding a transformation matrix to the shader uniform data. This way we can see how to use multiple different descriptors in a single descriptor set. In this tutorial, the focus is on buffers, and learn how to use them as a source of uniform data, how to prepare a projection matrix, and how to copy it to a buffer, and how to access it inside shaders.">

<meta http-equiv="content-type" content="text/html; charset=UTF-8">

    <meta name="emtcontenttype" content="Content Type|Web Pages|Articles;">

    <meta name="contentpath" content="/content/www/us/en/develop/articles/api-without-secrets-introduction-to-vulkan-part-7">

    <meta name="authoreddate" content="2018-03-19T12:52:08.000-07:00">

    <meta name="emttechnology" content="Technology|Third-Party Technologies|Vulkan*;Technology|Intel® Technologies|Intel® Graphics and Visual Technologies|Virtual Reality Powered by Intel® Technology;">

    <meta name="localecode" content="en_US">

    <meta name="mime" content="text/html">

    <meta name="format" content="editorialpost">

    <meta name="excludefromviews" content="false">

    <meta name="taxonomy" content="etm-0d937c50068349bfa1e24d64b9a17db7;etm-18f0d076608f4156928fea673fa184a9;etm-1b1627b1502a4090908800edf123071c;etm-e8f566054c77415a8e9f5989e2af7108;">

    <meta name="title" content="API Without Secrets: Introduction to Vulkan* Part 7">

    <meta name="menu" content="Game Development">

    <meta name="idzcustomtags" content="IDZ Custom Tags|Featured;">

    <meta name="emtsubject" content="Subject|Information Technology (IT)|Visual Computing|Video Game Development;">

    <meta name="reimaginefilters" content="Technology|Third-Party Technologies|Vulkan*;IDZ Custom Tags|Featured;Subject|Information Technology (IT)|Visual Computing|Video Game Development;Technology|Intel® Technologies|Intel® Graphics and Visual Technologies|Virtual Reality Powered by Intel® Technology;">

    <meta name="generic1" content="true">

    <meta name="emtaudience" content="Audience|Business|Business Technology Solution Specialist (BTSS)|Software Developer;">

    <meta name="intelkeywords" content="Game Dev">

    <meta name="lastModifieddate" content="2018-03-19T00:00:00.000-07:00">

    <meta name="thumbnailurl" content="https://software.intel.com/content/dam/develop/external/us/en/images/introduction-to-vulkan-part-7-fig1-758012.png">


    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    





<link rel="icon" type="image/png" sizes="32x32" href="https://web.archive.org/web/20200917044701im_/https://software.intel.com/etc.clientlibs/settings/wcm/designs/intel/default/resources/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="https://web.archive.org/web/20200917044701im_/https://software.intel.com/etc.clientlibs/settings/wcm/designs/intel/default/resources/favicon-16x16.png">
<link rel="shortcut icon" href="https://web.archive.org/web/20200917044701im_/https://software.intel.com/etc.clientlibs/settings/wcm/designs/intel/default/resources/favicon.ico">
    





<link rel="canonical" href="https://web.archive.org/web/20200917044701/https://software.intel.com/content/www/us/en/develop/articles/api-without-secrets-introduction-to-vulkan-part-7.html">
    

    <style>@-ms-viewport{width:device-width;}</style>
    
        
        
            
                
                
                    <link rel="stylesheet" href="API%20Without%20Secrets_%20Introduction%20to%20Vulkan_%20Part%207_files/intc-core.min.css" type="text/css"><script src="API%20Without%20Secrets_%20Introduction%20to%20Vulkan_%20Part%207_files/intc-core.min.js" defer="defer"></script>
                    
                
            
        
    
<script src="API%20Without%20Secrets_%20Introduction%20to%20Vulkan_%20Part%207_files/clipboard.min.js"></script><style>:is([id*='google_ads_iframe'],[id*='taboola-'],.taboolaHeight,.taboola-placeholder,#top-ad,#credential_picker_container,#credentials-picker-container,#credential_picker_iframe,[id*='google-one-tap-iframe'],#google-one-tap-popup-container,.google-one-tap__module,.google-one-tap-modal-div,#amp_floatingAdDiv,#ez-content-blocker-container) {display:none!important;min-height:0!important;height:0!important;}</style><script>var isTargetEnabled =false;</script><script>var _____WB$wombat$assign$function_____ = function(name) {return (self._wb_wombat && self._wb_wombat.local_init && self._wb_wombat.local_init(name)) || self[name]; };
if (!self.__WB_pmw) { self.__WB_pmw = function(obj) { this.__WB_source = obj; return this; } }
{
let window = _____WB$wombat$assign$function_____("window");
let globalThis = _____WB$wombat$assign$function_____("globalThis");
let self = _____WB$wombat$assign$function_____("self");
let document = _____WB$wombat$assign$function_____("document");
let location = _____WB$wombat$assign$function_____("location");
let top = _____WB$wombat$assign$function_____("top");
let parent = _____WB$wombat$assign$function_____("parent");
let frames = _____WB$wombat$assign$function_____("frames");
let opener = _____WB$wombat$assign$function_____("opener");
{
var cq_tms = {
        wa_emtcontenttype: "emtcontenttype:webpage/article",
        wa_emttechnology: "emttechnology:inteltechnologies/intelgraphicsandvisualtechnologies/virtualrealitypoweredbyinteltechnology,emttechnology:thirdpartytechnologies/vulkan",
        wa_idzcustomtags: "idzcustomtags:featured",
        wa_emtsubject: "emtsubject:itinformationtechnology/visualcomputing/videogamedevelopment",
        
        wa_industry_type: "",
        wa_partner_prog: "",
        wa_subject: "emtsubject:itinformationtechnology/visualcomputing/videogamedevelopment",
        wa_biz_size: "",
        wa_emt_org: "",
        wa_emt_intel: "",
        wa_partner_type: "",
        wa_programidentifier: "",
        wa_location: "us",
        wa_language: "en",
        wa_english_title: "API Without Secrets: Introduction to Vulkan* Part 7",
        wa_content_type: "article",
        wa_intel_platform: "",
        wa_applications: "",
        wa_local: "en_US",
        wa_intel_technology: "emttechnology:inteltechnologies/intelgraphicsandvisualtechnologies/virtualrealitypoweredbyinteltechnology,emttechnology:thirdpartytechnologies/vulkan",
        wa_system_type: "",
        wa_product_name: "",
        wa_audience: "emtaudience:business/btssbusinesstechnologysolutionspecialist/softwaredeveloper",
        wa_life_cycle: "",
        wa_cq_url: "/content/www/us/en/develop/articles/api-without-secrets-introduction-to-vulkan-part-7.html",
        wa_page_type_micro: "editorialposttemplate",
        wa_env: "prd",
        wa_cq_pub_env: "publish",
        wa_transl_status: "",
        wa_product_id: "",
        wa_software: "",
        wa_reference_design: "",
        wa_codename: "",
        wa_created_date: "1587986579187",
        wa_modifed_date: "1588320190616",
        wa_off_time: "1635753757485",
        wa_ownedby: "",
        wa_managedby: "",
        wa_idz_nid : "758012",
        wa_event_type: "",
        wa_idz_custom_tags: "idzcustomtags:featured",
        wa_programming_language: "",
        wa_skill_level: "",
        wa_solution: "",
        wa_product_formFactor: "",
        wa_operating_system: "",
        wa_marketing_products: "",
        wa_ssg_third_party_prod_sys_sol: "",
        
        wa_secondary_content_type: ""
    };
    
    
    
    cq_tms.wa_tms_sync_load = "deferred";

}}</script><script>var _____WB$wombat$assign$function_____ = function(name) {return (self._wb_wombat && self._wb_wombat.local_init && self._wb_wombat.local_init(name)) || self[name]; };
if (!self.__WB_pmw) { self.__WB_pmw = function(obj) { this.__WB_source = obj; return this; } }
{
let window = _____WB$wombat$assign$function_____("window");
let globalThis = _____WB$wombat$assign$function_____("globalThis");
let self = _____WB$wombat$assign$function_____("self");
let document = _____WB$wombat$assign$function_____("document");
let location = _____WB$wombat$assign$function_____("location");
let top = _____WB$wombat$assign$function_____("top");
let parent = _____WB$wombat$assign$function_____("parent");
let frames = _____WB$wombat$assign$function_____("frames");
let opener = _____WB$wombat$assign$function_____("opener");
{
!function(){var e=setInterval(function(){"undefined"!=typeof $CQ&&($CQ(function(){CQ_Analytics.SegmentMgr.loadSegments("/etc/segmentation"),CQ_Analytics.ClientContextUtils.init("/etc/clientcontext/intel",window.location.pathname.substr(0,window.location.pathname.indexOf(".")))}),clearInterval(e))},100)}();

}}</script><link rel="stylesheet" type="text/css" href="API%20Without%20Secrets_%20Introduction%20to%20Vulkan_%20Part%207_files/commons-page.min.css"><link rel="stylesheet" type="text/css" href="API%20Without%20Secrets_%20Introduction%20to%20Vulkan_%20Part%207_files/intel.rwd.override.css"></head>



















    



    




<body class="page-is-published simplified-header"><!-- BEGIN WAYBACK TOOLBAR INSERT -->
<script>__wm.rw(0);</script>
<div id="wm-ipp-base" lang="en" style="display: block; direction: ltr; height: 67px;" toolbar-mode="auto">
</div><div id="wm-ipp-print">The Wayback Machine - 
https://web.archive.org/web/20200917044701/https://software.intel.com/
content/www/us/en/develop/articles/api-without-secrets-introduction-to-
vulkan-part-7.html</div>
<script type="text/javascript">//<![CDATA[
__wm.bt(750,27,25,2,"web","https://software.intel.com/content/www/us/en/develop/articles/api-without-secrets-introduction-to-vulkan-part-7.html","20200917044701",1996,"https://web-static.archive.org/_static/",["https://web-static.archive.org/_static/css/banner-styles.css?v=p7PEIJWi","https://web-static.archive.org/_static/css/iconochive.css?v=3PDvdIFv"], false);
  __wm.rw(1);
//]]></script>
<!-- END WAYBACK TOOLBAR INSERT -->
 

<div class="promo-banner-content"></div>

























<script>
    var isLoggedin = (location.protocol == 'https:' && document.cookie.indexOf('SMSESSION') != -1);
    var loginValidateURL = 'https://web.archive.org/web/20200917044701/https://www.intel.com/libs/apps/intel/myintel/profile.html/validate/loggedin';
</script>




    
    
        
        
            



























    
    
        
    



    
    
        <div class="header-simplify component" data-component="header" data-component-id="1">
            <header role="banner">
                <span visibility="hidden"></span>
                <div class="site-mask" data-igm-site-mask=""></div>
                <nav class="global-menu-simplify navbar-fixed-top " role="navigation" aria-label="Site" data-igm="">
                    <div class="container main-navbar">
                        <div class="row">
                            <div class="nav-left col-xs-5 mobileFirst">
                                <div class="content">
                                    <button class="hamburger icon hidden-md hidden-lg hidden-xl" data-toggle="mega-menu" data-target="#menu-products"><span class="fa-menu"></span>
                                    </button>
                                    <ul class="hidden-xs hidden-sm">
                                        
                                            <li>
                                                <button data-toggle="mega-menu" data-target="#menu-0">Products</button>
                                            </li>
                                        
                                            <li>
                                                <button data-toggle="mega-menu" data-target="#menu-1">Support</button>
                                            </li>
                                        
                                            <li>
                                                <button data-toggle="mega-menu" data-target="#menu-2">Solutions</button>
                                            </li>
                                        
                                    </ul>
                                </div>
                            </div>

                            <div class="nav-center col-xs-2">
                                <div class="content">
                                    <a href="https://web.archive.org/web/20200917044701/https://software.intel.com/content/www/us/en/homepage.html" alt="Intel homepage" class="navbar-logo" title="Intel Logo"></a>
                                </div>
                            </div>

                            <div class="nav-right col-xs-5">
                                <div class="content">
                                    
                                        <button type="button" class="language-selector-toggle mobileFirst" aria-label="USA (English)" data-igm-search-toggle="">
                                    <span class="hidden-xs" aria-hidden="true">
                                        USA (English)
                                    </span>
                                            <span class="icon fa-globe align-icons"></span>
                                        </button>
                                    

                                    <span class="states-login">
                            <span class="state-logged-in state-option">
                            <span class="option-links" id="myprofile-signin-menu"></span>

                            </span>
                                    </span>
                                    <button class="login login-toggle item icon mobileFirst" aria-label="Sign In" data-igm-search-toggle="">
                                <span class="login-label" aria-hidden="true"> Sign In </span><span class="icon-login align-icons fa-"></span></button>
                                    
                                <span role="search">
                                    <button type="button" title="Search" class="search-button icon mobileFirst" data-igm-search-toggle=""><span class="fa-search" id="newsearch"></span></button>
                                </span>
                                    
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="uheadersearch homepagesearch">
























    










    















    
    
    
        
    


    <div id="simplify-search" class="search-content brand-darkest-gray theme-dark-1 component mobileFirst" data-component="homepagesearch" data-igm-search-content="" data-component-id="1">
        <div class="wrapper-outer-sticky-footer">
            <div class="wrapper-sticky-footer">
                <div class="slide-search-results">
                    <form class="search item" data-igm-search-control="" name="hpsform-new" id="hpsform-new" action="/web/20200917044701/https://software.intel.com/content/www/us/en/search.html" onsubmit="return INTEL_TYPE_AHEAD.onSubmitHps('Search', '/content/www/us/en', 'en_US')">
                        <button type="submit" class="search-button icon" aria-label="Search" data-tabindex="2"><span class="fa-search"></span></button>
                        
                            
                            
                                <label for="mobile-search">
                                    <input id="toplevelcategory" name="toplevelcategory" type="hidden" value="none">
                                    <input id="query" name="query" type="hidden" value="">
                                    <input data-tabindex="1" data-search-input="" id="mobile-search" name="keyword" type="text" data-igm-search-input="" title="Search" autocomplete="off" placeholder="Search Intel.com">
                                </label>
                            
                        
                        <button id="header-btn-clear" type="clear" class="search-clear" data-igm-search-clear="">
                            <span></span></button>
                        <button type="button" id="cls-btn" class="close icon" aria-label="Close" data-igm-search-toggle="" data-tabindex="3"><span></span></button>
                    </form>
                    <div class="search-quick-links hidden" data-component="wa_skip_track" data-component-id="1">
                        <div class="overlay-content quick-links-terms">
                            <h3>Quick Links</h3>
                            <p>Try these quick links to visit popular site sections</p>
                            <ul>
                                <li>
                                    <a class="quick-link" rel="noopener noreferrer" href="https://web.archive.org/web/20200917044701/https://downloadcenter.intel.com/?wapkw=quicklink:download-center">
                                        Download Center
                                    </a>
                                </li>
                                <li>
                                    <a class="quick-link" rel="noopener noreferrer" href="https://web.archive.org/web/20200917044701/https://ark.intel.com/?wapkw=quicklink:product-specifications">
                                        Product Specifications
                                    </a>
                                </li>
                                <li>
                                    <a class="quick-link" rel="noopener noreferrer" href="https://web.archive.org/web/20200917044701/https://www.intel.com/content/www/us/en/products/devices-systems.html?wapkw=quicklink:products">
                                        Products
                                    </a>
                                </li>
                                <li><a class="quick-link" rel="noopener noreferrer" href="https://web.archive.org/web/20200917044701/https://www.intel.com/content/www/us/en/support.html?wapkw=quicklink:support">
                                    Support
                                </a>
                                </li>
                            </ul>
                        </div>
                    </div>
                    <div class="results-overlay results-recent results component" data-component="wa_skip_track" data-component-id="1">
                        <div class="overlay-content recent-searches-terms">
                            <h3>Recent Searches</h3>
                        </div>
                    </div>
                </div>
                <div class="slide-language-selector">
                    <div class="modal-intel language-selector modal-expose-menu" id="modal-language-selector">
                    </div>
                    













<script type="text/javascript">
    var languageslectorexists = false;
</script>

    <script type="text/javascript">
        languageslectorexists = true;

    </script>
    <!-- MODAL for Language selector -->
    <script id="gls-template" type="text/x-handlebars-template">
        <div class="language-selector-block">
            <div class="modal-content flyout-panel-block force-background" role="dialog"
                 aria-labelledby="regionselector" aria-describedby="selectregion">
                <div class="modal-header flyout-panel-block-header">
                        
                    <h2 class="modal-title" id="Region-Modal">
                        <span class="icon fa-globe align-icons"></span>
                        Select Your Region
                        <div id="close_button" class="modal-footer flyout-panel-block-header">
                            <button type="button" class="close icon" aria-label="Close" data-igm-search-toggle="">
                                <span></span>
                            </button>
                        </div>
                    </h2>
                </div>
                <div class="modal-body lang-selector-body">
                    <div class="flyout-control-panel">
                        <ul class="list-unstyled flyout-control-listing" id="language-accordion">

                            {{#if alsoAvail}}
                            <div class="col-xs-12 lang-selector">
                                <h4 class="accordion-toggle fa- expanded" data-toggle="collapse"
                                    data-parent="#language-accordion"
                                    data-target="#header-translations">
                                    {{localeTitle}}</h4>
                            </div>
                            {{#each sections}}
                            <div id="header-translations" class="accordion-panel in">
                                {{#each locale}}
                                {{regionNames languageList @index countryName}}
                                {{/each}}
                            </div>
                            {{/each}}
                            {{/if}}

                            <div class="col-xs-12 lang-selector">
                                <h4 class="accordion-toggle fa- {{#if alsoAvail}}collapsed{{else}}expanded{{/if}}"
                                    data-toggle="collapse"
                                    data-parent="#language-accordion"
                                    data-target="#home-redirects">
                                    {{homepageTitle}}</h4>
                            </div>
                            {{#each sections}}
                            <div id="home-redirects"
                                 class="accordion-panel {{#if ../alsoAvail}}collapse{{else}}in{{/if}}">
                                {{#each locale}}
                                <li>
                                    <a href="#homepage-{{@index}}" data-toggle="flyout" class="flyout-control">{{{countryName}}}<span
                                            class="icon-caret fa-angle-right"></span></a>
                                </li>
                                {{/each}}
                            </div>
                            {{/each}}

                        </ul>
                        {{#each sections}}
                        {{#each locale}}
                        {{storeIndex @index}}

                        <div class="flyout-panel flyout-panel-position-right flyout-panel-closed force-background"
                             id="geo-{{getIndex}}">
                            <div class="flyout-panel-inner">
                                <div class="flyout-panel-header">
                                    <a href="#" class="close-flyout back-link pull-left"><span
                                            class="icon-back fa-angle-left"></span>
                                        back</a>
                                </div>
                                <div class="flyout-panel-body">
                                    <div class="igm-text-listing">
                                        <div class="pad-btm-10">
                                            <ul class="list-unstyled">
                                                {{#each languageList}}
                                                {{#if localelink}}
                                                <li class="lang-option"><a
                                                        data-locale="{{{language}}}_{{{locale}}}"
                                                        href={{{localelink}}}>{{countryLanguageLabel label language}}</a>
                                                </li>
                                                {{/if}}
                                                {{/each}}
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        {{/each}}
                        {{/each}}

                        {{#each sections}}
                        {{#each locale}}
                        {{#if languageList}}
                        <div class="flyout-panel flyout-panel-position-right flyout-panel-closed force-background"
                             id="homepage-{{@index}}">
                            <div class="flyout-panel-inner">
                                <div class="flyout-panel-header">
                                    <a href="#" class="close-flyout back-link pull-left"><span
                                            class="icon-back fa-angle-left"></span>back</a>
                                </div>
                                <div class="flyout-panel-body">
                                    <div class="igm-text-listing">
                                        <div class="pad-btm-10">
                                            <ul class="list-unstyled">
                                                {{#each languageList}}
                                                {{#if_ne language 'en'
                                                locale 'us' }}
                                                <li class="lang-option"><a
                                                        data-locale="{{{language}}}_{{{locale}}}"
                                                        href={{{homepagelink}}}>{{countryLanguageLabel label language}}</a>
                                                </li>
                                                {{/if_ne}}
                                                {{/each}}
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        {{/if}}
                        {{/each}}
                        {{/each}}

                    </div>
                </div>
            </div>
        </div>
    </script>

    <script type="text/javascript">
        var langSelectData = {"alsoAvail":true,"mobileHomepageTitle":"Find your Country's/Region's Homepage","mobileSelectTitle":"Select a Country/Region","mobileAvailableTitle":"Page Available In","sections":[{"locale":[{"countryName":"Asia Pacific","languageList":[{"homepagelink":"https://web.archive.org/web/20200917044701/https://www.intel.sg/content/www/xa/en/homepage.html","localelink":"","label":"Asia Pacific (English)","locale":"xa","language":"en"},{"homepagelink":"https://web.archive.org/web/20200917044701/https://www.intel.com.au/content/www/au/en/homepage.html","localelink":"","label":"Australia (English)","locale":"au","language":"en"},{"homepagelink":"https://web.archive.org/web/20200917044701/https://www.intel.cn/content/www/cn/zh/homepage.html","localelink":"https://web.archive.org/web/20200917044701/https://www.intel.cn/content/www/cn/zh/develop/articles/api-without-secrets-introduction-to-vulkan-part-7.html","label":"China (简体中文)","locale":"cn","language":"zh"},{"homepagelink":"https://web.archive.org/web/20200917044701/https://www.intel.in/content/www/in/en/homepage.html","localelink":"","label":"India (English)","locale":"in","language":"en"},{"homepagelink":"https://web.archive.org/web/20200917044701/https://www.intel.co.id/content/www/id/id/homepage.html","localelink":"","label":"Indonesia (Bahasa Indonesia)","locale":"id","language":"id"},{"homepagelink":"https://web.archive.org/web/20200917044701/https://www.intel.co.jp/content/www/jp/ja/homepage.html","localelink":"","label":"Japan (日本語)","locale":"jp","language":"ja"},{"homepagelink":"https://web.archive.org/web/20200917044701/https://www.intel.co.kr/content/www/kr/ko/homepage.html","localelink":"","label":"Korea (한국어)","locale":"kr","language":"ko"},{"homepagelink":"https://web.archive.org/web/20200917044701/https://www.intel.com.tw/content/www/tw/zh/homepage.html","localelink":"","label":"Taiwan (繁體中文)","locale":"tw","language":"zh"},{"homepagelink":"https://web.archive.org/web/20200917044701/https://www.thailand.intel.com/content/www/th/th/homepage.html","localelink":"","label":"Thailand (ไทย)","locale":"th","language":"th"},{"homepagelink":"https://web.archive.org/web/20200917044701/https://www.intel.vn/content/www/vn/vi/homepage.html","localelink":"","label":"Vietnam (Tiếng Việt)","locale":"vn","language":"vi"}]},{"countryName":"Europe","languageList":[{"homepagelink":"https://web.archive.org/web/20200917044701/https://www.intel.fr/content/www/fr/fr/homepage.html","localelink":"","label":"France (Français)","locale":"fr","language":"fr"},{"homepagelink":"https://web.archive.org/web/20200917044701/https://www.intel.de/content/www/de/de/homepage.html","localelink":"","label":"Germany (Deutsch)","locale":"de","language":"de"},{"homepagelink":"https://web.archive.org/web/20200917044701/https://www.intel.ie/content/www/ie/en/homepage.html","localelink":"","label":"Ireland (English)","locale":"ie","language":"en"},{"homepagelink":"https://web.archive.org/web/20200917044701/https://www.intel.it/content/www/it/it/homepage.html","localelink":"","label":"Italy (Italiano)","locale":"it","language":"it"},{"homepagelink":"https://web.archive.org/web/20200917044701/https://www.intel.pl/content/www/pl/pl/homepage.html","localelink":"","label":"Poland (Polski)","locale":"pl","language":"pl"},{"homepagelink":"https://web.archive.org/web/20200917044701/https://www.intel.ru/content/www/ru/ru/homepage.html","localelink":"https://web.archive.org/web/20200917044701/https://www.intel.ru/content/www/ru/ru/develop/articles/api-without-secrets-introduction-to-vulkan-part-7.html","label":"Russia (Русский)","locale":"ru","language":"ru"},{"homepagelink":"https://web.archive.org/web/20200917044701/https://www.intel.es/content/www/es/es/homepage.html","localelink":"","label":"Spain (Español)","locale":"es","language":"es"},{"homepagelink":"https://web.archive.org/web/20200917044701/https://www.intel.com.tr/content/www/tr/tr/homepage.html","localelink":"","label":"Turkey (Türkçe)","locale":"tr","language":"tr"},{"homepagelink":"https://web.archive.org/web/20200917044701/https://www.intel.co.uk/content/www/uk/en/homepage.html","localelink":"","label":"United Kingdom (English)","locale":"uk","language":"en"}]},{"countryName":"Latin America","languageList":[{"homepagelink":"https://web.archive.org/web/20200917044701/https://www.intel.la/content/www/xl/es/homepage.html","localelink":"https://web.archive.org/web/20200917044701/https://www.intel.la/content/www/xl/es/develop/articles/api-without-secrets-introduction-to-vulkan-part-7.html","label":"Argentina (Español)","locale":"xl","language":"es"},{"homepagelink":"https://web.archive.org/web/20200917044701/https://www.intel.com.br/content/www/br/pt/homepage.html","localelink":"https://web.archive.org/web/20200917044701/https://www.intel.com.br/content/www/br/pt/develop/articles/api-without-secrets-introduction-to-vulkan-part-7.html","label":"Brazil (Português)","locale":"br","language":"pt"},{"homepagelink":"https://web.archive.org/web/20200917044701/https://www.intel.la/content/www/xl/es/homepage.html","localelink":"https://web.archive.org/web/20200917044701/https://www.intel.la/content/www/xl/es/develop/articles/api-without-secrets-introduction-to-vulkan-part-7.html","label":"Chile (Español)","locale":"xl","language":"es"},{"homepagelink":"https://web.archive.org/web/20200917044701/https://www.intel.la/content/www/xl/es/homepage.html","localelink":"https://web.archive.org/web/20200917044701/https://www.intel.la/content/www/xl/es/develop/articles/api-without-secrets-introduction-to-vulkan-part-7.html","label":"Colombia (Español)","locale":"xl","language":"es"},{"homepagelink":"https://web.archive.org/web/20200917044701/https://www.intel.la/content/www/xl/es/homepage.html","localelink":"https://web.archive.org/web/20200917044701/https://www.intel.la/content/www/xl/es/develop/articles/api-without-secrets-introduction-to-vulkan-part-7.html","label":"Latin America (Español)","locale":"xl","language":"es"},{"homepagelink":"https://web.archive.org/web/20200917044701/https://www.intel.la/content/www/xl/es/homepage.html","localelink":"https://web.archive.org/web/20200917044701/https://www.intel.la/content/www/xl/es/develop/articles/api-without-secrets-introduction-to-vulkan-part-7.html","label":"Mexico (Español)","locale":"xl","language":"es"},{"homepagelink":"https://web.archive.org/web/20200917044701/https://www.intel.la/content/www/xl/es/homepage.html","localelink":"https://web.archive.org/web/20200917044701/https://www.intel.la/content/www/xl/es/develop/articles/api-without-secrets-introduction-to-vulkan-part-7.html","label":"Peru (Español)","locale":"xl","language":"es"}]},{"countryName":"Middle East/Africa","languageList":[{"homepagelink":"https://web.archive.org/web/20200917044701/https://www.intel.co.il/content/www/il/he/homepage.html","localelink":"","label":"Israel (עברית)","locale":"il","language":"he"}]},{"countryName":"North America","languageList":[{"homepagelink":"https://web.archive.org/web/20200917044701/https://www.intel.com/content/www/us/en/homepage.html","localelink":"","label":"United States (English)","locale":"us","language":"en"},{"homepagelink":"https://web.archive.org/web/20200917044701/https://www.intel.ca/content/www/ca/en/homepage.html","localelink":"","label":"Canada (English)","locale":"ca","language":"en"},{"homepagelink":"https://web.archive.org/web/20200917044701/https://www.intel.ca/content/www/ca/fr/homepage.html","localelink":"","label":"Canada (Français)","locale":"ca","language":"fr"}]}]}],"homepageTitle":"Go to your Country's/Region's Homepage","localeTitle":"This page is also available in"};
    </script>


                </div>
                <div class="slide-signin">
                    





































    
    
        
        
        
    




<div class="modal-intel modal-signin" id="modal-signin-form" aria-labelledby="Signin">
    <div class="slide-signin-block" data-component="signincomponent" data-component-id="1">
        <div class="modal-header">
            <button type="button" class="close icon theme-white" data-igm-search-toggle="" aria-label="Close">
                <span></span></button>
            <h2 class="modal-title" id="Signin"><span class="icon-login align-icons fa-"></span>Sign In</h2>
        </div>

        <div class="modal-body">
            <div class="alert alert-danger" id="login-error" role="alert"></div>
            <form id="igm-form-signin" action="https://web.archive.org/web/20200917044701/https://www.intel.com/libs/apps/intel/login.json/securitytoken" method="POST" name="igm-form-signin" class="igm-form-signin intel-form" novalidate="">
                <div class="form-group">
                    <label for="username">
                        <input class="form-control form-input" aria-describedby="uname-error" name="userid" id="username" placeholder="Username" required="">
                    </label>
                    <div class="error validation-messages" id="uname-error">
                        <div class="rule broken">Your username is missing</div>
                    </div>
                </div>
                <div class="form-group">
                    <label for="password">
                        <input type="password" class="form-control form-input" aria-describedby="pwd-error" id="password" name="password" placeholder="Password" required="" autocomplete="off">
                    </label>
                    <div class="error validation-messages" id="pwd-error">
                        <div class="rule broken">Your password is missing</div>
                    </div>
                </div>
                <p>By signing in, you agree to our <a href="https://web.archive.org/web/20200917044701/https://software.intel.com/content/www/us/en/legal/terms-of-use.html">Terms of Service</a>.</p>
                <div class="row">
                    <div class="col-xs-12">
                        <input type="hidden" name="callBack" id="callBackSimplify">
                        <input type="hidden" name="queryParam" id="queryParam">
                        <input type="submit" class="btn btn-primary" value="Sign In" data-wap="{&quot;linktype&quot;:&quot;sign-in&quot;}">
                        <label for="cbRememberMe" class="remember-user"><input id="cbRememberMe" name="rememberme" type="checkbox" value="true">
                            <span>Remember me</span></label>
                    </div>
                </div>
            </form>
            <p>
                Forgot your Intel
                <a href="https://web.archive.org/web/20200917044701/https://www.intel.com/content/www/us/en/my-intel/forgot-userid.html">username</a>
                or
                <a href="https://web.archive.org/web/20200917044701/https://www.intel.com/content/www/us/en/my-intel/forgot-password.html">password</a>?
            </p>

            <p class="mobile-intel-signin">Do you work for Intel? <a href="#" onclick="intel.signinsimplify.geturl('https://web.archive.org/web/20200917044701/https://sifederation.intel.com/federation/bridge/sso_irp.asp?target=')">Sign in here</a>.</p>
            
                <p>
                    Don’t have an Intel account?
                    <a href="#" onclick="intel.signinHeaderSimplify.doRedirect('/forms/basic-intel-registration.html')">
                        Sign up here
                    </a>
                    for a basic account.
                </p>
            
        </div>
    </div>
</div>
<iframe id="frameSigninSimplify" tabindex="-1" title="My Intel Sign in" aria-hidden="true" name="frameSigninSimplify" src="/web/20200917044701if_/https://software.intel.com/etc.clientlibs/settings/wcm/designs/intel/clientlibs/pages/commons-page/resources/html/idamFormStaticSimplify.html" style="display:none;" data-ruffle-polyfilled=""></iframe>


<script>

    
    

    
    var intel = intel || {};
    intel.signinsimplifyConfig = {
        locale: '',
        messages: {
            InvalidCredential: 'The username or password you entered was invalid.',
            InvalidField: 'The username or password you entered was invalid.',
            AccountDisabled: 'For security reasons, your account has been disabled. For help, <a href=\"#\" class=\"contactLink new-tab-link\" target=\"_blank\" rel=\"noopener noreferrer\" >contact us<\/a>.',
            AccountLocked: 'Your account has been locked. For help, please read the <a href=\"#\" class=\"faqsLink new-tab-link\" target=\"_blank\" rel=\"noopener noreferrer\" >Sign In FAQ<\/a>.',
            UserNotFound: 'The username or password you entered was invalid.',
            Unknown: 'An unexpected error occurred. Try it again. For help, use the contact or support options below.',
            PasswordExpired: 'Your password is expired. Please change your password.',
            LoginAssistLink: 'https://web.archive.org/web/20200917044701/https://signin.intel.com/ContactUs.aspx',
            faqsLink: '/content/www/us/en/my-intel/sign-in-help.html'
        },
        nameField: 'Username',
        passField: 'Password',
        signinUrl: '/libs/apps/intel/login.json/securitytoken',
        isPopup: true,
        responseHref: 'https://web.archive.org/web/20200917044701/https://www.intel.com/content/www/us/en/develop/articles/api-without-secrets-introduction-to-vulkan-part-7.html' + window.location.hash,
        sslDomainUrl: 'www.intel.com',
        loginUrl: 'https://web.archive.org/web/20200917044701/https://welcome.intel.com/login.aspx?appid=258&qlogin=true',
        ssoUri: 'https://web.archive.org/web/20200917044701/https://federatesso.intel.com',
        logoutUrl: 'https://web.archive.org/web/20200917044701/https://welcome.intel.com/logout.aspx',
        logoutHref: 'https://web.archive.org/web/20200917044701/https://signin.intel.com/Logout?RedirectURL=https://www.intel.com/content/www/us/en/develop/articles/api-without-secrets-introduction-to-vulkan-part-7' + '.html',
        loginErrorID: '#login-error',
        usernameID: '#username',
        remembermeId: '#cbRememberMe',
        formID: '#igm-form-signin',
        unameErrorID: '#uname-error',
        passID: '#password',
        passError: '#pwd-error',
        changePasswordUrl: '/content/www/us/en/my-intel/change-password.html',
        emailVerificationUrl: '/content/www/us/en/my-intel/email-verification.expired.html',
        aboutToExpireEmailUrl: '/content/www/us/en/my-intel/email-verification.html',
        renewalUrl: '/content/www/us/en/secure/technology-provider/forms/renew-technology-provider-membership.html',
        limitedUrl: '/content/www/us/en/resellers/limited-status-secondary.html',
        isaPRMDashBoardURL: '/content/www/us/en/secure/partner/solutions-alliance/overview.html',
        itpPRMDashBoardURL: '/content/www/us/en/secure/partner/technology-provider/iot/overview.html',
        itpisaPRMDashBoardURL: '/content/www/us/en/secure/partner/iot-itp-isa/overview.html',
        isaRenewalURL: '/content/www/us/en/secure/partner/forms/solutions-alliance-renewal.html',
    };
    
    if(location.protocol=='https:' && document.cookie.indexOf('SMSESSION')!=-1) {
        if (document.cookie.indexOf('IGHFLoggedIn') == -1) {
            var currentUrl = window.location.href;
            var cookiename = "IGHFtarget";
            var samlcookieValue = cookiename + "=" + encodeURIComponent(currentUrl) + ";secure;path=/;domain=.intel.com";
            document.cookie= samlcookieValue;
            window.location.href = 'https://web.archive.org/web/20200917044701/https://sfederation.intel.com/federation2/sp/WebExperienceManagementSolutiononAEMforIntel/d3d3LmludGVsLmNvbQ%3D%3D';
        }
    }
    
</script>

                </div>
                    <div class="slide-myintel component" data-component="myintel-navmenu" data-component-id="1"></div>
            </div>
            <div class="search-info">

                
                
                
                    <a id="dropDownSearchSignIn" target="_self" tabindex="0" href="#" class="login-toggle pale-blue" data-target="#modal-signin-form">Sign In</a> to access restricted content.
            </div>
            <div class="signout-info">
                <button type="button" class="btn btn-primary" data-sso-uri="https://federatesso.intel.com" data-logout-uri="" data-wap="{&quot;linktype&quot;:&quot;logout&quot;}" onclick="intel.signinsimplify.signOut()">Sign Out
                </button>
            </div>
        </div>
    </div>

<script type="text/javascript">
    var global_config = {
        "icsUrl": "https://web.archive.org/web/20200917044701/https://supporttickets.intel.com/services/oauth2/authorize?response_type=token&client_id=3MVG9QDx8IX8nP5Rh0X3B7gohGtUh8sjFQ8Tw_U8sS9_PoVrupDFwZ_nwLcze2n64lGBbGchyUb7_9W8n8pAV&redirect_uri=https%3A%2F%2Fsoftware.intel.com%2Fcontent%2Fwww%2Fus%2Fen%2Fsecure%2Fmy-intel%2Ftoken.html",
        "ipsUrl": "https://web.archive.org/web/20200917044701/https://premiersupport.intel.com/IPS/services/oauth2/authorize?response_type=token&client_id=3MVG9xOCXq4ID1uEa5F2lCYAp6mmKvTMlKbMIrsMKShY2oOqs1ETvPRjwmhoPivHd9_U53EzmiyYxn3nVpA9J&redirect_uri=https%3A%2F%2Fsoftware.intel.com%2Fcontent%2Fwww%2Fus%2Fen%2Fsecure%2Fmy-intel%2Ftoken.html"
    };
    var globalSearch = globalSearch || {};
    globalSearch = {
        sharePointSearchPromote:true,
        searchProvider: 'coveo',
        baseSearchQuery: 'localecode:"en_US" NOT generic1:"false" ',
        langRootPath: '/content/www/us/en',
        headingTxt: 'Best Match',
        locale: 'en_US',
        typeAheadUrl: 'https://web.archive.org/web/20200917044701/http://search.intel.com/SearchLookup/DataProvider.ashx',
        bestMatchUrl: 'https://web.archive.org/web/20200917044701/https://platform.cloud.coveo.com/rest/search/v2/querySuggest',
        searchRealm: 'Default',
        bestMatchQ1: 'NAR',
        bestMatchQ2: 'en',
        bestMatchQ11: 'sptitle,description,url,thumbnailurl,reimaginerootlevel',
        progId: '',
        useEMTTags: true,
        defaultPage: 'search.html',
        token: 'xx43151f87-f1d8-4211-ae65-ce98d805849c',
        searchHub: 'entepriseSearch',

        gtvLabels: {
            suggested: "",
            products: "Products",
            support: "Support",
            developers: "Developers",
            drivers: "Drivers",
            forums: "Forums",
            specifications: "Specifications",
            download: "",
            searchesRelatedTo: "",
            search: "Search Intel.com",
            inLabel: "in",
            searchSupport: "Search Intel® Support",
            intelcom: "",
            forLabel: "for",
            allResults: "All Results",
            show: "Show",
            results: "Results"
        },
        mobileResults: "5",
        laptopResults: "10",
        EDCProgramIdentifier: "false",
        rdcContentDataSource: ""
    };
</script>
</div>

                </nav>
                <!-- end global intel header -->
                <div class="mega-menu-content"></div>
                    
            </header>
        </div>

        <script type="text/javascript">
            var globalHeader = globalHeader || {};
            globalHeader = {
                currentPath: "/content/www/us/en/develop/articles/api-without-secrets-introduction-to-vulkan-part-7",
                lanloc: "/us/en",
                lanLoc: "US/en",
                helpformurl: "",
                intelHeaderFooterVersion: "menu3",
                megaMenuPath: "/content/data/globalelements/US/en/globalnav4",
                globalBannerPath: "/content/data/globalelements/US/en/sitewide-banner-placeholder",
                subMenuPath: "/content/data/globalelements/US/en/sub-navigation/idz/idz-gd",
                isCHF:false,
                secureRedirectURL: "",
            }
        </script>
    


        
    


<section data-scroll-track="false">
    <div class="container">
        <div class="row">
            <div class="col-xs-12 pull-right persistent-cta-integration-globalNav" id="alertMsg">
                <div id="alertSupport">
                    <div class="browser_detect" id="browserdetectid" style="display:none;">
                        <p>The browser version you are using is not recommended for this site.<br>Please consider upgrading to the latest version of your browser by clicking one of the following links.</p>
                        <div class="browser_types">
                            <ul>
                                
                                    <li><a href="https://web.archive.org/web/20200917044701/https://support.apple.com/downloads/safari">Safari</a></li>
                                
                                    <li><a href="https://web.archive.org/web/20200917044701/https://support.google.com/chrome/answer/95346?hl=en">Chrome</a></li>
                                
                                    <li><a href="https://web.archive.org/web/20200917044701/https://www.microsoft.com/en-us/edge">Edge</a></li>
                                
                                    <li><a href="https://web.archive.org/web/20200917044701/https://www.mozilla.org/en-US/firefox/new/">Firefox</a></li>
                                
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>



















<div class="editorialpost editorialPost parbase">

















<link rel="stylesheet" href="API%20Without%20Secrets_%20Introduction%20to%20Vulkan_%20Part%207_files/idzLibs.min.css" type="text/css"><script src="API%20Without%20Secrets_%20Introduction%20to%20Vulkan_%20Part%207_files/idzLibs.min.js" defer="defer"></script>





<header class="editorialPostHeader">
    <div class="sticky_button_blue sticky_button_blue_pp">
        <div class="persistent_cta_bar">















    <div class="persistent-cta persistent-pp intel-brand-ux" data-persistent-cta="true" id="persistent-cta-1" data-component-id="1" data-component="persistent-cta">
            
            <div class="container">
                <div class="col-xs-12 content">
                    <p class="cta-item">
                            <a class="btn btn-arrow btn-primary btn-no-shadow" href="https://web.archive.org/web/20200917044701/https://software.intel.com/sites/default/files/managed/5c/18/api-without-secrets-introduction-2-vulkan-part7.pdf" target="pageProperties['./stickyurl']}"><span>View PDF</span></a>
                    </p>
                </div>
            </div>
    </div>


</div>

    </div>
    
    <h1 class="editorialTitle"> API Without Secrets: Introduction to Vulkan* Part 7 </h1>
    <p class="editAuthor">
        <span class="label-style">By</span>

            
                
                    <a href="https://web.archive.org/web/20200917044701/https://software.intel.com/en-us/profile/+rw9Uv7oFRNFxXzJ/NuMzw==">Pawel Lapinski</a><span class="label-style">,</span>
                
                
            

            
        
    </p>
    <div class="editorialDisplayLine">
        <p class="editorialDisplayLineHide">

            
            
            

                        <span class="label-style">  Published:</span>03/19/2018&nbsp;&nbsp;
                <span class="label-style"> Last Updated:</span>03/19/2018

            
            
            
            
            

        </p>
    </div>
</header>
<div class="editorialPostNav ">
    
        <div id="inpage-navigation" class="inpage-navigation" style="height: 100%;"><h4 id="inpage-nav-contents">CONTENTS</h4><ul class="inpage-nav"><li class="parent nochildren"><a class="jumplink" href="#inpage-nav-undefined"><span class="word_arrow">Tutorial</span> 7: Uniform Buffers — Using Buffers in Shaders</a></li><li class="parent haschildren"><a class="jumplink" href="#inpage-nav-1"><span class="word_arrow">Creating</span> a Uniform Buffer</a><ul class="inpage-nav list-h3" style=""><li class="parent nochildren"><a class="jumplink" href="#inpage-nav-1-undefined"><span class="word_arrow">Copying</span> Data to Buffers</a></li></ul></li><li class="parent haschildren"><a class="jumplink" href="#inpage-nav-2"><span class="word_arrow">Preparing</span> Descriptor Sets</a><ul class="inpage-nav list-h3" style=""><li class="parent nochildren"><a class="jumplink" href="#inpage-nav-2-undefined"><span class="word_arrow">Creating</span> Descriptor Set Layout</a></li><li class="parent nochildren"><a class="jumplink" href="#inpage-nav-2-1"><span class="word_arrow">Creating</span> a Descriptor Pool</a></li><li class="parent nochildren"><a class="jumplink" href="#inpage-nav-2-2"><span class="word_arrow">Allocating</span> Descriptor Sets</a></li><li class="parent nochildren"><a class="jumplink" href="#inpage-nav-2-3"><span class="word_arrow">Updating</span> Descriptor Sets</a></li></ul></li><li class="parent haschildren"><a class="jumplink" href="#inpage-nav-3"><span class="word_arrow">Preparing</span> Drawing State</a><ul class="inpage-nav list-h3" style=""><li class="parent nochildren"><a class="jumplink" href="#inpage-nav-3-undefined"><span class="word_arrow">Creating</span> a Pipeline Layout</a></li><li class="parent nochildren"><a class="jumplink" href="#inpage-nav-3-1"><span class="word_arrow">Creating</span> Shader Programs</a></li><li class="parent nochildren"><a class="jumplink" href="#inpage-nav-3-2"><span class="word_arrow">Binding</span> Descriptor Sets</a></li></ul></li><li class="parent nochildren"><a class="jumplink" href="#inpage-nav-4"><span class="word_arrow">Tutorial</span> 7 Execution</a></li><li class="parent nochildren"><a class="jumplink" href="#inpage-nav-5"><span class="word_arrow">Cleaning</span> Up</a></li><li class="parent nochildren"><a class="jumplink" href="#inpage-nav-6"><span class="word_arrow">Conclusion</span></a></li></ul></div>
    
</div>
<div class="editorialPostContent ">
    <div class="editorialBody">
        <p></p><h2>Tutorial 7: Uniform Buffers — Using Buffers in Shaders<a class="inpage-nav-anchor" id="inpage-nav-undefined"></a></h2>

<h5>Go back to previous tutorial:&nbsp;<a href="https://web.archive.org/web/20200917044701/https://software.intel.com/content/www/us/en/develop/articles/api-without-secrets-introduction-to-vulkan-part-6.html" rel="nofollow">Introduction to Vulkan Part 6 – Descriptor Sets</a>&nbsp;</h5>

<p>This is the time to summarize knowledge presented so far and create a
 more typical rendering scenario. Here we will see an example that is 
still very simple, yet it reflects the most common way to display 3D 
geometry on screen. We will extend code from the previous tutorial by 
adding a transformation matrix to the shader uniform data. This way we 
can see how to use multiple different descriptors in a single descriptor
 set.</p>

<p>Of course, knowledge presented here applies to many other use cases, 
as descriptor sets may contain multiple types of resources, both various
 or identical. Nothing stops us from creating a descriptor set with many
 storage buffers or sampled images. We can also mix them as shown in 
this tutorial — here we use both a texture (combined image sampler) and a
 uniform buffer. We will see how to create a layout for such a 
descriptor, how to create a descriptor set, and how to populate it with 
appropriate resources.</p>

<p>In a previous part of the tutorial we learned how to create images 
and use them as textures inside shaders. This knowledge is also used in 
this tutorial, but here we focus only on buffers, and learn how to use 
them as a source of uniform data. We also see how to prepare a 
projection matrix, how to copy it to a buffer, and how to access it 
inside shaders.</p>

<h2>Creating a Uniform Buffer<a class="inpage-nav-anchor" id="inpage-nav-1"></a></h2>

<p>In this example we want to use two types of uniform variables inside 
shaders: combined image sampler (sampler2D inside shader) and a uniform 
projection matrix (mat4). In Vulkan*, uniform variables other than 
opaque types like samplers cannot be declared in a global scope (as in 
OpenGL*); they must be accessed from within uniform buffers. We start by
 creating a buffer.</p>

<p>Buffers can be used for many different purposes — they can be a 
source of vertex data (vertex attributes); we can keep vertex indices in
 them so they are used as index buffers; they can contain shader uniform
 data, or we can store data inside buffers from within shaders and use 
them as storage buffers. We can even keep formatted data inside buffers,
 access it through buffer views, and treat them as texel buffers 
(similar to OpenGL's buffer textures). For all the above purposes we use
 the usual buffers, created always in the same way. But it is the usage 
provided during buffer creation that defines how we can use a given 
buffer during its lifetime.</p>

<p>We saw how to create a buffer in <a href="https://web.archive.org/web/20200917044701/https://software.intel.com/content/www/us/en/develop/articles/api-without-secrets-introduction-to-vulkan-part-4.html">Introduction to Vulkan Part 4 – Vertex Attributes</a>, so only source code is presented here without diving into specifics:</p>
<div class="code-toolbar"><pre class=" language-cpp line-numbers"><div class="toolbar" style="float: right;"><div class="toolbar-item"><a>Copy Code</a></div></div><code class=" language-cpp">VkBufferCreateInfo buffer_create_info<span class="token operator">=</span> <span class="token punctuation">{</span>
    VK_STRUCTURE_TYPE_BUFFER_CREATE_INFO<span class="token punctuation">,</span> <span class="token comment">// VkStructureType      sType</span>
    <span class="token keyword keyword-nullptr">nullptr</span><span class="token punctuation">,</span>                              <span class="token comment">// const void          *pNext</span>
    <span class="token number">0</span><span class="token punctuation">,</span>                                    <span class="token comment">// VkBufferCreateFlags  flags</span>
    buffer<span class="token punctuation">.</span>Size<span class="token punctuation">,</span>                          <span class="token comment">// VkDeviceSize         size</span>
    usage<span class="token punctuation">,</span>                                <span class="token comment">// VkBufferUsageFlags   usage</span>
    VK_SHARING_MODE_EXCLUSIVE<span class="token punctuation">,</span>            <span class="token comment">// VkSharingMode        sharingMode</span>
    <span class="token number">0</span><span class="token punctuation">,</span>                                    <span class="token comment">// uint32_t             queueFamilyIndexCount</span>
    <span class="token keyword keyword-nullptr">nullptr</span>                               <span class="token comment">// const uint32_t      *pQueueFamilyIndices</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token keyword keyword-if">if</span><span class="token punctuation">(</span> <span class="token function">vkCreateBuffer</span><span class="token punctuation">(</span> <span class="token function">GetDevice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>buffer_create_info<span class="token punctuation">,</span> <span class="token keyword keyword-nullptr">nullptr</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>buffer<span class="token punctuation">.</span>Handle <span class="token punctuation">)</span> <span class="token operator">!=</span> VK_SUCCESS <span class="token punctuation">)</span> <span class="token punctuation">{</span>
    std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Could not create buffer!"</span> <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
    <span class="token keyword keyword-return">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword keyword-if">if</span><span class="token punctuation">(</span> <span class="token operator">!</span><span class="token function">AllocateBufferMemory</span><span class="token punctuation">(</span> buffer<span class="token punctuation">.</span>Handle<span class="token punctuation">,</span> memoryProperty<span class="token punctuation">,</span> <span class="token operator">&amp;</span>buffer<span class="token punctuation">.</span><span class="token type-opencl-host-c++ keyword">Memory</span> <span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
    std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Could not allocate memory for a buffer!"</span> <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
    <span class="token keyword keyword-return">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword keyword-if">if</span><span class="token punctuation">(</span> <span class="token function">vkBindBufferMemory</span><span class="token punctuation">(</span> <span class="token function">GetDevice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> buffer<span class="token punctuation">.</span>Handle<span class="token punctuation">,</span> buffer<span class="token punctuation">.</span><span class="token type-opencl-host-c++ keyword">Memory</span><span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">)</span> <span class="token operator">!=</span> VK_SUCCESS <span class="token punctuation">)</span> <span class="token punctuation">{</span>
    std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Could not bind memory to a buffer!"</span> <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
    <span class="token keyword keyword-return">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

<span class="token keyword keyword-return">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre></div>

<p>1. Tutorial07.cpp, function CreateBuffer()</p>

<p>We first create a buffer by defining its parameters in a variable of 
type VkBufferCreateInfo. Here we define the buffer's most important 
parameters — its size and usage. Next, we create a buffer by calling the
 <strong>vkCreateBuffer()</strong> function. After that, we need to 
allocate a memory object (or use a part of another, existing memory 
object) to bind it to the buffer through the <strong>vkBindBufferMemory()</strong>
 function call. Only after that can we use the buffer the way we want to
 in our application. Allocating a dedicated memory object is performed 
as follows:</p>
<div class="code-toolbar"><pre class=" language-cpp line-numbers"><div class="toolbar" style="float: right;"><div class="toolbar-item"><a>Copy Code</a></div></div><code class=" language-cpp">VkMemoryRequirements buffer_memory_requirements<span class="token punctuation">;</span>
<span class="token function">vkGetBufferMemoryRequirements</span><span class="token punctuation">(</span> <span class="token function">GetDevice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> buffer<span class="token punctuation">,</span> <span class="token operator">&amp;</span>buffer_memory_requirements <span class="token punctuation">)</span><span class="token punctuation">;</span>

VkPhysicalDeviceMemoryProperties memory_properties<span class="token punctuation">;</span>
<span class="token function">vkGetPhysicalDeviceMemoryProperties</span><span class="token punctuation">(</span> <span class="token function">GetPhysicalDevice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>memory_properties <span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword keyword-for">for</span><span class="token punctuation">(</span> <span class="token keyword keyword-uint32_t">uint32_t</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> memory_properties<span class="token punctuation">.</span>memoryTypeCount<span class="token punctuation">;</span> <span class="token operator">++</span>i <span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword keyword-if">if</span><span class="token punctuation">(</span> <span class="token punctuation">(</span>buffer_memory_requirements<span class="token punctuation">.</span>memoryTypeBits <span class="token operator">&amp;</span> <span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">&lt;&lt;</span> i<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span>
    <span class="token punctuation">(</span>memory_properties<span class="token punctuation">.</span>memoryTypes<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>propertyFlags <span class="token operator">&amp;</span> property<span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>

    VkMemoryAllocateInfo memory_allocate_info <span class="token operator">=</span> <span class="token punctuation">{</span>
      VK_STRUCTURE_TYPE_MEMORY_ALLOCATE_INFO<span class="token punctuation">,</span> <span class="token comment">// VkStructureType   sType</span>
      <span class="token keyword keyword-nullptr">nullptr</span><span class="token punctuation">,</span>                                <span class="token comment">// const void       *pNext</span>
      buffer_memory_requirements<span class="token punctuation">.</span>size<span class="token punctuation">,</span>        <span class="token comment">// VkDeviceSize      allocationSize</span>
      i                                       <span class="token comment">// uint32_t          memoryTypeIndex</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token keyword keyword-if">if</span><span class="token punctuation">(</span> <span class="token function">vkAllocateMemory</span><span class="token punctuation">(</span> <span class="token function">GetDevice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>memory_allocate_info<span class="token punctuation">,</span> <span class="token keyword keyword-nullptr">nullptr</span><span class="token punctuation">,</span> memory <span class="token punctuation">)</span> <span class="token operator">==</span> VK_SUCCESS <span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword keyword-return">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword keyword-return">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre></div>

<p>2. Tutorial07.cpp, function AllocateBufferMemory()</p>

<p>To create a buffer that can be used as a source of shader uniform 
data, we need to create a buffer with the 
VK_BUFFER_USAGE_UNIFORM_BUFFER_BIT usage. But, depending on how we want 
to transfer data to it, we may also need other usages as well. Here we 
want to use a buffer with a device-local memory bound to it because such
 memory may have better performance. But, depending on the hardware's 
architecture, it may not be possible to map such memory and copy data to
 it directly from the CPU. That's why we want to use a staging buffer 
through which data will be copied from the CPU to our uniform buffer. 
And in order to do that, our uniform buffer must also be created with 
the VK_BUFFER_USAGE_TRANSFER_DST_BIT usage, as it will be a target of 
data copy operation. Below, we can see how our buffer is finally 
created:</p>
<div class="code-toolbar"><pre class=" language-cpp line-numbers"><div class="toolbar" style="float: right;"><div class="toolbar-item"><a>Copy Code</a></div></div><code class=" language-cpp">Vulkan<span class="token punctuation">.</span>UniformBuffer<span class="token punctuation">.</span>Size <span class="token operator">=</span> <span class="token number">16</span> <span class="token operator">*</span> <span class="token keyword keyword-sizeof">sizeof</span><span class="token punctuation">(</span><span class="token keyword keyword-float">float</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword keyword-if">if</span><span class="token punctuation">(</span> <span class="token operator">!</span><span class="token function">CreateBuffer</span><span class="token punctuation">(</span> VK_BUFFER_USAGE_TRANSFER_DST_BIT <span class="token operator">|</span> VK_BUFFER_USAGE_UNIFORM_BUFFER_BIT<span class="token punctuation">,</span> VK_MEMORY_PROPERTY_DEVICE_LOCAL_BIT<span class="token punctuation">,</span> Vulkan<span class="token punctuation">.</span>UniformBuffer <span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
  std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Could not create uniform buffer!"</span> <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
  <span class="token keyword keyword-return">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword keyword-if">if</span><span class="token punctuation">(</span> <span class="token operator">!</span><span class="token function">CopyUniformBufferData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword keyword-return">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword keyword-return">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span style="height: 22.5px;"></span><span style="height: 45px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre></div>

<p>3. Tutorial07.cpp, function CreateUniformBuffer()</p>

<h3>Copying Data to Buffers<a class="inpage-nav-anchor" id="inpage-nav-1-undefined"></a></h3>

<p>The next thing is to upload appropriate data to our uniform buffer. 
In it we will store 16 elements of a 4 x 4 matrix. We are using an 
orthographic projection matrix but we can store any other type of data; 
we just need to remember that each uniform variable must be placed at an
 appropriate offset, counting from the beginning of a buffer's memory. 
Such an offset must be a multiple of a specific value. In other words, 
it must be aligned to a specific value or it must have a specific 
alignment. The alignment of each uniform variable depends on the 
variable's type, and the specification defines it as follows:</p>

<ul>
	<li>A scalar variable whose type has N bytes must be aligned to an address that is a multiple of N.</li>
	<li>A vector with two elements of size N (whose type has N bytes) must be aligned to 2 N.</li>
	<li>A vector with three or four elements, each of size N, has an alignment of 4 N.</li>
	<li>An array's alignment is calculated as an alignment of its elements, rounded up to a multiple of 16.</li>
	<li>A structure's alignment is calculated as the largest alignment of any of its members, rounded up to a multiple of 16.</li>
	<li>A row-major matrix with C columns has an alignment equal to the 
alignment of a vector with C elements of the same type as the elements 
of the matrix.</li>
	<li>A column-major matrix has an alignment equal to the alignment of the matrix column type.</li>
</ul>

<p>The above rules are similar to the rules defined for the standard 
GLSL 140 layout and we can apply it for Vulkan's uniform buffers as 
well. But we need to remember that if we place data at inappropriate 
offsets it will lead to incorrect values being fetched in shaders.</p>

<p>For the sake of simplicity, our example has only one uniform 
variable, so it can be placed at the very beginning of a buffer. To 
transfer data to it, we will use a staging buffer—it is created with <code>VK_BUFFER_USAGE_TRANSFER_SRC_BIT</code> usage and is backed by a memory supporting <code>VK_MEMORY_PROPERTY_HOST_VISIBLE_BIT</code> property, so we can map it. Below, we can see how data is copied to the staging buffer:</p>
<div class="code-toolbar"><pre class=" language-cpp line-numbers"><div class="toolbar" style="float: right;"><div class="toolbar-item"><a>Copy Code</a></div></div><code class=" language-cpp"><span class="token keyword keyword-const">const</span> std<span class="token operator">::</span>array<span class="token operator">&lt;</span><span class="token keyword keyword-float">float</span><span class="token punctuation">,</span> <span class="token number">16</span><span class="token operator">&gt;</span> uniform_data <span class="token operator">=</span> <span class="token function">GetUniformBufferData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword keyword-void">void</span> <span class="token operator">*</span>staging_buffer_memory_pointer<span class="token punctuation">;</span>
<span class="token keyword keyword-if">if</span><span class="token punctuation">(</span> <span class="token function">vkMapMemory</span><span class="token punctuation">(</span> <span class="token function">GetDevice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> Vulkan<span class="token punctuation">.</span>StagingBuffer<span class="token punctuation">.</span><span class="token type-opencl-host-c++ keyword">Memory</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> Vulkan<span class="token punctuation">.</span>UniformBuffer<span class="token punctuation">.</span>Size<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>staging_buffer_memory_pointer<span class="token punctuation">)</span> <span class="token operator">!=</span> VK_SUCCESS <span class="token punctuation">)</span> <span class="token punctuation">{</span>
    std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> “Could <span class="token operator">not</span> map memory <span class="token operator">and</span> upload data to a staging buffer<span class="token operator">!</span>” <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
    <span class="token keyword keyword-return">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">memcpy</span><span class="token punctuation">(</span> staging_buffer_memory_pointer<span class="token punctuation">,</span> uniform_data<span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> Vulkan<span class="token punctuation">.</span>UniformBuffer<span class="token punctuation">.</span>Size <span class="token punctuation">)</span><span class="token punctuation">;</span>

VkMappedMemoryRange flush_range <span class="token operator">=</span> <span class="token punctuation">{</span>
    VK_STRUCTURE_TYPE_MAPPED_MEMORY_RANGE<span class="token punctuation">,</span>  <span class="token comment">// VkStructureType  sType</span>
    <span class="token keyword keyword-nullptr">nullptr</span><span class="token punctuation">,</span>                                <span class="token comment">// const void      *pNext</span>
    Vulkan<span class="token punctuation">.</span>StagingBuffer<span class="token punctuation">.</span><span class="token type-opencl-host-c++ keyword">Memory</span><span class="token punctuation">,</span>            <span class="token comment">// VkDeviceMemory   memory</span>
    <span class="token number">0</span><span class="token punctuation">,</span>                                      <span class="token comment">// VkDeviceSize     offset</span>
    Vulkan<span class="token punctuation">.</span>UniformBuffer<span class="token punctuation">.</span>Size               <span class="token comment">// VkDeviceSize     size</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token function">vkFlushMappedMemoryRanges</span><span class="token punctuation">(</span> <span class="token function">GetDevice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>flush_range <span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">vkUnmapMemory</span><span class="token punctuation">(</span> <span class="token function">GetDevice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> Vulkan<span class="token punctuation">.</span>StagingBuffer<span class="token punctuation">.</span><span class="token type-opencl-host-c++ keyword">Memory</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 45px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre></div>

<p>4. Tutorial07.cpp, function CopyUniformBufferData()</p>

<p>First, we prepare the projection matrix data. It is stored in a 
std::array, but we can keep it in any other type of variable. Next, we 
map memory bound to the staging buffer. We need to have access to memory
 that is at least as big as the size of data we want to copy, so we also
 need to remember to create a staging buffer that is big enough to hold 
it. Next, we copy data to the staging buffer using an ordinary memcpy() 
function. Now, we must tell the driver which parts of the buffer's 
memory were changed; this operation is called flushing. After that, we 
unmap the staging buffer's memory. Keep in mind that frequent mapping 
and unmapping may impact performance of our application. In Vulkan, 
resources can be mapped all the time and it doesn't impact our 
application in any way. So, if we want to frequently transfer data using
 staging resources, we should map them only once and keep the acquired 
pointer for future use. Here we are unmapping it to just show you how to
 do it.</p>

<p>Now we need to transfer data from the staging buffer to our target, 
the uniform buffer. In order to do that, we need to prepare a command 
buffer in which we will record appropriate operations, and which we will
 submit for these operations to occur.</p>

<p>We start by taking any unused command buffer. It must be allocated 
from a pool created for a queue that supports transfer operations. 
Vulkan specification requires that at least one general purpose queue 
must be available — a queue that supports graphics (rendering), compute,
 and transfer operations. In the case of Intel® hardware, there is only 
one queue family with one general-purpose queue, so we don't have this 
problem. Other hardware vendors may support other types of queue 
families, maybe even a queue family that is dedicated for data transfer.
 In that case, we should choose a queue from such a family.</p>

<p>We start recording a command buffer by calling the <strong>vkBeginCommandBuffer()</strong> function. Next, we record the <strong>vkCmdCopyBuffer()</strong>
 command that performs the data transfer, where we tell it that we want 
to copy data from the very beginning of the staging buffer (0<sup>th</sup> offset) to the very beginning of our uniform buffer (also 0<sup>th</sup> offset). We also provide the size of data to be copied.</p>

<p>Next, we need to tell the driver that after the data transfer is 
performed, our whole uniform buffer will be used as, well, a uniform 
buffer. This is performed by placing a buffer memory barrier in which we
 tell it that, until now, we were transferring data to the buffer <code>(VK_ACCESS_TRANSFER_WRITE_BIT)</code>, but from now on we will use <code>(VK_ACCESS_UNIFORM_READ_BIT)</code> as a source of data for uniform variables. The buffer memory barrier is placed using the <strong>vkCmdPipelineBarrier()</strong> function call. It occurs after the data transfer operation <code>(VK_PIPELINE_STAGE_TRANSFER_BIT)</code> but before the vertex shader execution, as we access our uniform variable inside the vertex shader <code>(VK_PIPELINE_STAGE_VERTEX_SHADER_BIT)</code>.</p>

<p>Finally, we can end the command buffer and submit it to the queue. The whole process is presented in the code below:</p>
<div class="code-toolbar"><pre class=" language-cpp line-numbers"><div class="toolbar" style="float: right;"><div class="toolbar-item"><a>Copy Code</a></div></div><code class=" language-cpp"><span class="token comment">// Prepare command buffer to copy data from staging buffer to a uniform buffer</span>
VkCommandBuffer command_buffer <span class="token operator">=</span> Vulkan<span class="token punctuation">.</span>RenderingResources<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>CommandBuffer<span class="token punctuation">;</span>

VkCommandBufferBeginInfo command_buffer_begin_info <span class="token operator">=</span> <span class="token punctuation">{</span>
  VK_STRUCTURE_TYPE_COMMAND_BUFFER_BEGIN_INFO<span class="token punctuation">,</span> <span class="token comment">// VkStructureType              sType</span>
  <span class="token keyword keyword-nullptr">nullptr</span><span class="token punctuation">,</span>                                     <span class="token comment">// const void                  *pNext</span>
  VK_COMMAND_BUFFER_USAGE_ONE_TIME_SUBMIT_BIT<span class="token punctuation">,</span> <span class="token comment">// VkCommandBufferUsageFlags    flags</span>
  <span class="token keyword keyword-nullptr">nullptr</span>                                      <span class="token comment">// const VkCommandBufferInheritanceInfo  *pInheritanceInfo</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token function">vkBeginCommandBuffer</span><span class="token punctuation">(</span> command_buffer<span class="token punctuation">,</span> <span class="token operator">&amp;</span>command_buffer_begin_info<span class="token punctuation">)</span><span class="token punctuation">;</span>

VkBufferCopy buffer_copy_info <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token number">0</span><span class="token punctuation">,</span>                                <span class="token comment">// VkDeviceSize       srcOffset</span>
  <span class="token number">0</span><span class="token punctuation">,</span>                                <span class="token comment">// VkDeviceSize       dstOffset</span>
  Vulkan<span class="token punctuation">.</span>UniformBuffer<span class="token punctuation">.</span>Size         <span class="token comment">// VkDeviceSize       size</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token function">vkCmdCopyBuffer</span><span class="token punctuation">(</span> command_buffer<span class="token punctuation">,</span> Vulkan<span class="token punctuation">.</span>StagingBuffer<span class="token punctuation">.</span>Handle<span class="token punctuation">,</span> Vulkan<span class="token punctuation">.</span>UniformBuffer<span class="token punctuation">.</span>Handle<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>buffer_copy_info <span class="token punctuation">)</span><span class="token punctuation">;</span>

VkBufferMemoryBarrier buffer_memory_barrier <span class="token operator">=</span> <span class="token punctuation">{</span>
  VK_STRUCTURE_TYPE_BUFFER_MEMORY_BARRIER<span class="token punctuation">,</span> <span class="token comment">// VkStructureType    sType;</span>
  <span class="token keyword keyword-nullptr">nullptr</span><span class="token punctuation">,</span>                          <span class="token comment">// const void        *pNext</span>
  VK_ACCESS_TRANSFER_WRITE_BIT<span class="token punctuation">,</span>     <span class="token comment">// VkAccessFlags      srcAccessMask</span>
  VK_ACCESS_UNIFORM_READ_BIT<span class="token punctuation">,</span>       <span class="token comment">// VkAccessFlags      dstAccessMask</span>
  VK_QUEUE_FAMILY_IGNORED<span class="token punctuation">,</span>          <span class="token comment">// uint32_t           srcQueueFamilyIndex</span>
  VK_QUEUE_FAMILY_IGNORED<span class="token punctuation">,</span>          <span class="token comment">// uint32_t           dstQueueFamilyIndex</span>
  Vulkan<span class="token punctuation">.</span>UniformBuffer<span class="token punctuation">.</span>Handle<span class="token punctuation">,</span>      <span class="token comment">// VkBuffer           buffer</span>
  <span class="token number">0</span><span class="token punctuation">,</span>                                <span class="token comment">// VkDeviceSize       offset</span>
  VK_WHOLE_SIZE                     <span class="token comment">// VkDeviceSize       size</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token function">vkCmdPipelineBarrier</span><span class="token punctuation">(</span> command_buffer<span class="token punctuation">,</span> VK_PIPELINE_STAGE_TRANSFER_BIT<span class="token punctuation">,</span> VK_PIPELINE_STAGE_VERTEX_SHADER_BIT<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword keyword-nullptr">nullptr</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>buffer_memory_barrier<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword keyword-nullptr">nullptr</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">vkEndCommandBuffer</span><span class="token punctuation">(</span> command_buffer <span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Submit command buffer and copy data from staging buffer to a vertex buffer</span>
VkSubmitInfo submit_info <span class="token operator">=</span> <span class="token punctuation">{</span>
  VK_STRUCTURE_TYPE_SUBMIT_INFO<span class="token punctuation">,</span>    <span class="token comment">// VkStructureType    sType</span>
  <span class="token keyword keyword-nullptr">nullptr</span><span class="token punctuation">,</span>                          <span class="token comment">// const void        *pNext</span>
  <span class="token number">0</span><span class="token punctuation">,</span>                                <span class="token comment">// uint32_t           waitSemaphoreCount</span>
  <span class="token keyword keyword-nullptr">nullptr</span><span class="token punctuation">,</span>                          <span class="token comment">// const VkSemaphore *pWaitSemaphores</span>
  <span class="token keyword keyword-nullptr">nullptr</span><span class="token punctuation">,</span>                          <span class="token comment">// const VkPipelineStageFlags *pWaitDstStageMask;</span>
  <span class="token number">1</span><span class="token punctuation">,</span>                                <span class="token comment">// uint32_t           commandBufferCount</span>
  <span class="token operator">&amp;</span>command_buffer<span class="token punctuation">,</span>                  <span class="token comment">// const VkCommandBuffer *pCommandBuffers</span>
  <span class="token number">0</span><span class="token punctuation">,</span>                                <span class="token comment">// uint32_t           signalSemaphoreCount</span>
  <span class="token keyword keyword-nullptr">nullptr</span>                           <span class="token comment">// const VkSemaphore *pSignalSemaphores</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword keyword-if">if</span><span class="token punctuation">(</span> <span class="token function">vkQueueSubmit</span><span class="token punctuation">(</span> <span class="token function">GetGraphicsQueue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>Handle<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>submit_info<span class="token punctuation">,</span> VK_NULL_HANDLE <span class="token punctuation">)</span> <span class="token operator">!=</span> VK_SUCCESS <span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword keyword-return">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">vkDeviceWaitIdle</span><span class="token punctuation">(</span> <span class="token function">GetDevice</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword keyword-return">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 45px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre></div>

<p>5. Tutorial07.cpp, function CopyUniformBufferData()</p>

<p>In the code above we call the <strong>vkDeviceWaitIdle()</strong> 
function to make sure the data transfer operation is finished before we 
proceed. But in real-life situations, we should perform more appropriate
 synchronizations by using semaphores and/or fences. Waiting for all the
 GPU operations to finish may (and probably will) kill performance of 
our application.</p>

<h2>Preparing Descriptor Sets<a class="inpage-nav-anchor" id="inpage-nav-2"></a></h2>

<p>Now we can prepare descriptor sets — the interface between our 
application and a pipeline through which we can provide resources used 
by shaders. We start by creating a descriptor set layout.</p>

<h3>Creating Descriptor Set Layout<a class="inpage-nav-anchor" id="inpage-nav-2-undefined"></a></h3>

<p>The most typical way that 3D geometry is rendered is by multiplying 
vertices by model, view, and projection matrices inside a vertex shader.
 These matrices may be accumulated in a model-view-projection matrix. We
 need to provide such a matrix to the vertex shader in a uniform 
variable. Usually we want our geometry to be textured; the fragment 
shader needs access to a texture — a combined image sampler. We can also
 use a separate sampled image and a sampler; using combined image 
samplers may have better performance on some platforms.</p>

<p>When we issue drawing commands, we want the vertex shader to have 
access to a uniform variable, and the fragment shader to a combined 
image sampler. These resources must be provided in a descriptor set. In 
order to allocate such a set we need to create an appropriate layout, 
which defines what types of resources are stored inside the descriptor 
sets.</p>
<div class="code-toolbar"><pre class=" language-cpp line-numbers"><div class="toolbar" style="float: right;"><div class="toolbar-item"><a>Copy Code</a></div></div><code class=" language-cpp">std<span class="token operator">::</span>vector<span class="token operator">&lt;</span>VkDescriptorSetLayoutBinding<span class="token operator">&gt;</span> layout_bindings <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token punctuation">{</span>
    <span class="token number">0</span><span class="token punctuation">,</span>                                         <span class="token comment">// uint32_t           binding</span>
    VK_DESCRIPTOR_TYPE_COMBINED_IMAGE_SAMPLER<span class="token punctuation">,</span> <span class="token comment">// VkDescriptorType   descriptorType</span>
    <span class="token number">1</span><span class="token punctuation">,</span>                                         <span class="token comment">// uint32_t           descriptorCount</span>
    VK_SHADER_STAGE_FRAGMENT_BIT<span class="token punctuation">,</span>              <span class="token comment">// VkShaderStageFlags stageFlags</span>
    <span class="token keyword keyword-nullptr">nullptr</span>                                    <span class="token comment">// const VkSampler *pImmutableSamplers</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>                                                                  
  <span class="token punctuation">{</span>                                                                   
    <span class="token number">1</span><span class="token punctuation">,</span>                                         <span class="token comment">// uint32_t           binding</span>
    VK_DESCRIPTOR_TYPE_UNIFORM_BUFFER<span class="token punctuation">,</span>         <span class="token comment">// VkDescriptorType   descriptorType</span>
    <span class="token number">1</span><span class="token punctuation">,</span>                                         <span class="token comment">// uint32_t           descriptorCount</span>
    VK_SHADER_STAGE_VERTEX_BIT<span class="token punctuation">,</span>                <span class="token comment">// VkShaderStageFlags stageFlags</span>
    <span class="token keyword keyword-nullptr">nullptr</span>                                    <span class="token comment">// const VkSampler *pImmutableSamplers</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

VkDescriptorSetLayoutCreateInfo descriptor_set_layout_create_info <span class="token operator">=</span> <span class="token punctuation">{</span>
  VK_STRUCTURE_TYPE_DESCRIPTOR_SET_LAYOUT_CREATE_INFO<span class="token punctuation">,</span> <span class="token comment">// VkStructureType  sType</span>
  <span class="token keyword keyword-nullptr">nullptr</span><span class="token punctuation">,</span>                                             <span class="token comment">// const void      *pNext</span>
  <span class="token number">0</span><span class="token punctuation">,</span>                                                   <span class="token comment">// VkDescriptorSetLayoutCreateFlags flags</span>
  <span class="token keyword keyword-static_cast">static_cast</span><span class="token operator">&lt;</span><span class="token keyword keyword-uint32_t">uint32_t</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>layout_bindings<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>       <span class="token comment">// uint32_t         bindingCount</span>
  layout_bindings<span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                               <span class="token comment">// const VkDescriptorSetLayoutBinding *pBindings</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword keyword-if">if</span><span class="token punctuation">(</span> <span class="token function">vkCreateDescriptorSetLayout</span><span class="token punctuation">(</span> <span class="token function">GetDevice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>descriptor_set_layout_create_info<span class="token punctuation">,</span> <span class="token keyword keyword-nullptr">nullptr</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>Vulkan<span class="token punctuation">.</span>DescriptorSet<span class="token punctuation">.</span>Layout <span class="token punctuation">)</span> <span class="token operator">!=</span> VK_SUCCESS <span class="token punctuation">)</span> <span class="token punctuation">{</span>
  std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Could not create descriptor set layout!"</span> <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
  <span class="token keyword keyword-return">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword keyword-return">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 45px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre></div>

<p>6. Tutorial07.cpp, function CreateDescriptorSetLayout()</p>

<p>Descriptor set layouts are created by specifying bindings. Each 
binding defines a separate entry in a descriptor set and has its own, 
unique index within a descriptor set. In the above code we define that 
descriptor set (and its layout); it contains two bindings. The first 
binding, with index 0, is for one combined image sampler accessed by a 
fragment shader. The second binding, with index 1, is for a uniform 
buffer accessed by a vertex shader. Both are single resources; they are 
not arrays. But, we can also specify that each binding represents an 
array of resources by providing a value greater than 1 in the 
descriptorCount member of the VkDescriptorSetLayoutBinding structure.</p>

<p>Bindings are also used inside shaders. When we define uniform 
variables, we need to specify the same binding value as the one provided
 during layout creation:</p>

<pre><code>layout( set=S, binding=B ) uniform &lt;variable type&gt; &lt;variable name&gt;;</code></pre>

<p>Two things are worth mentioning. Bindings do not need to be 
consecutive. We can create a layout with three bindings occupying, for 
example, indices 2, 5, and 9. But unused slots may still use some 
memory, so we should keep bindings as close to 0 as possible.</p>

<p>We also specify which shader stages need access to which types of 
descriptors (which bindings). If we are not sure, we can provide more 
stages. For example, let's say we want to create several pipelines, all 
using descriptor sets with the same layout. In some of these pipelines, a
 uniform buffer will be accessed in a vertex shader, in others in a 
geometry shader, and in still others in both vertex and fragment 
shaders. For such a purpose we can create one layout in which we can 
specify that the uniform buffer will be accessed by vertex, geometry, 
and fragment shaders. But we should not provide unnecessary shader 
stages because, as usual, it may impact the performance (though this 
does not mean it will).</p>

<p>After specifying an array of bindings, we provide a pointer to it in a
 variable of type VkDescriptorSetLayoutCreateInfo. The pointer to this 
variable is provided in the <strong>vkCreateDescriptorSetLayout()</strong>
 function, which creates the actual layout. When we have it we can 
allocate a descriptor set. But first, we need a pool of memory from 
which the set can be allocated.</p>

<h3>Creating a Descriptor Pool<a class="inpage-nav-anchor" id="inpage-nav-2-1"></a></h3>

<p>When we want to create a descriptor pool we need to know what types 
of resources will be defined in descriptor sets allocated from the pool.
 We also need to specify not only the maximum number of resources of 
each type that can be stored in descriptor sets allocated from the pool,
 but also the maximum number of descriptor sets allocated from the pool.
 For example, we can prepare a storage for one combined image sampler 
and for one uniform buffer, but for two sets in total. This means that 
we can have two sets, one with a texture and one with a uniform buffer, 
or only one set, with both a uniform buffer and a texture (in such a 
situation the second pool is empty, as it cannot contain either of these
 two resources).</p>

<p>In our example we need only one descriptor set, and we can see below how to create a descriptor pool for it:</p>
<div class="code-toolbar"><pre class=" language-cpp line-numbers"><div class="toolbar" style="float: right;"><div class="toolbar-item"><a>Copy Code</a></div></div><code class=" language-cpp">std<span class="token operator">::</span>vector<span class="token operator">&lt;</span>VkDescriptorPoolSize<span class="token operator">&gt;</span> pool_sizes <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token punctuation">{</span>
    VK_DESCRIPTOR_TYPE_COMBINED_IMAGE_SAMPLER<span class="token punctuation">,</span>   <span class="token comment">// VkDescriptorType  type</span>
    <span class="token number">1</span>                                            <span class="token comment">// uint32_t          descriptorCount</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    VK_DESCRIPTOR_TYPE_UNIFORM_BUFFER<span class="token punctuation">,</span>           <span class="token comment">// VkDescriptorType  type</span>
    <span class="token number">1</span>                                            <span class="token comment">// uint32_t          descriptorCount</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

VkDescriptorPoolCreateInfo descriptor_pool_create_info <span class="token operator">=</span> <span class="token punctuation">{</span>
  VK_STRUCTURE_TYPE_DESCRIPTOR_POOL_CREATE_INFO<span class="token punctuation">,</span> <span class="token comment">// VkStructureType     sType</span>
  <span class="token keyword keyword-nullptr">nullptr</span><span class="token punctuation">,</span>                                       <span class="token comment">// const void         *pNext</span>
  <span class="token number">0</span><span class="token punctuation">,</span>                                             <span class="token comment">// VkDescriptorPoolCreateFlags flags</span>
  <span class="token number">1</span><span class="token punctuation">,</span>                                             <span class="token comment">// uint32_t            maxSets</span>
  <span class="token keyword keyword-static_cast">static_cast</span><span class="token operator">&lt;</span><span class="token keyword keyword-uint32_t">uint32_t</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>pool_sizes<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>      <span class="token comment">// uint32_t            poolSizeCount</span>
  pool_sizes<span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                              <span class="token comment">// const VkDescriptorPoolSize *pPoolSizes</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword keyword-if">if</span><span class="token punctuation">(</span> <span class="token function">vkCreateDescriptorPool</span><span class="token punctuation">(</span> <span class="token function">GetDevice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>descriptor_pool_create_info<span class="token punctuation">,</span> <span class="token keyword keyword-nullptr">nullptr</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>Vulkan<span class="token punctuation">.</span>DescriptorSet<span class="token punctuation">.</span>Pool <span class="token punctuation">)</span> <span class="token operator">!=</span> VK_SUCCESS <span class="token punctuation">)</span> <span class="token punctuation">{</span>
  std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Could not create descriptor pool!"</span> <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
  <span class="token keyword keyword-return">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword keyword-return">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 45px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre></div>

<p>7. Tutorial07.cpp, function CreateDescriptorPool()</p>

<p>Now, we are ready to allocate descriptor sets from the pool using the previously created layout.</p>

<h3>Allocating Descriptor Sets<a class="inpage-nav-anchor" id="inpage-nav-2-2"></a></h3>

<p>Descriptor set allocation is pretty straightforward. We just need a 
descriptor pool and a layout. We specify the number of descriptor sets 
to allocate and call the <strong>vkAllocateDescriptorSets()</strong> function like this:</p>
<div class="code-toolbar"><pre class=" language-cpp line-numbers"><div class="toolbar" style="float: right;"><div class="toolbar-item"><a>Copy Code</a></div></div><code class=" language-cpp">VkDescriptorSetAllocateInfo descriptor_set_allocate_info<span class="token operator">=</span> <span class="token punctuation">{</span>
    VK_STRUCTURE_TYPE_DESCRIPTOR_SET_ALLOCATE_INFO<span class="token punctuation">,</span> <span class="token comment">// VkStructureType   sType</span>
    <span class="token keyword keyword-nullptr">nullptr</span><span class="token punctuation">,</span>                                        <span class="token comment">// const void       *pNext</span>
    Vulkan<span class="token punctuation">.</span>DescriptorSet<span class="token punctuation">.</span>Pool<span class="token punctuation">,</span>                      <span class="token comment">// VkDescriptorPool  descriptorPool</span>
    <span class="token number">1</span><span class="token punctuation">,</span>                                              <span class="token comment">// uint32_t      descriptorSetCount</span>
    <span class="token operator">&amp;</span>Vulkan<span class="token punctuation">.</span>DescriptorSet<span class="token punctuation">.</span>Layout                <span class="token comment">// const VkDescriptorSetLayout *pSetLayouts</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword keyword-if">if</span><span class="token punctuation">(</span> <span class="token function">vkAllocateDescriptorSets</span><span class="token punctuation">(</span> <span class="token function">GetDevice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>descriptor_set_allocate_info<span class="token punctuation">,</span> <span class="token operator">&amp;</span>Vulkan<span class="token punctuation">.</span>DescriptorSet<span class="token punctuation">.</span>Handle <span class="token punctuation">)</span> <span class="token operator">!=</span> VK_SUCCESS <span class="token punctuation">)</span> <span class="token punctuation">{</span>
    std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Could not allocate descriptor set!"</span> <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
    <span class="token keyword keyword-return">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword keyword-return">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 45px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre></div>

<p>8. Tutorial07.cpp, function AllocateDescriptorSet()</p>

<h3>Updating Descriptor Sets<a class="inpage-nav-anchor" id="inpage-nav-2-3"></a></h3>

<p>We have allocated a descriptor set. It is used to provide a texture 
and a uniform buffer to the pipeline so they can be used inside shaders.
 Now we must provide specific resources that will be used as 
descriptors. For the combined image sampler, we need two resources — an 
image, which can be sampled inside shaders (it must be created with the <code>VK_IMAGE_USAGE_SAMPLED_BIT usage)</code>,
 and a sampler. These are two separate resources, but they are provided 
together to form a single, combined image sampler descriptor. For 
details about how to create these two resources, please refer to the <a href="https://web.archive.org/web/20200917044701/https://software.intel.com/content/www/us/en/develop/articles/api-without-secrets-introduction-to-vulkan-part-6.html">Introduction to Vulkan Part 6 – Descriptor Sets</a>.
 For the uniform buffer we will provide a buffer created earlier. To 
provide specific resources to a descriptor, we need to update a 
descriptor set. During updates we specify descriptor types, binding 
numbers, and counts in exactly the same way as we did during layout 
creation. These values must match. Apart from that, depending on the 
descriptor type, we also need to create variables of type:</p>

<ul>
	<li>VkDescriptorImageInfo, for samplers, sampled images, combined image samplers, and input attachments</li>
	<li>VkDescriptorBufferInfo, for uniform and storage buffers and their dynamic variations</li>
	<li>VkBufferView, for uniform and storage texel buffers</li>
</ul>

<p>Through them, we provide handles of specific Vulkan resources that 
should be used for corresponding descriptors. All this is provided to 
the <strong>vkUpdateDescriptorSets()</strong> function, as we can see below:</p>
<div class="code-toolbar"><pre class=" language-cpp line-numbers"><div class="toolbar" style="float: right;"><div class="toolbar-item"><a>Copy Code</a></div></div><code class=" language-cpp">VkDescriptorImageInfo image_info<span class="token operator">=</span> <span class="token punctuation">{</span>
  Vulkan<span class="token punctuation">.</span><span class="token type-opencl-host-c++ keyword">Image</span><span class="token punctuation">.</span><span class="token type-opencl-host-c++ keyword">Sampler</span><span class="token punctuation">,</span>                    <span class="token comment">// VkSampler        sampler</span>
  Vulkan<span class="token punctuation">.</span><span class="token type-opencl-host-c++ keyword">Image</span><span class="token punctuation">.</span>View<span class="token punctuation">,</span>                       <span class="token comment">// VkImageView      imageView</span>
  VK_IMAGE_LAYOUT_SHADER_READ_ONLY_OPTIMAL <span class="token comment">// VkImageLayout    imageLayout</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

VkDescriptorBufferInfo buffer_info <span class="token operator">=</span> <span class="token punctuation">{</span>
  Vulkan<span class="token punctuation">.</span>UniformBuffer<span class="token punctuation">.</span>Handle<span class="token punctuation">,</span>             <span class="token comment">// VkBuffer         buffer</span>
  <span class="token number">0</span><span class="token punctuation">,</span>                                       <span class="token comment">// VkDeviceSize     offset</span>
  Vulkan<span class="token punctuation">.</span>UniformBuffer<span class="token punctuation">.</span>Size                <span class="token comment">// VkDeviceSize     range</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

std<span class="token operator">::</span>vector<span class="token operator">&lt;</span>VkWriteDescriptorSet<span class="token operator">&gt;</span> descriptor_writes <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token punctuation">{</span>
    VK_STRUCTURE_TYPE_WRITE_DESCRIPTOR_SET<span class="token punctuation">,</span>    <span class="token comment">// VkStructureType     sType</span>
    <span class="token keyword keyword-nullptr">nullptr</span><span class="token punctuation">,</span>                                   <span class="token comment">// const void         *pNext</span>
    Vulkan<span class="token punctuation">.</span>DescriptorSet<span class="token punctuation">.</span>Handle<span class="token punctuation">,</span>               <span class="token comment">// VkDescriptorSet     dstSet</span>
    <span class="token number">0</span><span class="token punctuation">,</span>                                         <span class="token comment">// uint32_t            dstBinding</span>
    <span class="token number">0</span><span class="token punctuation">,</span>                                         <span class="token comment">// uint32_t            dstArrayElement</span>
    <span class="token number">1</span><span class="token punctuation">,</span>                                         <span class="token comment">// uint32_t            descriptorCount</span>
    VK_DESCRIPTOR_TYPE_COMBINED_IMAGE_SAMPLER<span class="token punctuation">,</span> <span class="token comment">// VkDescriptorType    descriptorType</span>
    <span class="token operator">&amp;</span>image_info<span class="token punctuation">,</span>                               <span class="token comment">// const VkDescriptorImageInfo  *pImageInfo</span>
    <span class="token keyword keyword-nullptr">nullptr</span><span class="token punctuation">,</span>                                   <span class="token comment">// const VkDescriptorBufferInfo *pBufferInfo</span>
    <span class="token keyword keyword-nullptr">nullptr</span>                                    <span class="token comment">// const VkBufferView *pTexelBufferView</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    VK_STRUCTURE_TYPE_WRITE_DESCRIPTOR_SET<span class="token punctuation">,</span>    <span class="token comment">// VkStructureType     sType</span>
    <span class="token keyword keyword-nullptr">nullptr</span><span class="token punctuation">,</span>                                   <span class="token comment">// const void         *pNext</span>
    Vulkan<span class="token punctuation">.</span>DescriptorSet<span class="token punctuation">.</span>Handle<span class="token punctuation">,</span>               <span class="token comment">// VkDescriptorSet     dstSet</span>
    <span class="token number">1</span><span class="token punctuation">,</span>                                         <span class="token comment">// uint32_t            dstBinding</span>
    <span class="token number">0</span><span class="token punctuation">,</span>                                         <span class="token comment">// uint32_t            dstArrayElement</span>
    <span class="token number">1</span><span class="token punctuation">,</span>                                         <span class="token comment">// uint32_t            descriptorCount</span>
    VK_DESCRIPTOR_TYPE_UNIFORM_BUFFER<span class="token punctuation">,</span>         <span class="token comment">// VkDescriptorType    descriptorType</span>
    <span class="token keyword keyword-nullptr">nullptr</span><span class="token punctuation">,</span>                                   <span class="token comment">// const VkDescriptorImageInfo  *pImageInfo</span>
    <span class="token operator">&amp;</span>buffer_info<span class="token punctuation">,</span>                              <span class="token comment">// const VkDescriptorBufferInfo *pBufferInfo</span>
    <span class="token keyword keyword-nullptr">nullptr</span>                                    <span class="token comment">// const VkBufferView *pTexelBufferView</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token function">vkUpdateDescriptorSets</span><span class="token punctuation">(</span> <span class="token function">GetDevice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword keyword-static_cast">static_cast</span><span class="token operator">&lt;</span><span class="token keyword keyword-uint32_t">uint32_t</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>descriptor_writes<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>descriptor_writes<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword keyword-nullptr">nullptr</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword keyword-return">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 45px;"></span><span style="height: 22.5px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre></div>

<p>9. Tutorial07.cpp, function UpdateDescriptorSet()</p>

<p>Now we have a valid descriptor set. We can bind it during command 
buffer recording. But, for that we need a pipeline object, which is 
created with an appropriate pipeline layout.</p>

<h2>Preparing Drawing State<a class="inpage-nav-anchor" id="inpage-nav-3"></a></h2>

<p>Created descriptor set layouts are required for two purposes:</p>

<ul>
	<li>Allocating descriptor sets from pools</li>
	<li>Creating pipeline layout</li>
</ul>

<p>The descriptor set layout specifies what types of resources the 
descriptor set contains. The pipeline layout specifies what types of 
resources can be accessed by a pipeline and its shaders. That's why 
before we can use a descriptor set during command buffer recording, we 
need to create a pipeline layout.</p>

<h3>Creating a Pipeline Layout<a class="inpage-nav-anchor" id="inpage-nav-3-undefined"></a></h3>

<p>The pipeline layout defines the resources that a given pipeline can 
access. These are divided into descriptors and push constants. To create
 a pipeline layout, we need to provide a list of descriptor set layouts,
 and a list of ranges of push constants.</p>

<p>Push constants provide a way to pass data to shaders easily and very,
 very quickly. Unfortunately, the amount of data is also very limited — 
the specification allows only 128 bytes to be available for push 
constants data provided to a pipeline at a given time. Hardware vendors 
may allow us to provide more data, but it is still a very small amount 
compared to usual descriptors, like uniform buffers.</p>

<p>In this example we don't use push constants ranges, so we only need to provide our descriptor set layout and call the <strong>vkCreatePipelineLayout()</strong> function. The code below does exactly that:</p>
<div class="code-toolbar"><pre class=" language-cpp line-numbers"><div class="toolbar" style="float: right;"><div class="toolbar-item"><a>Copy Code</a></div></div><code class=" language-cpp">VkPipelineLayoutCreateInfo layout_create_info<span class="token operator">=</span> <span class="token punctuation">{</span>
  VK_STRUCTURE_TYPE_PIPELINE_LAYOUT_CREATE_INFO<span class="token punctuation">,</span> <span class="token comment">// VkStructureType              sType</span>
  <span class="token keyword keyword-nullptr">nullptr</span><span class="token punctuation">,</span>                                       <span class="token comment">// const void                  *pNext</span>
  <span class="token number">0</span><span class="token punctuation">,</span>                                             <span class="token comment">// VkPipelineLayoutCreateFlags  flags</span>
  <span class="token number">1</span><span class="token punctuation">,</span>                                             <span class="token comment">// uint32_t                     setLayoutCount</span>
  <span class="token operator">&amp;</span>Vulkan<span class="token punctuation">.</span>DescriptorSet<span class="token punctuation">.</span>Layout<span class="token punctuation">,</span>                  <span class="token comment">// const VkDescriptorSetLayout *pSetLayouts</span>
  <span class="token number">0</span><span class="token punctuation">,</span>                                             <span class="token comment">// uint32_t                     pushConstantRangeCount</span>
  <span class="token keyword keyword-nullptr">nullptr</span>                                        <span class="token comment">// const VkPushConstantRange   *pPushConstantRanges</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword keyword-if">if</span><span class="token punctuation">(</span> <span class="token function">vkCreatePipelineLayout</span><span class="token punctuation">(</span> <span class="token function">GetDevice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>layout_create_info<span class="token punctuation">,</span> <span class="token keyword keyword-nullptr">nullptr</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>Vulkan<span class="token punctuation">.</span>PipelineLayout <span class="token punctuation">)</span> <span class="token operator">!=</span> VK_SUCCESS <span class="token punctuation">)</span> <span class="token punctuation">{</span>
  std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Could not create pipeline layout!"</span> <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
  <span class="token keyword keyword-return">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword keyword-return">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre></div>

<p>10. Tutorial07.cpp, function CreatePipelineLayout()</p>

<h3>Creating Shader Programs<a class="inpage-nav-anchor" id="inpage-nav-3-1"></a></h3>

<p>Now we need a graphics pipeline. Pipeline creation is a very 
time-consuming process, from both the performance and code development 
perspective. I will skip the code and present only the GLSL source code 
of shaders.</p>

<p>The vertex shader used during drawing takes a vertex position and 
multiplies it by a projection matrix read from a uniform variable. This 
variable is stored inside a uniform buffer. The descriptor set, through 
which we provide our uniform buffer, is the first (and the only one in 
this case) in the list of descriptor sets specified during pipeline 
layout creation. So, when we record a command buffer, we can bind it to 
the 0<sup>th</sup> index. This is because indices to which we bind 
descriptor sets must match indices corresponding to descriptor set 
layouts that are provided during pipeline layout creation. The same set 
index must be specified inside shaders. The uniform buffer is 
represented by the second binding within that set (it has an index equal
 to 1), and the same binding number must also be specified. This is the 
whole vertex shader source code:</p>
<div class="code-toolbar"><pre class=" language-cpp line-numbers"><div class="toolbar" style="float: right;"><div class="toolbar-item"><a>Copy Code</a></div></div><code class=" language-cpp"><span class="token macro property">#version 450</span>

<span class="token function">layout</span><span class="token punctuation">(</span>set<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> binding<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span> uniform u_UniformBuffer <span class="token punctuation">{</span>
    mat4 u_ProjectionMatrix<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token function">layout</span><span class="token punctuation">(</span>location <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span> in vec4 i_Position<span class="token punctuation">;</span>
<span class="token function">layout</span><span class="token punctuation">(</span>location <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">)</span> in vec2 i_Texcoord<span class="token punctuation">;</span>

out gl_PerVertex
<span class="token punctuation">{</span>
    vec4 gl_Position<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token function">layout</span><span class="token punctuation">(</span>location <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span> out vec2 v_Texcoord<span class="token punctuation">;</span>

<span class="token keyword keyword-void">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    gl_Position <span class="token operator">=</span> u_ProjectionMatrix <span class="token operator">*</span> i_Position<span class="token punctuation">;</span>
    v_Texcoord <span class="token operator">=</span> i_Texcoord<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre></div>

<p>11. shader.vert, -</p>

<p>Inside the shader we also pass texture coordinates to a fragment 
shader. The fragment shader takes them and samples the combined image 
sampler. It is provided through the same descriptor set bound to index 
0, but it is the first descriptor inside it, so in this case we specify 0
 (zero) as the binding's value. Have a look at the full GLSL source code
 of the fragment shader:</p>
<div class="code-toolbar"><pre class=" language-cpp line-numbers"><div class="toolbar" style="float: right;"><div class="toolbar-item"><a>Copy Code</a></div></div><code class=" language-cpp"><span class="token macro property">#version 450</span>

<span class="token function">layout</span><span class="token punctuation">(</span>set<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> binding<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span> uniform sampler2D u_Texture<span class="token punctuation">;</span>

<span class="token function">layout</span><span class="token punctuation">(</span>location <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span> in vec2 v_Texcoord<span class="token punctuation">;</span>

<span class="token function">layout</span><span class="token punctuation">(</span>location <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span> out vec4 o_Color<span class="token punctuation">;</span>

<span class="token keyword keyword-void">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  o_Color <span class="token operator">=</span> <span class="token function">texture</span><span class="token punctuation">(</span> u_Texture<span class="token punctuation">,</span> v_Texcoord <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre></div>

<p>12. shader.frag, -</p>

<p>The above two shaders need to be converted to a SPIR-V* assembly 
before we can use them in our application. The core Vulkan specification
 allows only for binary SPIR-V data to be used as a source of shader 
instructions. From them we can create two shader modules, one for each 
shader stage, and use them to create a graphics pipeline. The rest of 
the pipeline state remains unchanged.</p>

<h3>Binding Descriptor Sets<a class="inpage-nav-anchor" id="inpage-nav-3-2"></a></h3>

<p>Let's assume we have all the other resources created and ready to be 
used to draw our geometry. We start recording a command buffer. Drawing 
commands can only be called inside render passes. Before we can draw any
 geometry, we need to set all the required states — first and foremost, 
we need to bind a graphics pipeline. Apart from that, if we are using a 
vertex buffer, we need to bind the appropriate buffer for this purpose. 
If we want to issue indexed drawing commands, we need to bind a buffer 
with vertex indices too. And when we are using shader resources like 
uniform buffers or textures, we need to bind descriptor sets. We do this
 by calling the <strong>vkCmdBindDescriptorSets()</strong> function, in 
which we need to provide not only the handle of our descriptor set, but 
also the handle of the pipeline layout (so we need to keep it). Only 
after that can we record drawing commands. These operations are 
presented in the code below:</p>
<div class="code-toolbar"><pre class=" language-cpp line-numbers"><div class="toolbar" style="float: right;"><div class="toolbar-item"><a>Copy Code</a></div></div><code class=" language-cpp"><span class="token function">vkCmdBeginRenderPass</span><span class="token punctuation">(</span> command_buffer<span class="token punctuation">,</span> <span class="token operator">&amp;</span>render_pass_begin_info<span class="token punctuation">,</span> VK_SUBPASS_CONTENTS_INLINE <span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">vkCmdBindPipeline</span><span class="token punctuation">(</span> command_buffer<span class="token punctuation">,</span> VK_PIPELINE_BIND_POINT_GRAPHICS<span class="token punctuation">,</span> Vulkan<span class="token punctuation">.</span>GraphicsPipeline <span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// ...</span>

VkDeviceSize offset <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token function">vkCmdBindVertexBuffers</span><span class="token punctuation">(</span> command_buffer<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>Vulkan<span class="token punctuation">.</span>VertexBuffer<span class="token punctuation">.</span>Handle<span class="token punctuation">,</span> <span class="token operator">&amp;</span>offset <span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">vkCmdBindDescriptorSets</span><span class="token punctuation">(</span> command_buffer<span class="token punctuation">,</span> VK_PIPELINE_BIND_POINT_GRAPHICS<span class="token punctuation">,</span> Vulkan<span class="token punctuation">.</span>PipelineLayout<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>Vulkan<span class="token punctuation">.</span>DescriptorSet<span class="token punctuation">.</span>Handle<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword keyword-nullptr">nullptr</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">vkCmdDraw</span><span class="token punctuation">(</span> command_buffer<span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">vkCmdEndRenderPass</span><span class="token punctuation">(</span> command_buffer <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 45px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre></div>

<p>13. Tutorial07.cpp, function PrepareFrame()</p>

<p>Don't forget that a typical frame of animation requires us to acquire
 an image from a swapchain, record the command buffer (or more) as 
presented above, submit it to a queue, and present a previously acquired
 swapchain image so it gets displayed according to the present mode 
requested during swapchain creation.</p>

<h2>Tutorial 7 Execution<a class="inpage-nav-anchor" id="inpage-nav-4"></a></h2>

<p>Have a look at how the final image generated by the sample program should appear:</p>

<p style="text-align:center"><img alt="track with Intel logo" src="API%20Without%20Secrets_%20Introduction%20to%20Vulkan_%20Part%207_files/introduction-to-vulkan-part-7-fig1-758012.png"></p>

<p>We still render a quad that has a texture applied to its surface. But
 the size of the quad should remain unchanged when we change the size of
 our application's window.</p>

<h2>Cleaning Up<a class="inpage-nav-anchor" id="inpage-nav-5"></a></h2>

<p>As usual, at the end of our application, we should perform a cleanup.</p>
<div class="code-toolbar"><pre class=" language-cpp line-numbers"><div class="toolbar" style="float: right;"><div class="toolbar-item"><a>Copy Code</a></div></div><code class=" language-cpp"><span class="token comment">// ...</span>

<span class="token keyword keyword-if">if</span><span class="token punctuation">(</span> Vulkan<span class="token punctuation">.</span>GraphicsPipeline <span class="token operator">!=</span> VK_NULL_HANDLE <span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">vkDestroyPipeline</span><span class="token punctuation">(</span> <span class="token function">GetDevice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> Vulkan<span class="token punctuation">.</span>GraphicsPipeline<span class="token punctuation">,</span> <span class="token keyword keyword-nullptr">nullptr</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
  Vulkan<span class="token punctuation">.</span>GraphicsPipeline <span class="token operator">=</span> VK_NULL_HANDLE<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword keyword-if">if</span><span class="token punctuation">(</span> Vulkan<span class="token punctuation">.</span>PipelineLayout <span class="token operator">!=</span> VK_NULL_HANDLE <span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">vkDestroyPipelineLayout</span><span class="token punctuation">(</span> <span class="token function">GetDevice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> Vulkan<span class="token punctuation">.</span>PipelineLayout<span class="token punctuation">,</span> <span class="token keyword keyword-nullptr">nullptr</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
  Vulkan<span class="token punctuation">.</span>PipelineLayout <span class="token operator">=</span> VK_NULL_HANDLE<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// ...</span>

<span class="token keyword keyword-if">if</span><span class="token punctuation">(</span> Vulkan<span class="token punctuation">.</span>DescriptorSet<span class="token punctuation">.</span>Pool <span class="token operator">!=</span> VK_NULL_HANDLE <span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">vkDestroyDescriptorPool</span><span class="token punctuation">(</span> <span class="token function">GetDevice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> Vulkan<span class="token punctuation">.</span>DescriptorSet<span class="token punctuation">.</span>Pool<span class="token punctuation">,</span> <span class="token keyword keyword-nullptr">nullptr</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
  Vulkan<span class="token punctuation">.</span>DescriptorSet<span class="token punctuation">.</span>Pool <span class="token operator">=</span> VK_NULL_HANDLE<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword keyword-if">if</span><span class="token punctuation">(</span> Vulkan<span class="token punctuation">.</span>DescriptorSet<span class="token punctuation">.</span>Layout <span class="token operator">!=</span> VK_NULL_HANDLE <span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">vkDestroyDescriptorSetLayout</span><span class="token punctuation">(</span> <span class="token function">GetDevice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> Vulkan<span class="token punctuation">.</span>DescriptorSet<span class="token punctuation">.</span>Layout<span class="token punctuation">,</span> <span class="token keyword keyword-nullptr">nullptr</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
  Vulkan<span class="token punctuation">.</span>DescriptorSet<span class="token punctuation">.</span>Layout <span class="token operator">=</span> VK_NULL_HANDLE<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">DestroyBuffer</span><span class="token punctuation">(</span> Vulkan<span class="token punctuation">.</span>UniformBuffer <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre></div>

<p>14. Tutorial07.cpp, function destructor</p>

<p>Most of the resources are destroyed, as usual. We do this in the 
order opposite to the order of their creation. Here, only the part of 
code relevant to our example is presented. The graphics pipeline is 
destroyed by calling the <strong>vkDestroyPipeline()</strong> function. To destroy its layout we need to call the <strong>vkDestroyPipelineLayout()</strong>
 function. We don't need to destroy all descriptor sets separately, 
because when we destroy a descriptor pool, all sets allocated from it 
also get destroyed. To destroy a descriptor pool we need to call the <strong>vkDestroyDescriptorPool()</strong> function. The descriptor set layout needs to be destroyed separately with the <strong>vkDestroyDescriptorSetLayout()</strong> function. After that, we can destroy the uniform buffer; it is done with the <strong>vkDestroyBuffer()</strong> function. But we can't forget to destroy the memory bound to it via the <strong>vkFreeMemory()</strong> function, as seen below:</p>
<div class="code-toolbar"><pre class=" language-cpp line-numbers"><div class="toolbar" style="float: right;"><div class="toolbar-item"><a>Copy Code</a></div></div><code class=" language-cpp"><span class="token keyword keyword-if">if</span><span class="token punctuation">(</span> buffer<span class="token punctuation">.</span>Handle <span class="token operator">!=</span> VK_NULL_HANDLE <span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">vkDestroyBuffer</span><span class="token punctuation">(</span> <span class="token function">GetDevice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> buffer<span class="token punctuation">.</span>Handle<span class="token punctuation">,</span> <span class="token keyword keyword-nullptr">nullptr</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
  buffer<span class="token punctuation">.</span>Handle <span class="token operator">=</span> VK_NULL_HANDLE<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword keyword-if">if</span><span class="token punctuation">(</span> buffer<span class="token punctuation">.</span><span class="token type-opencl-host-c++ keyword">Memory</span> <span class="token operator">!=</span> VK_NULL_HANDLE <span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">vkFreeMemory</span><span class="token punctuation">(</span> <span class="token function">GetDevice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> buffer<span class="token punctuation">.</span><span class="token type-opencl-host-c++ keyword">Memory</span><span class="token punctuation">,</span> <span class="token keyword keyword-nullptr">nullptr</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
  buffer<span class="token punctuation">.</span><span class="token type-opencl-host-c++ keyword">Memory</span> <span class="token operator">=</span> VK_NULL_HANDLE<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre></div>

<p>15. Tutorial07.cpp, function DestroyBuffe()</p>

<h2>Conclusion<a class="inpage-nav-anchor" id="inpage-nav-6"></a></h2>

<p>In this part of the tutorial we extended the example from the 
previous part by adding the uniform buffer to a descriptor set. Uniform 
buffers are created as are all other buffers, but with the <code>VK_BUFFER_USAGE_UNIFORM_BUFFER_BIT</code>
 usage specified during their creation. We also allocated dedicated 
memory and bound it to the buffer, and we uploaded projection matrix 
data to the buffer using a staging buffer.</p>

<p>Next, we prepared the descriptor set, starting with creating a 
descriptor set layout with one combined image sampler and one uniform 
buffer. Next, we created a descriptor pool big enough to contain these 
two types of descriptor resources, and we allocated a single descriptor 
set from it. After that, we updated the descriptor set with handles of a
 sampler, an image view of a sampled image, and the buffer created in 
this part of the tutorial.</p>

<p>The rest of the operations were similar to the ones we already know. 
The descriptor set layout was used during pipeline layout creation, 
which was then used when we bound the descriptor sets to a command 
buffer.</p>

<p>We have seen once again how to prepare shader code for both vertex 
and fragment shaders, and we learned how to access different types of 
descriptors provided through different bindings of the same descriptor 
set.</p>

<p>The next parts of the tutorial will be a bit different, as we will 
see and compare different approaches to managing multiple resources and 
handling various, more complicated, tasks.</p>
<p></p>
    </div>
</div>
<div class="clearfix"></div>
<div class="ct-outer-table">
    
</div>
</div>

<div class="idzRelatedContent">












































</div>

<div class="bladepar intelparsys">
</div>


    <div class="hidden">
    <sup>1</sup></div>
    <div class="disclaimer parbase editorial-disclaimer">












    
    
        
        
        
            <div class="disclaimer-component">
                <div class="container">
                    <h4>Product and Performance Information</h4>
                    
                    
                    
                        
                            <div class="disclaimer"><sup>1</sup><p>Intel's
 compilers may or may not optimize to the same degree for non-Intel 
microprocessors for optimizations that are not unique to Intel 
microprocessors. These optimizations include SSE2, SSE3, and SSSE3 
instruction sets and other optimizations. Intel does not guarantee the 
availability, functionality, or effectiveness of any optimization on 
microprocessors not manufactured by Intel. Microprocessor-dependent 
optimizations in this product are intended for use with Intel 
microprocessors. Certain optimizations not specific to Intel 
microarchitecture are reserved for Intel microprocessors. Please refer 
to the applicable product User and Reference Guides for more information
 regarding the specific instruction sets covered by this notice.</p>
<p>Notice revision #20110804</p>
</div>
                        
                    
                    
                </div>
            </div>
        
    

</div>


<div class="idzRateUs parbase">








<div class="rate-us-container">
    <div class="idz-survey">
        <div class="rate-us">
            <section class="blade blade-support-featured-content blade-featured-content solid theme-dark-1 no-print">
                <input type="hidden" id="hostname" value="/feedback/uri">
                <div class="container">
                    <div class="support-options">
                        <div class="blade-support-feedback">
                            <div class="container">
                                <div class="row">
                                    <div class="col-sm-10 rateUs-title text-left">
                                        <figure>
                                            <span class="feedback-icon"></span>
                                        </figure>
                                        <h2>Give Feedback</h2>
                                        <h2 class="feedback-close-btn"></h2>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="clearfix visible-xs space-xs"></div>
                </div>
            </section>
        </div>
        <div class="iframe-survey">
            <div class="iframe-form"><iframe src="https://web.archive.org/web/20200917044701if_/https://intel.az1.qualtrics.com/jfe/form/SV_eai43JosW74IFxz?Q_JFE=qdg" data-ruffle-polyfilled=""></iframe></div>
        </div>
    </div>
</div>
</div>

<script src="API%20Without%20Secrets_%20Introduction%20to%20Vulkan_%20Part%207_files/prism.js"></script>

    
        <div id="contextualFooter-PlaceHolder" class="contextualFooter"></div>
    



































<footer class="global blade solid brand-lighter-gray theme-light-2 component" data-component-id="1" data-component="footer" role="contentinfo" data-wap_type="wa_skip_track" id="skip-footer">
    <div class="container">
        <div class="content-footer">
            <div class="content">
                
                    
                        
                            <ul class="footer-links">
                                
                                    <li>
                                        <a href="https://web.archive.org/web/20200917044701/https://software.intel.com/content/www/us/en/company-overview/company-overview.html">Company Information</a>
                                    </li>
                                
                                    <li>
                                        <a href="https://web.archive.org/web/20200917044701/https://software.intel.com/content/www/us/en/corporate-responsibility/corporate-responsibility.html">Our Commitment</a>
                                    </li>
                                
                                    <li>
                                        <a href="https://web.archive.org/web/20200917044701/https://software.intel.com/content/www/us/en/blogs-communities-social.html">Communities </a>
                                    </li>
                                
                                    <li>
                                        <a href="https://web.archive.org/web/20200917044701/https://www.intc.com/investor-relations/default.aspx">Investor Relations</a>
                                    </li>
                                
                                    <li>
                                        <a href="https://web.archive.org/web/20200917044701/https://software.intel.com/content/www/us/en/company-overview/contact-us.html">Contact Us</a>
                                    </li>
                                
                                    <li>
                                        <a href="https://web.archive.org/web/20200917044701/https://newsroom.intel.com/">Newsroom</a>
                                    </li>
                                
                                    <li>
                                        <a href="https://web.archive.org/web/20200917044701/https://software.intel.com/content/www/us/en/jobs/jobs-at-intel.html"> Jobs</a>
                                    </li>
                                
                            </ul>
                        
                        
                        
                    
                
                    
                        
                        
                            <ul class="footer-links social">
                                
                                    <li>
                                        
                                            
                                            
                                                <a href="https://web.archive.org/web/20200917044701/https://www.facebook.com/Intel" target="" aria-label="Intel on Facebook" data-wap="{&quot;linktype&quot;:&quot;footersocial&quot;}">
                                                    <i aria-hidden="true" class="fa-facebook"></i>
                                                </a>
                                            
                                        
                                    </li>
                                
                                    <li>
                                        
                                            
                                            
                                                <a href="https://web.archive.org/web/20200917044701/https://twitter.com/intel" target="" aria-label="Intel on Twitter" data-wap="{&quot;linktype&quot;:&quot;footersocial&quot;}">
                                                    <i aria-hidden="true" class="fa-twitter"></i>
                                                </a>
                                            
                                        
                                    </li>
                                
                                    <li>
                                        
                                            
                                            
                                                <a href="https://web.archive.org/web/20200917044701/https://www.linkedin.com/company/intel-corporation" target="" aria-label="Intel on LinkedIn" data-wap="{&quot;linktype&quot;:&quot;footersocial&quot;}">
                                                    <i aria-hidden="true" class="fa-linkedin"></i>
                                                </a>
                                            
                                        
                                    </li>
                                
                                    <li>
                                        
                                            
                                            
                                                <a href="https://web.archive.org/web/20200917044701/https://www.youtube.com/user/channelintel?sub_confirmation=1" target="" aria-label="Intel on YouTube" data-wap="{&quot;linktype&quot;:&quot;footersocial&quot;}">
                                                    <i aria-hidden="true" class="fa-youtube"></i>
                                                </a>
                                            
                                        
                                    </li>
                                
                                    <li>
                                        
                                            
                                            
                                                <a href="https://web.archive.org/web/20200917044701/https://www.instagram.com/intel/" target="" aria-label="Intel on Instagram" data-wap="{&quot;linktype&quot;:&quot;footersocial&quot;}">
                                                    <i aria-hidden="true" class="fa-instagram"></i>
                                                </a>
                                            
                                        
                                    </li>
                                
                            </ul>
                        
                        
                    
                
                    
                        
                        
                        
                            <ul class="footer-links secondary-links" id="footerSecondaryLinks">
                                
                                    <li>
                                        
                                            
                                            
                                                <small>© Intel Corporation</small>
                                            
                                        
                                    </li>
                                
                                    <li>
                                        
                                            
                                                <a href="https://web.archive.org/web/20200917044701/https://software.intel.com/content/www/us/en/legal/terms-of-use.html">
                                                    <small>Terms of Use</small>
                                                </a>
                                            
                                            
                                        
                                    </li>
                                
                                    <li>
                                        
                                            
                                                <a href="https://web.archive.org/web/20200917044701/https://software.intel.com/content/www/us/en/legal/trademarks.html">
                                                    <small>*Trademarks</small>
                                                </a>
                                            
                                            
                                        
                                    </li>
                                
                                    <li>
                                        
                                            
                                                <a href="https://web.archive.org/web/20200917044701/https://software.intel.com/content/www/us/en/privacy/intel-privacy-notice.html">
                                                    <small>Privacy</small>
                                                </a>
                                            
                                            
                                        
                                    </li>
                                
                                    <li>
                                        
                                            
                                                <a href="https://web.archive.org/web/20200917044701/https://software.intel.com/content/www/us/en/privacy/intel-cookie-notice.html">
                                                    <small>Cookies</small>
                                                </a>
                                            
                                            
                                        
                                    </li>
                                
                                    <li>
                                        
                                            
                                                <a href="https://web.archive.org/web/20200917044701/https://software.intel.com/content/www/us/en/corporate-responsibility/statement-combating-modern-slavery.html">
                                                    <small>Supply Chain Transparency </small>
                                                </a>
                                            
                                            
                                        
                                    </li>
                                
                                    <li>
                                        
                                            
                                                <a href="https://web.archive.org/web/20200917044701/https://software.intel.com/content/www/us/en/siteindex.html">
                                                    <small>Site Map</small>
                                                </a>
                                            
                                            
                                        
                                    </li>
                                
                            </ul>
                        
                    
                
            </div>
            <div class="logo-container">
                <a href="https://web.archive.org/web/20200917044701/https://software.intel.com/content/www/us/en/homepage.html" class="footer-logo-rebrand" aria-label="Intel Footer Logo" title="Intel Footer Logo">
                    <img src="API%20Without%20Secrets_%20Introduction%20to%20Vulkan_%20Part%207_files/intel-footer-logo.svg" class="footer-logo-rebrand" alt="Intel Footer Logo" title="Intel Footer Logo">
                </a>
            </div>
        </div>
    </div>
</footer>












    <textarea id="defers" title="" style="display:none;">    
        &lt;script&gt;var isTargetEnabled =false;&lt;/script&gt;
        
        
            















    
    
        
        
        
        
        
        
        
    




    
    
        
    




    
    
    
    
        
    

&lt;script type="text/javascript"&gt;
    var cq_tms = {
        wa_emtcontenttype: "emtcontenttype:webpage/article",
        wa_emttechnology: 
"emttechnology:inteltechnologies/intelgraphicsandvisualtechnologies/
virtualrealitypoweredbyinteltechnology,emttechnology:thirdpartytechnologies/
vulkan",
        wa_idzcustomtags: "idzcustomtags:featured",
        wa_emtsubject: 
"emtsubject:itinformationtechnology/visualcomputing/
videogamedevelopment",
        
        wa_industry_type: "",
        wa_partner_prog: "",
        wa_subject: 
"emtsubject:itinformationtechnology/visualcomputing/
videogamedevelopment",
        wa_biz_size: "",
        wa_emt_org: "",
        wa_emt_intel: "",
        wa_partner_type: "",
        wa_programidentifier: "",
        wa_location: "us",
        wa_language: "en",
        wa_english_title: "API Without Secrets: Introduction to Vulkan* 
Part 7",
        wa_content_type: "article",
        wa_intel_platform: "",
        wa_applications: "",
        wa_local: "en_US",
        wa_intel_technology: 
"emttechnology:inteltechnologies/intelgraphicsandvisualtechnologies/
virtualrealitypoweredbyinteltechnology,emttechnology:thirdpartytechnologies/
vulkan",
        wa_system_type: "",
        wa_product_name: "",
        wa_audience: 
"emtaudience:business/btssbusinesstechnologysolutionspecialist/
softwaredeveloper",
        wa_life_cycle: "",
        wa_cq_url: 
"/content/www/us/en/develop/articles/api-without-secrets-introduction-
to-vulkan-part-7.html",
        wa_page_type_micro: "editorialposttemplate",
        wa_env: "prd",
        wa_cq_pub_env: "publish",
        wa_transl_status: "",
        wa_product_id: "",
        wa_software: "",
        wa_reference_design: "",
        wa_codename: "",
        wa_created_date: "1587986579187",
        wa_modifed_date: "1588320190616",
        wa_off_time: "1635753757485",
        wa_ownedby: "",
        wa_managedby: "",
        wa_idz_nid : "758012",
        wa_event_type: "",
        wa_idz_custom_tags: "idzcustomtags:featured",
        wa_programming_language: "",
        wa_skill_level: "",
        wa_solution: "",
        wa_product_formFactor: "",
        wa_operating_system: "",
        wa_marketing_products: "",
        wa_ssg_third_party_prod_sys_sol: "",
        
        wa_secondary_content_type: ""
    };
    
    
    
    cq_tms.wa_tms_sync_load = "deferred";
    
&lt;/script&gt;





    &lt;script type="text/javascript" 
src="/web/20200917044701js_/https://software.intel.com/content/dam/www/
global/wap/tms.sync.js" async&gt;&lt;/script&gt;


        
    
    &lt;link rel="stylesheet" 
href="/web/20200917044701cs_/https://software.intel.com/etc.clientlibs/
settings/wcm/designs/ver/8.0.00.50/intel/clientlibs/pages/commons-
page.min.css" type="text/css"&gt;&lt;script 
src="/web/20200917044701js_/https://software.intel.com/etc.clientlibs/
settings/wcm/designs/ver/8.0.00.50/intel/clientlibs/pages/commons-
page.min.js" defer&gt;&lt;/script&gt;


&lt;script&gt;!function(){var 
e=setInterval(function(){"undefined"!=typeof 
$CQ&amp;&amp;($CQ(function(){CQ_Analytics.SegmentMgr.loadSegments("/etc/
segmentation"),CQ_Analytics.ClientContextUtils.init("/etc/clientcontext/
intel",window.location.pathname.substr(0,window.location.pathname.indexOf(".")))}),clearInterval(e))},100)}
();&lt;/script&gt;










&lt;link rel="stylesheet" type="text/css" 
href="/web/20200917044701cs_/https://software.intel.com/etc.clientlibs/
settings/wcm/designs/intel/us/en/css/resources/css/
intel.rwd.override.css"/&gt;

</textarea>







<deepl-input-controller translate="no"></deepl-input-controller></body></html>
<!--
     FILE ARCHIVED ON 04:47:01 Sep 17, 2020 AND RETRIEVED FROM THE
     INTERNET ARCHIVE ON 21:54:45 Sep 10, 2025.
     JAVASCRIPT APPENDED BY WAYBACK MACHINE, COPYRIGHT INTERNET ARCHIVE.

     ALL OTHER CONTENT MAY ALSO BE PROTECTED BY COPYRIGHT (17 U.S.C.
     SECTION 108(a)(3)).
-->
<!--
playback timings (ms):
  captures_list: 4.735
  exclusion.robots: 0.034
  exclusion.robots.policy: 0.022
  esindex: 0.014
  cdx.remote: 169.388
  LoadShardBlock: 193.746 (3)
  PetaboxLoader3.datanode: 193.57 (4)
  load_resource: 33.123
-->