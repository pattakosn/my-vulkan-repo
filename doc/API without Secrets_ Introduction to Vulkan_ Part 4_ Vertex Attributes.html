<!DOCTYPE html>
<html class="rwd geo-override  vis no-rtl headerfooter-menu3  js flexbox flexboxlegacy canvas canvastext webgl no-touch geolocation postmessage no-websqldatabase indexeddb hashchange history draganddrop websockets rgba hsla multiplebgs backgroundsize borderimage borderradius boxshadow textshadow opacity cssanimations csscolumns cssgradients no-cssreflections csstransforms csstransforms3d csstransitions fontface generatedcontent video audio localstorage sessionstorage webworkers no-applicationcache svg inlinesvg smil svgclippaths" lang="en" style="--wm-toolbar-height: 67px;"><head><script src="API%20without%20Secrets_%20Introduction%20to%20Vulkan_%20Part%204_%20Vertex%20Attributes_files/athena.js" type="text/javascript"></script><link type="text/css" rel="stylesheet" id="dark-mode-custom-link"><link type="text/css" rel="stylesheet" id="dark-mode-general-link"><style lang="en" type="text/css" id="dark-mode-custom-style"></style><style lang="en" type="text/css" id="dark-mode-native-style"></style><style lang="en" type="text/css" id="dark-mode-native-sheet"></style>
<script type="text/javascript">window.addEventListener('DOMContentLoaded',function(){var v=archive_analytics.values;v.service='wb';v.server_name='wwwb-app218.us.archive.org';v.server_ms=410;archive_analytics.send_pageview({});});</script>
<script type="text/javascript" src="API%20without%20Secrets_%20Introduction%20to%20Vulkan_%20Part%204_%20Vertex%20Attributes_files/bundle-playback.js" charset="utf-8"></script>
<script type="text/javascript" src="API%20without%20Secrets_%20Introduction%20to%20Vulkan_%20Part%204_%20Vertex%20Attributes_files/wombat.js" charset="utf-8"></script>
<script>window.RufflePlayer=window.RufflePlayer||{};window.RufflePlayer.config={"autoplay":"on","unmuteOverlay":"hidden","showSwfDownload":true};</script>
<script type="text/javascript" src="API%20without%20Secrets_%20Introduction%20to%20Vulkan_%20Part%204_%20Vertex%20Attributes_files/ruffle.js"></script>
<script type="text/javascript">
    __wm.init("https://web.archive.org/web");
  __wm.wombat("https://software.intel.com/content/www/us/en/develop/articles/api-without-secrets-introduction-to-vulkan-part-4.html","20200917044551","https://web.archive.org/","web","https://web-static.archive.org/_static/",
	      "1600317951");
</script>
<link rel="stylesheet" type="text/css" href="API%20without%20Secrets_%20Introduction%20to%20Vulkan_%20Part%204_%20Vertex%20Attributes_files/banner-styles.css">
<link rel="stylesheet" type="text/css" href="API%20without%20Secrets_%20Introduction%20to%20Vulkan_%20Part%204_%20Vertex%20Attributes_files/iconochive.css">
<!-- End Wayback Rewrite JS Include -->

    <meta charset="UTF-8">
    





<title>API without Secrets: Introduction to Vulkan* Part 4: Vertex Attributes</title>
    








    <script type="text/javascript" src="API%20without%20Secrets_%20Introduction%20to%20Vulkan_%20Part%204_%20Vertex%20Attributes_files/performance-config.js"></script>

<link rel="preconnect" href="https://web.archive.org/web/20200917044551/https://dpm.demdex.net/" crossorigin="">
<link rel="dns-prefetch" href="https://web.archive.org/web/20200917044551/https://dpm.demdex.net/">
<link rel="preconnect" href="https://web.archive.org/web/20200917044551/https://starget.intel.com/">
<link rel="dns-prefetch" href="https://web.archive.org/web/20200917044551/https://starget.intel.com/">
<link rel="preconnect" href="https://web.archive.org/web/20200917044551/https://a.idio.co/" crossorigin="">
<link rel="dns-prefetch" href="https://web.archive.org/web/20200917044551/https://a.idio.co/">
<link rel="preconnect" href="https://web.archive.org/web/20200917044551/https://s334284386.t.eloqua.com/">
<link rel="dns-prefetch" href="https://web.archive.org/web/20200917044551/https://s334284386.t.eloqua.com/">
<link rel="dns-prefetch" href="https://web.archive.org/web/20200917044551/https://onsite2.researchintel.com/">
<link rel="preconnect" href="https://web.archive.org/web/20200917044551/https://tags.tiqcdn.com/" crossorigin="">
<link rel="dns-prefetch" href="https://web.archive.org/web/20200917044551/https://tags.tiqcdn.com/">
<link rel="preconnect" href="https://web.archive.org/web/20200917044551/https://www91.intel.com/">
<link rel="dns-prefetch" href="https://web.archive.org/web/20200917044551/https://www91.intel.com/">

    














<meta http-equiv="X-UA-Compatible" content="IE=Edge">
<!--[if lte IE 9]>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<![endif]-->


    <meta name="keywords" content="Game Dev,Tutorial,Code Sample,Rendering,Graphics,Game Development,">

    <meta name="description" content="Learn how to add vertex attributes to a graphics pipeline, create buffers, reorganize rendering code, and more in this Vulkan* tutorial.">

    <meta name="language" content="en">

    <meta name="location" content="us">

    <meta name="robots" content="follow,index,noarchive">

    <meta name="X-Server" content="INTE-T1">


    <meta property="og:image" content="https://web.archive.org/web/20200917044551im_/https://www.intel.com/content/dam/develop/external/us/en/images/vulkan-part-4-image-01-result-of-rendering-667842.png">

    <meta property="og:type" content="company">

    <meta property="og:site_name" content="Intel">

    <meta property="og:title" content="API without Secrets: Introduction to Vulkan* Part 4: Vertex Attributes">

    <meta property="fb:admins" content="267985180046218">

    <meta property="og:url" content="https://web.archive.org/web/20200917044551/https://www.intel.com/content/www/us/en/develop/articles/api-without-secrets-introduction-to-vulkan-part-4.html">

    <meta property="og:description" content="Learn how to add vertex attributes to a graphics pipeline, create buffers, reorganize rendering code, and more in this Vulkan* tutorial.">

<meta http-equiv="content-type" content="text/html; charset=UTF-8">

    <meta name="emtcontenttype" content="Content Type|Web Pages|Articles;Content Type|Software and Drivers|Source Code|Code Samples;Content Type|Training|Tutorials;">

    <meta name="contentpath" content="/content/www/us/en/develop/articles/api-without-secrets-introduction-to-vulkan-part-4">

    <meta name="authoreddate" content="2016-07-14T13:41:01.000-07:00">

    <meta name="emttechnology" content="Technology|Third-Party Technologies|OpenGL*;Technology|Third-Party Technologies|Vulkan*;Technology|Intel® Technologies|Intel® Graphics and Visual Technologies;">

    <meta name="localecode" content="en_US">

    <meta name="mime" content="text/html">

    <meta name="format" content="editorialpost">

    <meta name="operatingsystem" content="Operating System|Linux*;Operating System|Microsoft Windows*;">

    <meta name="excludefromviews" content="false">

    <meta name="taxonomy" content="etm-4e3b51bdc1f84c06a3c0ec85a7c56bd3;etm-0d937c50068349bfa1e24d64b9a17db7;etm-cf0ee1fba3374ceea048ddac3e923cab;etm-d23b81f1319b4f0bb8ec859bcc84e2b9;etm-bb549706759c48978caa853f3b3224f4;etm-666e8e040da343a588faa76a1dda2ae4;etm-e9ad772b023840f09a3bb94d6251ea2c;etm-1b1627b1502a4090908800edf123071c;etm-678e0660d7864aa29cadc065a34d8ec9;etm-be3c44059a5444be8cf9042ba85252ea;etm-bc7a5787fc704f86ac1cfec692ad5c5f;etm-8f11476223194fa68d9e0bad77696e2f;etm-08ad0fd40b054d9b8efc6915d6f5f551;etm-353e88e31003471096cda41fbe308605;">

    <meta name="title" content="API without Secrets: Introduction to Vulkan* Part 4: Vertex Attributes">

    <meta name="menu" content="Game Development">

    <meta name="programminglanguage" content="Programming Language|C/C++;">

    <meta name="idzcustomtags" content="IDZ Custom Tags|gameteam;">

    <meta name="emtsubject" content="Subject|Information Technology (IT)|Visual Computing|Video Game Development;Subject|Information Technology (IT)|Visual Computing|Rendering;">

    <meta name="reimaginefilters" content="Technology|Third-Party Technologies|OpenGL*;Technology|Third-Party Technologies|Vulkan*;Operating System|Linux*;Operating System|Microsoft Windows*;ARK Products|Processors|Intel® Core™ Processors;IDZ Custom Tags|gameteam;Programming Language|C/C++;Subject|Information Technology (IT)|Visual Computing|Video Game Development;Technology|Intel® Technologies|Intel® Graphics and Visual Technologies;Subject|Information Technology (IT)|Visual Computing|Rendering;Content Type|Software and Drivers|Source Code|Code Samples;Content Type|Training|Tutorials;Skill Level|Beginner;Skill Level|Intermediate;">

    <meta name="generic1" content="true">

    <meta name="skilllevel" content="Skill Level|Beginner;Skill Level|Intermediate;">

    <meta name="emtaudience" content="Audience|Business|Business Technology Solution Specialist (BTSS)|Software Developer;">

    <meta name="intelkeywords" content="Game Dev,Tutorial,Code Sample,Rendering,Graphics,Game Development,">

    <meta name="lastModifieddate" content="2016-07-14T00:00:00.000-07:00">

    <meta name="arkproducts" content="ARK Products|Processors|Intel® Core™ Processors;">

    <meta name="thumbnailurl" content="https://software.intel.com/content/dam/develop/external/us/en/images/vulkan-part-4-image-01-result-of-rendering-667842.png">


    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    





<link rel="icon" type="image/png" sizes="32x32" href="https://web.archive.org/web/20200917044551im_/https://software.intel.com/etc.clientlibs/settings/wcm/designs/intel/default/resources/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="https://web.archive.org/web/20200917044551im_/https://software.intel.com/etc.clientlibs/settings/wcm/designs/intel/default/resources/favicon-16x16.png">
<link rel="shortcut icon" href="https://web.archive.org/web/20200917044551im_/https://software.intel.com/etc.clientlibs/settings/wcm/designs/intel/default/resources/favicon.ico">
    





<link rel="canonical" href="https://web.archive.org/web/20200917044551/https://software.intel.com/content/www/us/en/develop/articles/api-without-secrets-introduction-to-vulkan-part-4.html">
    

    <style>@-ms-viewport{width:device-width;}</style>
    
        
        
            
                
                
                    <link rel="stylesheet" href="API%20without%20Secrets_%20Introduction%20to%20Vulkan_%20Part%204_%20Vertex%20Attributes_files/intc-core.min.css" type="text/css"><script src="API%20without%20Secrets_%20Introduction%20to%20Vulkan_%20Part%204_%20Vertex%20Attributes_files/intc-core.min.js" defer="defer"></script>
                    
                
            
        
    
<script src="API%20without%20Secrets_%20Introduction%20to%20Vulkan_%20Part%204_%20Vertex%20Attributes_files/clipboard.min.js"></script><style>:is([id*='google_ads_iframe'],[id*='taboola-'],.taboolaHeight,.taboola-placeholder,#top-ad,#credential_picker_container,#credentials-picker-container,#credential_picker_iframe,[id*='google-one-tap-iframe'],#google-one-tap-popup-container,.google-one-tap__module,.google-one-tap-modal-div,#amp_floatingAdDiv,#ez-content-blocker-container) {display:none!important;min-height:0!important;height:0!important;}</style><script>var isTargetEnabled =false;</script><script>var _____WB$wombat$assign$function_____ = function(name) {return (self._wb_wombat && self._wb_wombat.local_init && self._wb_wombat.local_init(name)) || self[name]; };
if (!self.__WB_pmw) { self.__WB_pmw = function(obj) { this.__WB_source = obj; return this; } }
{
let window = _____WB$wombat$assign$function_____("window");
let globalThis = _____WB$wombat$assign$function_____("globalThis");
let self = _____WB$wombat$assign$function_____("self");
let document = _____WB$wombat$assign$function_____("document");
let location = _____WB$wombat$assign$function_____("location");
let top = _____WB$wombat$assign$function_____("top");
let parent = _____WB$wombat$assign$function_____("parent");
let frames = _____WB$wombat$assign$function_____("frames");
let opener = _____WB$wombat$assign$function_____("opener");
{
var cq_tms = {
        wa_emtcontenttype: "emtcontenttype:webpage/article,emtcontenttype:softwareordriver/sourcecode/codesample,emtcontenttype:training/tutorial",
        wa_emtprogramminglanguage: "emtprogramminglanguage:cc",
        wa_emttechnology: "emttechnology:thirdpartytechnologies/opengl,emttechnology:inteltechnologies/intelgraphicsandvisualtechnologies,emttechnology:thirdpartytechnologies/vulkan",
        wa_emtoperatingsystem: "emtoperatingsystem:linux,emtoperatingsystem:microsoftwindows",
        wa_emtskilllevel: "emtskilllevel:intermediate,emtskilllevel:beginner",
        wa_arkproducts: "arkproducts:processors/intelcoreprocessors",
        wa_idzcustomtags: "idzcustomtags:gameteam",
        wa_emtsubject: "emtsubject:itinformationtechnology/visualcomputing/rendering,emtsubject:itinformationtechnology/visualcomputing/videogamedevelopment",
        
        wa_industry_type: "",
        wa_partner_prog: "",
        wa_subject: "emtsubject:itinformationtechnology/visualcomputing/rendering,emtsubject:itinformationtechnology/visualcomputing/videogamedevelopment",
        wa_biz_size: "",
        wa_emt_org: "",
        wa_emt_intel: "",
        wa_partner_type: "",
        wa_programidentifier: "",
        wa_location: "us",
        wa_language: "en",
        wa_english_title: "API without Secrets: Introduction to Vulkan* Part 4: Vertex Attributes",
        wa_content_type: "article",
        wa_intel_platform: "",
        wa_applications: "",
        wa_local: "en_US",
        wa_intel_technology: "emttechnology:inteltechnologies/intelgraphicsandvisualtechnologies,emttechnology:thirdpartytechnologies/opengl,emttechnology:thirdpartytechnologies/vulkan",
        wa_system_type: "",
        wa_product_name: "",
        wa_audience: "emtaudience:business/btssbusinesstechnologysolutionspecialist/softwaredeveloper",
        wa_life_cycle: "",
        wa_cq_url: "/content/www/us/en/develop/articles/api-without-secrets-introduction-to-vulkan-part-4.html",
        wa_page_type_micro: "editorialposttemplate",
        wa_env: "prd",
        wa_cq_pub_env: "publish",
        wa_transl_status: "",
        wa_product_id: "122139",
        wa_software: "",
        wa_reference_design: "",
        wa_codename: "",
        wa_created_date: "1587990244251",
        wa_modifed_date: "1586858543936",
        wa_off_time: "1633961562332",
        wa_ownedby: "",
        wa_managedby: "",
        wa_idz_nid : "667842",
        wa_event_type: "",
        wa_idz_custom_tags: "idzcustomtags:gameteam",
        wa_programming_language: "emtprogramminglanguage:cc",
        wa_skill_level: "emtskilllevel:beginner,emtskilllevel:intermediate",
        wa_solution: "",
        wa_product_formFactor: "",
        wa_operating_system: "emtoperatingsystem:linux,emtoperatingsystem:microsoftwindows",
        wa_marketing_products: "arkproducts:processors/intelcoreprocessors",
        wa_ssg_third_party_prod_sys_sol: "",
        
        wa_secondary_content_type: "emtcontenttype:softwareordriver/sourcecode/codesample,emtcontenttype:training/tutorial"
    };
    
    
    
    cq_tms.wa_tms_sync_load = "deferred";

}}</script><script>var _____WB$wombat$assign$function_____ = function(name) {return (self._wb_wombat && self._wb_wombat.local_init && self._wb_wombat.local_init(name)) || self[name]; };
if (!self.__WB_pmw) { self.__WB_pmw = function(obj) { this.__WB_source = obj; return this; } }
{
let window = _____WB$wombat$assign$function_____("window");
let globalThis = _____WB$wombat$assign$function_____("globalThis");
let self = _____WB$wombat$assign$function_____("self");
let document = _____WB$wombat$assign$function_____("document");
let location = _____WB$wombat$assign$function_____("location");
let top = _____WB$wombat$assign$function_____("top");
let parent = _____WB$wombat$assign$function_____("parent");
let frames = _____WB$wombat$assign$function_____("frames");
let opener = _____WB$wombat$assign$function_____("opener");
{
!function(){var e=setInterval(function(){"undefined"!=typeof $CQ&&($CQ(function(){CQ_Analytics.SegmentMgr.loadSegments("/etc/segmentation"),CQ_Analytics.ClientContextUtils.init("/etc/clientcontext/intel",window.location.pathname.substr(0,window.location.pathname.indexOf(".")))}),clearInterval(e))},100)}();

}}</script><link rel="stylesheet" type="text/css" href="API%20without%20Secrets_%20Introduction%20to%20Vulkan_%20Part%204_%20Vertex%20Attributes_files/commons-page.min.css"><link rel="stylesheet" type="text/css" href="API%20without%20Secrets_%20Introduction%20to%20Vulkan_%20Part%204_%20Vertex%20Attributes_files/intel.rwd.override.css"></head>



















    



    




<body class="page-is-published simplified-header"><!-- BEGIN WAYBACK TOOLBAR INSERT -->
<script>__wm.rw(0);</script>
<div id="wm-ipp-base" lang="en" style="display: block; direction: ltr; height: 67px;" toolbar-mode="auto">
</div><div id="wm-ipp-print">The Wayback Machine - 
https://web.archive.org/web/20200917044551/https://software.intel.com/
content/www/us/en/develop/articles/api-without-secrets-introduction-to-
vulkan-part-4.html</div>
<script type="text/javascript">//<![CDATA[
__wm.bt(750,27,25,2,"web","https://software.intel.com/content/www/us/en/develop/articles/api-without-secrets-introduction-to-vulkan-part-4.html","20200917044551",1996,"https://web-static.archive.org/_static/",["https://web-static.archive.org/_static/css/banner-styles.css?v=p7PEIJWi","https://web-static.archive.org/_static/css/iconochive.css?v=3PDvdIFv"], false);
  __wm.rw(1);
//]]></script>
<!-- END WAYBACK TOOLBAR INSERT -->
 

<div class="promo-banner-content"></div>

























<script>
    var isLoggedin = (location.protocol == 'https:' && document.cookie.indexOf('SMSESSION') != -1);
    var loginValidateURL = 'https://web.archive.org/web/20200917044551/https://www.intel.com/libs/apps/intel/myintel/profile.html/validate/loggedin';
</script>




    
    
        
        
            



























    
    
        
    



    
    
        <div class="header-simplify component" data-component="header" data-component-id="1">
            <header role="banner">
                <span visibility="hidden"></span>
                <div class="site-mask" data-igm-site-mask=""></div>
                <nav class="global-menu-simplify navbar-fixed-top " role="navigation" aria-label="Site" data-igm="">
                    <div class="container main-navbar">
                        <div class="row">
                            <div class="nav-left col-xs-5 mobileFirst">
                                <div class="content">
                                    <button class="hamburger icon hidden-md hidden-lg hidden-xl" data-toggle="mega-menu" data-target="#menu-products"><span class="fa-menu"></span>
                                    </button>
                                    <ul class="hidden-xs hidden-sm">
                                        
                                            <li>
                                                <button data-toggle="mega-menu" data-target="#menu-0">Products</button>
                                            </li>
                                        
                                            <li>
                                                <button data-toggle="mega-menu" data-target="#menu-1">Support</button>
                                            </li>
                                        
                                            <li>
                                                <button data-toggle="mega-menu" data-target="#menu-2">Solutions</button>
                                            </li>
                                        
                                    </ul>
                                </div>
                            </div>

                            <div class="nav-center col-xs-2">
                                <div class="content">
                                    <a href="https://web.archive.org/web/20200917044551/https://software.intel.com/content/www/us/en/homepage.html" alt="Intel homepage" class="navbar-logo" title="Intel Logo"></a>
                                </div>
                            </div>

                            <div class="nav-right col-xs-5">
                                <div class="content">
                                    
                                        <button type="button" class="language-selector-toggle mobileFirst" aria-label="USA (English)" data-igm-search-toggle="">
                                    <span class="hidden-xs" aria-hidden="true">
                                        USA (English)
                                    </span>
                                            <span class="icon fa-globe align-icons"></span>
                                        </button>
                                    

                                    <span class="states-login">
                            <span class="state-logged-in state-option">
                            <span class="option-links" id="myprofile-signin-menu"></span>

                            </span>
                                    </span>
                                    <button class="login login-toggle item icon mobileFirst" aria-label="Sign In" data-igm-search-toggle="">
                                <span class="login-label" aria-hidden="true"> Sign In </span><span class="icon-login align-icons fa-"></span></button>
                                    
                                <span role="search">
                                    <button type="button" title="Search" class="search-button icon mobileFirst" data-igm-search-toggle=""><span class="fa-search" id="newsearch"></span></button>
                                </span>
                                    
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="uheadersearch homepagesearch">
























    










    















    
    
    
        
    


    <div id="simplify-search" class="search-content brand-darkest-gray theme-dark-1 component mobileFirst" data-component="homepagesearch" data-igm-search-content="" data-component-id="1">
        <div class="wrapper-outer-sticky-footer">
            <div class="wrapper-sticky-footer">
                <div class="slide-search-results">
                    <form class="search item" data-igm-search-control="" name="hpsform-new" id="hpsform-new" action="/web/20200917044551/https://software.intel.com/content/www/us/en/search.html" onsubmit="return INTEL_TYPE_AHEAD.onSubmitHps('Search', '/content/www/us/en', 'en_US')">
                        <button type="submit" class="search-button icon" aria-label="Search" data-tabindex="2"><span class="fa-search"></span></button>
                        
                            
                            
                                <label for="mobile-search">
                                    <input id="toplevelcategory" name="toplevelcategory" type="hidden" value="none">
                                    <input id="query" name="query" type="hidden" value="">
                                    <input data-tabindex="1" data-search-input="" id="mobile-search" name="keyword" type="text" data-igm-search-input="" title="Search" autocomplete="off" placeholder="Search Intel.com">
                                </label>
                            
                        
                        <button id="header-btn-clear" type="clear" class="search-clear" data-igm-search-clear="">
                            <span></span></button>
                        <button type="button" id="cls-btn" class="close icon" aria-label="Close" data-igm-search-toggle="" data-tabindex="3"><span></span></button>
                    </form>
                    <div class="search-quick-links hidden" data-component="wa_skip_track" data-component-id="1">
                        <div class="overlay-content quick-links-terms">
                            <h3>Quick Links</h3>
                            <p>Try these quick links to visit popular site sections</p>
                            <ul>
                                <li>
                                    <a class="quick-link" rel="noopener noreferrer" href="https://web.archive.org/web/20200917044551/https://downloadcenter.intel.com/?wapkw=quicklink:download-center">
                                        Download Center
                                    </a>
                                </li>
                                <li>
                                    <a class="quick-link" rel="noopener noreferrer" href="https://web.archive.org/web/20200917044551/https://ark.intel.com/?wapkw=quicklink:product-specifications">
                                        Product Specifications
                                    </a>
                                </li>
                                <li>
                                    <a class="quick-link" rel="noopener noreferrer" href="https://web.archive.org/web/20200917044551/https://www.intel.com/content/www/us/en/products/devices-systems.html?wapkw=quicklink:products">
                                        Products
                                    </a>
                                </li>
                                <li><a class="quick-link" rel="noopener noreferrer" href="https://web.archive.org/web/20200917044551/https://www.intel.com/content/www/us/en/support.html?wapkw=quicklink:support">
                                    Support
                                </a>
                                </li>
                            </ul>
                        </div>
                    </div>
                    <div class="results-overlay results-recent results component" data-component="wa_skip_track" data-component-id="1">
                        <div class="overlay-content recent-searches-terms">
                            <h3>Recent Searches</h3>
                        </div>
                    </div>
                </div>
                <div class="slide-language-selector">
                    <div class="modal-intel language-selector modal-expose-menu" id="modal-language-selector">
                    </div>
                    













<script type="text/javascript">
    var languageslectorexists = false;
</script>

    <script type="text/javascript">
        languageslectorexists = true;

    </script>
    <!-- MODAL for Language selector -->
    <script id="gls-template" type="text/x-handlebars-template">
        <div class="language-selector-block">
            <div class="modal-content flyout-panel-block force-background" role="dialog"
                 aria-labelledby="regionselector" aria-describedby="selectregion">
                <div class="modal-header flyout-panel-block-header">
                        
                    <h2 class="modal-title" id="Region-Modal">
                        <span class="icon fa-globe align-icons"></span>
                        Select Your Region
                        <div id="close_button" class="modal-footer flyout-panel-block-header">
                            <button type="button" class="close icon" aria-label="Close" data-igm-search-toggle="">
                                <span></span>
                            </button>
                        </div>
                    </h2>
                </div>
                <div class="modal-body lang-selector-body">
                    <div class="flyout-control-panel">
                        <ul class="list-unstyled flyout-control-listing" id="language-accordion">

                            {{#if alsoAvail}}
                            <div class="col-xs-12 lang-selector">
                                <h4 class="accordion-toggle fa- expanded" data-toggle="collapse"
                                    data-parent="#language-accordion"
                                    data-target="#header-translations">
                                    {{localeTitle}}</h4>
                            </div>
                            {{#each sections}}
                            <div id="header-translations" class="accordion-panel in">
                                {{#each locale}}
                                {{regionNames languageList @index countryName}}
                                {{/each}}
                            </div>
                            {{/each}}
                            {{/if}}

                            <div class="col-xs-12 lang-selector">
                                <h4 class="accordion-toggle fa- {{#if alsoAvail}}collapsed{{else}}expanded{{/if}}"
                                    data-toggle="collapse"
                                    data-parent="#language-accordion"
                                    data-target="#home-redirects">
                                    {{homepageTitle}}</h4>
                            </div>
                            {{#each sections}}
                            <div id="home-redirects"
                                 class="accordion-panel {{#if ../alsoAvail}}collapse{{else}}in{{/if}}">
                                {{#each locale}}
                                <li>
                                    <a href="#homepage-{{@index}}" data-toggle="flyout" class="flyout-control">{{{countryName}}}<span
                                            class="icon-caret fa-angle-right"></span></a>
                                </li>
                                {{/each}}
                            </div>
                            {{/each}}

                        </ul>
                        {{#each sections}}
                        {{#each locale}}
                        {{storeIndex @index}}

                        <div class="flyout-panel flyout-panel-position-right flyout-panel-closed force-background"
                             id="geo-{{getIndex}}">
                            <div class="flyout-panel-inner">
                                <div class="flyout-panel-header">
                                    <a href="#" class="close-flyout back-link pull-left"><span
                                            class="icon-back fa-angle-left"></span>
                                        back</a>
                                </div>
                                <div class="flyout-panel-body">
                                    <div class="igm-text-listing">
                                        <div class="pad-btm-10">
                                            <ul class="list-unstyled">
                                                {{#each languageList}}
                                                {{#if localelink}}
                                                <li class="lang-option"><a
                                                        data-locale="{{{language}}}_{{{locale}}}"
                                                        href={{{localelink}}}>{{countryLanguageLabel label language}}</a>
                                                </li>
                                                {{/if}}
                                                {{/each}}
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        {{/each}}
                        {{/each}}

                        {{#each sections}}
                        {{#each locale}}
                        {{#if languageList}}
                        <div class="flyout-panel flyout-panel-position-right flyout-panel-closed force-background"
                             id="homepage-{{@index}}">
                            <div class="flyout-panel-inner">
                                <div class="flyout-panel-header">
                                    <a href="#" class="close-flyout back-link pull-left"><span
                                            class="icon-back fa-angle-left"></span>back</a>
                                </div>
                                <div class="flyout-panel-body">
                                    <div class="igm-text-listing">
                                        <div class="pad-btm-10">
                                            <ul class="list-unstyled">
                                                {{#each languageList}}
                                                {{#if_ne language 'en'
                                                locale 'us' }}
                                                <li class="lang-option"><a
                                                        data-locale="{{{language}}}_{{{locale}}}"
                                                        href={{{homepagelink}}}>{{countryLanguageLabel label language}}</a>
                                                </li>
                                                {{/if_ne}}
                                                {{/each}}
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        {{/if}}
                        {{/each}}
                        {{/each}}

                    </div>
                </div>
            </div>
        </div>
    </script>

    <script type="text/javascript">
        var langSelectData = {"alsoAvail":true,"mobileHomepageTitle":"Find your Country's/Region's Homepage","mobileSelectTitle":"Select a Country/Region","mobileAvailableTitle":"Page Available In","sections":[{"locale":[{"countryName":"Asia Pacific","languageList":[{"homepagelink":"https://web.archive.org/web/20200917044551/https://www.intel.sg/content/www/xa/en/homepage.html","localelink":"","label":"Asia Pacific (English)","locale":"xa","language":"en"},{"homepagelink":"https://web.archive.org/web/20200917044551/https://www.intel.com.au/content/www/au/en/homepage.html","localelink":"","label":"Australia (English)","locale":"au","language":"en"},{"homepagelink":"https://web.archive.org/web/20200917044551/https://www.intel.cn/content/www/cn/zh/homepage.html","localelink":"https://web.archive.org/web/20200917044551/https://www.intel.cn/content/www/cn/zh/develop/articles/api-without-secrets-introduction-to-vulkan-part-4.html","label":"China (简体中文)","locale":"cn","language":"zh"},{"homepagelink":"https://web.archive.org/web/20200917044551/https://www.intel.in/content/www/in/en/homepage.html","localelink":"","label":"India (English)","locale":"in","language":"en"},{"homepagelink":"https://web.archive.org/web/20200917044551/https://www.intel.co.id/content/www/id/id/homepage.html","localelink":"","label":"Indonesia (Bahasa Indonesia)","locale":"id","language":"id"},{"homepagelink":"https://web.archive.org/web/20200917044551/https://www.intel.co.jp/content/www/jp/ja/homepage.html","localelink":"","label":"Japan (日本語)","locale":"jp","language":"ja"},{"homepagelink":"https://web.archive.org/web/20200917044551/https://www.intel.co.kr/content/www/kr/ko/homepage.html","localelink":"","label":"Korea (한국어)","locale":"kr","language":"ko"},{"homepagelink":"https://web.archive.org/web/20200917044551/https://www.intel.com.tw/content/www/tw/zh/homepage.html","localelink":"","label":"Taiwan (繁體中文)","locale":"tw","language":"zh"},{"homepagelink":"https://web.archive.org/web/20200917044551/https://www.thailand.intel.com/content/www/th/th/homepage.html","localelink":"","label":"Thailand (ไทย)","locale":"th","language":"th"},{"homepagelink":"https://web.archive.org/web/20200917044551/https://www.intel.vn/content/www/vn/vi/homepage.html","localelink":"","label":"Vietnam (Tiếng Việt)","locale":"vn","language":"vi"}]},{"countryName":"Europe","languageList":[{"homepagelink":"https://web.archive.org/web/20200917044551/https://www.intel.fr/content/www/fr/fr/homepage.html","localelink":"","label":"France (Français)","locale":"fr","language":"fr"},{"homepagelink":"https://web.archive.org/web/20200917044551/https://www.intel.de/content/www/de/de/homepage.html","localelink":"","label":"Germany (Deutsch)","locale":"de","language":"de"},{"homepagelink":"https://web.archive.org/web/20200917044551/https://www.intel.ie/content/www/ie/en/homepage.html","localelink":"","label":"Ireland (English)","locale":"ie","language":"en"},{"homepagelink":"https://web.archive.org/web/20200917044551/https://www.intel.it/content/www/it/it/homepage.html","localelink":"","label":"Italy (Italiano)","locale":"it","language":"it"},{"homepagelink":"https://web.archive.org/web/20200917044551/https://www.intel.pl/content/www/pl/pl/homepage.html","localelink":"","label":"Poland (Polski)","locale":"pl","language":"pl"},{"homepagelink":"https://web.archive.org/web/20200917044551/https://www.intel.ru/content/www/ru/ru/homepage.html","localelink":"https://web.archive.org/web/20200917044551/https://www.intel.ru/content/www/ru/ru/develop/articles/api-without-secrets-introduction-to-vulkan-part-4.html","label":"Russia (Русский)","locale":"ru","language":"ru"},{"homepagelink":"https://web.archive.org/web/20200917044551/https://www.intel.es/content/www/es/es/homepage.html","localelink":"","label":"Spain (Español)","locale":"es","language":"es"},{"homepagelink":"https://web.archive.org/web/20200917044551/https://www.intel.com.tr/content/www/tr/tr/homepage.html","localelink":"","label":"Turkey (Türkçe)","locale":"tr","language":"tr"},{"homepagelink":"https://web.archive.org/web/20200917044551/https://www.intel.co.uk/content/www/uk/en/homepage.html","localelink":"","label":"United Kingdom (English)","locale":"uk","language":"en"}]},{"countryName":"Latin America","languageList":[{"homepagelink":"https://web.archive.org/web/20200917044551/https://www.intel.la/content/www/xl/es/homepage.html","localelink":"https://web.archive.org/web/20200917044551/https://www.intel.la/content/www/xl/es/develop/articles/api-without-secrets-introduction-to-vulkan-part-4.html","label":"Argentina (Español)","locale":"xl","language":"es"},{"homepagelink":"https://web.archive.org/web/20200917044551/https://www.intel.com.br/content/www/br/pt/homepage.html","localelink":"https://web.archive.org/web/20200917044551/https://www.intel.com.br/content/www/br/pt/develop/articles/api-without-secrets-introduction-to-vulkan-part-4.html","label":"Brazil (Português)","locale":"br","language":"pt"},{"homepagelink":"https://web.archive.org/web/20200917044551/https://www.intel.la/content/www/xl/es/homepage.html","localelink":"https://web.archive.org/web/20200917044551/https://www.intel.la/content/www/xl/es/develop/articles/api-without-secrets-introduction-to-vulkan-part-4.html","label":"Chile (Español)","locale":"xl","language":"es"},{"homepagelink":"https://web.archive.org/web/20200917044551/https://www.intel.la/content/www/xl/es/homepage.html","localelink":"https://web.archive.org/web/20200917044551/https://www.intel.la/content/www/xl/es/develop/articles/api-without-secrets-introduction-to-vulkan-part-4.html","label":"Colombia (Español)","locale":"xl","language":"es"},{"homepagelink":"https://web.archive.org/web/20200917044551/https://www.intel.la/content/www/xl/es/homepage.html","localelink":"https://web.archive.org/web/20200917044551/https://www.intel.la/content/www/xl/es/develop/articles/api-without-secrets-introduction-to-vulkan-part-4.html","label":"Latin America (Español)","locale":"xl","language":"es"},{"homepagelink":"https://web.archive.org/web/20200917044551/https://www.intel.la/content/www/xl/es/homepage.html","localelink":"https://web.archive.org/web/20200917044551/https://www.intel.la/content/www/xl/es/develop/articles/api-without-secrets-introduction-to-vulkan-part-4.html","label":"Mexico (Español)","locale":"xl","language":"es"},{"homepagelink":"https://web.archive.org/web/20200917044551/https://www.intel.la/content/www/xl/es/homepage.html","localelink":"https://web.archive.org/web/20200917044551/https://www.intel.la/content/www/xl/es/develop/articles/api-without-secrets-introduction-to-vulkan-part-4.html","label":"Peru (Español)","locale":"xl","language":"es"}]},{"countryName":"Middle East/Africa","languageList":[{"homepagelink":"https://web.archive.org/web/20200917044551/https://www.intel.co.il/content/www/il/he/homepage.html","localelink":"","label":"Israel (עברית)","locale":"il","language":"he"}]},{"countryName":"North America","languageList":[{"homepagelink":"https://web.archive.org/web/20200917044551/https://www.intel.com/content/www/us/en/homepage.html","localelink":"","label":"United States (English)","locale":"us","language":"en"},{"homepagelink":"https://web.archive.org/web/20200917044551/https://www.intel.ca/content/www/ca/en/homepage.html","localelink":"","label":"Canada (English)","locale":"ca","language":"en"},{"homepagelink":"https://web.archive.org/web/20200917044551/https://www.intel.ca/content/www/ca/fr/homepage.html","localelink":"","label":"Canada (Français)","locale":"ca","language":"fr"}]}]}],"homepageTitle":"Go to your Country's/Region's Homepage","localeTitle":"This page is also available in"};
    </script>


                </div>
                <div class="slide-signin">
                    





































    
    
        
        
        
    




<div class="modal-intel modal-signin" id="modal-signin-form" aria-labelledby="Signin">
    <div class="slide-signin-block" data-component="signincomponent" data-component-id="1">
        <div class="modal-header">
            <button type="button" class="close icon theme-white" data-igm-search-toggle="" aria-label="Close">
                <span></span></button>
            <h2 class="modal-title" id="Signin"><span class="icon-login align-icons fa-"></span>Sign In</h2>
        </div>

        <div class="modal-body">
            <div class="alert alert-danger" id="login-error" role="alert"></div>
            <form id="igm-form-signin" action="https://web.archive.org/web/20200917044551/https://www.intel.com/libs/apps/intel/login.json/securitytoken" method="POST" name="igm-form-signin" class="igm-form-signin intel-form" novalidate="">
                <div class="form-group">
                    <label for="username">
                        <input class="form-control form-input" aria-describedby="uname-error" name="userid" id="username" placeholder="Username" required="">
                    </label>
                    <div class="error validation-messages" id="uname-error">
                        <div class="rule broken">Your username is missing</div>
                    </div>
                </div>
                <div class="form-group">
                    <label for="password">
                        <input type="password" class="form-control form-input" aria-describedby="pwd-error" id="password" name="password" placeholder="Password" required="" autocomplete="off">
                    </label>
                    <div class="error validation-messages" id="pwd-error">
                        <div class="rule broken">Your password is missing</div>
                    </div>
                </div>
                <p>By signing in, you agree to our <a href="https://web.archive.org/web/20200917044551/https://software.intel.com/content/www/us/en/legal/terms-of-use.html">Terms of Service</a>.</p>
                <div class="row">
                    <div class="col-xs-12">
                        <input type="hidden" name="callBack" id="callBackSimplify">
                        <input type="hidden" name="queryParam" id="queryParam">
                        <input type="submit" class="btn btn-primary" value="Sign In" data-wap="{&quot;linktype&quot;:&quot;sign-in&quot;}">
                        <label for="cbRememberMe" class="remember-user"><input id="cbRememberMe" name="rememberme" type="checkbox" value="true">
                            <span>Remember me</span></label>
                    </div>
                </div>
            </form>
            <p>
                Forgot your Intel
                <a href="https://web.archive.org/web/20200917044551/https://www.intel.com/content/www/us/en/my-intel/forgot-userid.html">username</a>
                or
                <a href="https://web.archive.org/web/20200917044551/https://www.intel.com/content/www/us/en/my-intel/forgot-password.html">password</a>?
            </p>

            <p class="mobile-intel-signin">Do you work for Intel? <a href="#" onclick="intel.signinsimplify.geturl('https://web.archive.org/web/20200917044551/https://sifederation.intel.com/federation/bridge/sso_irp.asp?target=')">Sign in here</a>.</p>
            
                <p>
                    Don’t have an Intel account?
                    <a href="#" onclick="intel.signinHeaderSimplify.doRedirect('/forms/basic-intel-registration.html')">
                        Sign up here
                    </a>
                    for a basic account.
                </p>
            
        </div>
    </div>
</div>
<iframe id="frameSigninSimplify" tabindex="-1" title="My Intel Sign in" aria-hidden="true" name="frameSigninSimplify" src="/web/20200917044551if_/https://software.intel.com/etc.clientlibs/settings/wcm/designs/intel/clientlibs/pages/commons-page/resources/html/idamFormStaticSimplify.html" style="display:none;" data-ruffle-polyfilled=""></iframe>


<script>

    
    

    
    var intel = intel || {};
    intel.signinsimplifyConfig = {
        locale: '',
        messages: {
            InvalidCredential: 'The username or password you entered was invalid.',
            InvalidField: 'The username or password you entered was invalid.',
            AccountDisabled: 'For security reasons, your account has been disabled. For help, <a href=\"#\" class=\"contactLink new-tab-link\" target=\"_blank\" rel=\"noopener noreferrer\" >contact us<\/a>.',
            AccountLocked: 'Your account has been locked. For help, please read the <a href=\"#\" class=\"faqsLink new-tab-link\" target=\"_blank\" rel=\"noopener noreferrer\" >Sign In FAQ<\/a>.',
            UserNotFound: 'The username or password you entered was invalid.',
            Unknown: 'An unexpected error occurred. Try it again. For help, use the contact or support options below.',
            PasswordExpired: 'Your password is expired. Please change your password.',
            LoginAssistLink: 'https://web.archive.org/web/20200917044551/https://signin.intel.com/ContactUs.aspx',
            faqsLink: '/content/www/us/en/my-intel/sign-in-help.html'
        },
        nameField: 'Username',
        passField: 'Password',
        signinUrl: '/libs/apps/intel/login.json/securitytoken',
        isPopup: true,
        responseHref: 'https://web.archive.org/web/20200917044551/https://www.intel.com/content/www/us/en/develop/articles/api-without-secrets-introduction-to-vulkan-part-4.html' + window.location.hash,
        sslDomainUrl: 'www.intel.com',
        loginUrl: 'https://web.archive.org/web/20200917044551/https://welcome.intel.com/login.aspx?appid=258&qlogin=true',
        ssoUri: 'https://web.archive.org/web/20200917044551/https://federatesso.intel.com',
        logoutUrl: 'https://web.archive.org/web/20200917044551/https://welcome.intel.com/logout.aspx',
        logoutHref: 'https://web.archive.org/web/20200917044551/https://signin.intel.com/Logout?RedirectURL=https://www.intel.com/content/www/us/en/develop/articles/api-without-secrets-introduction-to-vulkan-part-4' + '.html',
        loginErrorID: '#login-error',
        usernameID: '#username',
        remembermeId: '#cbRememberMe',
        formID: '#igm-form-signin',
        unameErrorID: '#uname-error',
        passID: '#password',
        passError: '#pwd-error',
        changePasswordUrl: '/content/www/us/en/my-intel/change-password.html',
        emailVerificationUrl: '/content/www/us/en/my-intel/email-verification.expired.html',
        aboutToExpireEmailUrl: '/content/www/us/en/my-intel/email-verification.html',
        renewalUrl: '/content/www/us/en/secure/technology-provider/forms/renew-technology-provider-membership.html',
        limitedUrl: '/content/www/us/en/resellers/limited-status-secondary.html',
        isaPRMDashBoardURL: '/content/www/us/en/secure/partner/solutions-alliance/overview.html',
        itpPRMDashBoardURL: '/content/www/us/en/secure/partner/technology-provider/iot/overview.html',
        itpisaPRMDashBoardURL: '/content/www/us/en/secure/partner/iot-itp-isa/overview.html',
        isaRenewalURL: '/content/www/us/en/secure/partner/forms/solutions-alliance-renewal.html',
    };
    
    if(location.protocol=='https:' && document.cookie.indexOf('SMSESSION')!=-1) {
        if (document.cookie.indexOf('IGHFLoggedIn') == -1) {
            var currentUrl = window.location.href;
            var cookiename = "IGHFtarget";
            var samlcookieValue = cookiename + "=" + encodeURIComponent(currentUrl) + ";secure;path=/;domain=.intel.com";
            document.cookie= samlcookieValue;
            window.location.href = 'https://web.archive.org/web/20200917044551/https://sfederation.intel.com/federation2/sp/WebExperienceManagementSolutiononAEMforIntel/d3d3LmludGVsLmNvbQ%3D%3D';
        }
    }
    
</script>

                </div>
                    <div class="slide-myintel component" data-component="myintel-navmenu" data-component-id="1"></div>
            </div>
            <div class="search-info">

                
                
                
                    <a id="dropDownSearchSignIn" target="_self" tabindex="0" href="#" class="login-toggle pale-blue" data-target="#modal-signin-form">Sign In</a> to access restricted content.
            </div>
            <div class="signout-info">
                <button type="button" class="btn btn-primary" data-sso-uri="https://federatesso.intel.com" data-logout-uri="" data-wap="{&quot;linktype&quot;:&quot;logout&quot;}" onclick="intel.signinsimplify.signOut()">Sign Out
                </button>
            </div>
        </div>
    </div>

<script type="text/javascript">
    var global_config = {
        "icsUrl": "https://web.archive.org/web/20200917044551/https://supporttickets.intel.com/services/oauth2/authorize?response_type=token&client_id=3MVG9QDx8IX8nP5Rh0X3B7gohGtUh8sjFQ8Tw_U8sS9_PoVrupDFwZ_nwLcze2n64lGBbGchyUb7_9W8n8pAV&redirect_uri=https%3A%2F%2Fsoftware.intel.com%2Fcontent%2Fwww%2Fus%2Fen%2Fsecure%2Fmy-intel%2Ftoken.html",
        "ipsUrl": "https://web.archive.org/web/20200917044551/https://premiersupport.intel.com/IPS/services/oauth2/authorize?response_type=token&client_id=3MVG9xOCXq4ID1uEa5F2lCYAp6mmKvTMlKbMIrsMKShY2oOqs1ETvPRjwmhoPivHd9_U53EzmiyYxn3nVpA9J&redirect_uri=https%3A%2F%2Fsoftware.intel.com%2Fcontent%2Fwww%2Fus%2Fen%2Fsecure%2Fmy-intel%2Ftoken.html"
    };
    var globalSearch = globalSearch || {};
    globalSearch = {
        sharePointSearchPromote:true,
        searchProvider: 'coveo',
        baseSearchQuery: 'localecode:"en_US" NOT generic1:"false" ',
        langRootPath: '/content/www/us/en',
        headingTxt: 'Best Match',
        locale: 'en_US',
        typeAheadUrl: 'https://web.archive.org/web/20200917044551/http://search.intel.com/SearchLookup/DataProvider.ashx',
        bestMatchUrl: 'https://web.archive.org/web/20200917044551/https://platform.cloud.coveo.com/rest/search/v2/querySuggest',
        searchRealm: 'Default',
        bestMatchQ1: 'NAR',
        bestMatchQ2: 'en',
        bestMatchQ11: 'sptitle,description,url,thumbnailurl,reimaginerootlevel',
        progId: '',
        useEMTTags: true,
        defaultPage: 'search.html',
        token: 'xx43151f87-f1d8-4211-ae65-ce98d805849c',
        searchHub: 'entepriseSearch',

        gtvLabels: {
            suggested: "",
            products: "Products",
            support: "Support",
            developers: "Developers",
            drivers: "Drivers",
            forums: "Forums",
            specifications: "Specifications",
            download: "",
            searchesRelatedTo: "",
            search: "Search Intel.com",
            inLabel: "in",
            searchSupport: "Search Intel® Support",
            intelcom: "",
            forLabel: "for",
            allResults: "All Results",
            show: "Show",
            results: "Results"
        },
        mobileResults: "5",
        laptopResults: "10",
        EDCProgramIdentifier: "false",
        rdcContentDataSource: ""
    };
</script>
</div>

                </nav>
                <!-- end global intel header -->
                <div class="mega-menu-content"></div>
                    
            </header>
        </div>

        <script type="text/javascript">
            var globalHeader = globalHeader || {};
            globalHeader = {
                currentPath: "/content/www/us/en/develop/articles/api-without-secrets-introduction-to-vulkan-part-4",
                lanloc: "/us/en",
                lanLoc: "US/en",
                helpformurl: "",
                intelHeaderFooterVersion: "menu3",
                megaMenuPath: "/content/data/globalelements/US/en/globalnav4",
                globalBannerPath: "/content/data/globalelements/US/en/sitewide-banner-placeholder",
                subMenuPath: "/content/data/globalelements/US/en/sub-navigation/idz/idz-gd",
                isCHF:false,
                secureRedirectURL: "",
            }
        </script>
    


        
    


<section data-scroll-track="false">
    <div class="container">
        <div class="row">
            <div class="col-xs-12 pull-right persistent-cta-integration-globalNav" id="alertMsg">
                <div id="alertSupport">
                    <div class="browser_detect" id="browserdetectid" style="display:none;">
                        <p>The browser version you are using is not recommended for this site.<br>Please consider upgrading to the latest version of your browser by clicking one of the following links.</p>
                        <div class="browser_types">
                            <ul>
                                
                                    <li><a href="https://web.archive.org/web/20200917044551/https://support.apple.com/downloads/safari">Safari</a></li>
                                
                                    <li><a href="https://web.archive.org/web/20200917044551/https://support.google.com/chrome/answer/95346?hl=en">Chrome</a></li>
                                
                                    <li><a href="https://web.archive.org/web/20200917044551/https://www.microsoft.com/en-us/edge">Edge</a></li>
                                
                                    <li><a href="https://web.archive.org/web/20200917044551/https://www.mozilla.org/en-US/firefox/new/">Firefox</a></li>
                                
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>



















<div class="editorialpost editorialPost parbase">

















<link rel="stylesheet" href="API%20without%20Secrets_%20Introduction%20to%20Vulkan_%20Part%204_%20Vertex%20Attributes_files/idzLibs.min.css" type="text/css"><script src="API%20without%20Secrets_%20Introduction%20to%20Vulkan_%20Part%204_%20Vertex%20Attributes_files/idzLibs.min.js" defer="defer"></script>





<header class="editorialPostHeader">
    <div class="sticky_button_blue sticky_button_blue_pp">
        <div class="persistent_cta_bar">
















</div>

    </div>
    
    <h1 class="editorialTitle"> API without Secrets: Introduction to Vulkan* Part 4: Vertex Attributes </h1>
    <p class="editAuthor">
        <span class="label-style">By</span>

            
                
                    <a href="https://web.archive.org/web/20200917044551/https://software.intel.com/en-us/profile/+rw9Uv7oFRNFxXzJ/NuMzw==">Pawel Lapinski</a><span class="label-style">,</span>
                
                
            

            
        
    </p>
    <div class="editorialDisplayLine">
        <p class="editorialDisplayLineHide">

            
            
            

                        <span class="label-style">  Published:</span>07/14/2016&nbsp;&nbsp;
                <span class="label-style"> Last Updated:</span>07/14/2016

            
            
            
            
            

        </p>
    </div>
</header>
<div class="editorialPostNav ">
    
        <div id="inpage-navigation" class="inpage-navigation" style="height: 100%;"><h4 id="inpage-nav-contents">CONTENTS</h4><ul class="inpage-nav"><li class="parent nochildren"><a class="jumplink" href="#inpage-nav-undefined"><span class="word_arrow">Tutorial</span> 4: Vertex Attributes – Buffers, Images, and Fences</a></li><li class="parent nochildren"><a class="jumplink" href="#inpage-nav-1"><span class="word_arrow">Specifying</span> Render Pass Dependencies</a></li><li class="parent haschildren"><a class="jumplink" href="#inpage-nav-2"><span class="word_arrow">Graphics</span> Pipeline Creation</a><ul class="inpage-nav list-h3" style=""><li class="parent nochildren"><a class="jumplink" href="#inpage-nav-2-undefined"><span class="word_arrow">Writing</span> Shaders</a></li><li class="parent nochildren"><a class="jumplink" href="#inpage-nav-2-1"><span class="word_arrow">Vertex</span> Attributes Specification</a></li><li class="parent nochildren"><a class="jumplink" href="#inpage-nav-2-2"><span class="word_arrow">Input</span> Assembly State Specification</a></li><li class="parent nochildren"><a class="jumplink" href="#inpage-nav-2-3"><span class="word_arrow">Viewport</span> State Specification</a></li><li class="parent nochildren"><a class="jumplink" href="#inpage-nav-2-4"><span class="word_arrow">Dynamic</span> State Specification</a></li><li class="parent nochildren"><a class="jumplink" href="#inpage-nav-2-5"><span class="word_arrow">Pipeline</span> Object Creation</a></li></ul></li><li class="parent haschildren"><a class="jumplink" href="#inpage-nav-3"><span class="word_arrow">Vertex</span> Buffer Creation</a><ul class="inpage-nav list-h3" style=""><li class="parent nochildren"><a class="jumplink" href="#inpage-nav-3-undefined"><span class="word_arrow">Buffer</span> Memory Allocation</a></li><li class="parent nochildren"><a class="jumplink" href="#inpage-nav-3-1"><span class="word_arrow">Binding</span> a Buffer’s Memory</a></li><li class="parent nochildren"><a class="jumplink" href="#inpage-nav-3-2"><span class="word_arrow">Uploading</span> Vertex Data</a></li></ul></li><li class="parent haschildren"><a class="jumplink" href="#inpage-nav-4"><span class="word_arrow">Rendering</span> Resources Creation</a><ul class="inpage-nav list-h3" style=""><li class="parent nochildren"><a class="jumplink" href="#inpage-nav-4-undefined"><span class="word_arrow">Command</span> Pool Creation</a></li><li class="parent nochildren"><a class="jumplink" href="#inpage-nav-4-1"><span class="word_arrow">Command</span> Buffer Allocation</a></li><li class="parent nochildren"><a class="jumplink" href="#inpage-nav-4-2"><span class="word_arrow">Semaphore</span> Creation</a></li><li class="parent nochildren"><a class="jumplink" href="#inpage-nav-4-3"><span class="word_arrow">Fence</span> Creation</a></li></ul></li><li class="parent haschildren"><a class="jumplink" href="#inpage-nav-5"><span class="word_arrow">Drawing</span></a><ul class="inpage-nav list-h3" style=""><li class="parent nochildren"><a class="jumplink" href="#inpage-nav-5-undefined"><span class="word_arrow">Recording</span> a Command Buffer</a></li></ul></li><li class="parent nochildren"><a class="jumplink" href="#inpage-nav-6"><span class="word_arrow">Tutorial04</span> Execution</a></li><li class="parent nochildren"><a class="jumplink" href="#inpage-nav-7"><span class="word_arrow">Cleaning</span> Up</a></li><li class="parent nochildren"><a class="jumplink" href="#inpage-nav-8"><span class="word_arrow">Conclusion</span></a></li></ul></div>
    
</div>
<div class="editorialPostContent ">
    <div class="editorialBody">
        <p></p><p><a class="button-highlight" href="https://web.archive.org/web/20200917044551/https://github.com/GameTechDev/IntroductionToVulkan" target="_blank" rel="nofollow">Download </a></p>

<p><a class="button-white-border" href="https://web.archive.org/web/20200917044551/https://software.intel.com/content/dam/develop/external/us/en/documents/vulkan-tutorial-04-vertex-attributes-buffers-images-fences-667842.pdf">View PDF</a> [890KB]</p>

<p><strong>Back to: <a href="https://web.archive.org/web/20200917044551/https://software.intel.com/content/www/us/en/develop/articles/api-without-secrets-introduction-to-vulkan-part-3.html">Part 3 First Triangle</a><br>
	Next up: <a href="https://web.archive.org/web/20200917044551/https://software.intel.com/content/www/us/en/develop/articles/api-without-secrets-introduction-to-vulkan-part-5.html">Part 5 Staging Resources</a></strong></p>

<hr>
<h2>Tutorial 4: Vertex Attributes – Buffers, Images, and Fences<a class="inpage-nav-anchor" id="inpage-nav-undefined"></a></h2>

<p>In previous tutorials we learned the basics. The tutorials themselves
 were long and (I hope) detailed enough. This is because the learning 
curve of a Vulkan* API is quite steep. And, as you can see, a 
considerable amount of knowledge is necessary to prepare even the 
simplest application.</p>

<p>But now we can build on these foundations. So the tutorials will be 
shorter and focus on smaller topics related to a Vulkan API. In this 
part I present the recommended way of drawing arbitrary geometry by 
providing vertex attributes through vertex buffers. As the code of this 
lesson is similar to the code from the “03 – First Triangle” tutorial, I
 focus on and describe only the parts that are different.</p>

<p>I also show a different way of organizing the rendering code. 
Previously we recorded command buffers before the main rendering loop. 
But in real-life situations, every frame of animation is different, so 
we can’t prerecord all the rendering commands. We should record and 
submit the command buffer as late as possible to minimize input lag and 
acquire as recent input data as possible. We will record the command 
buffer just before it is submitted to the queue. But a single command 
buffer isn’t enough. We should not record the same command buffer until 
the graphics card finishes processing it after it was submitted. This 
moment is signaled through a fence. But waiting on a fence every frame 
is a waste of time, so we need more command buffers used 
interchangeably. With more command buffers, more fences are also needed 
and the situation gets more complicated. This tutorial shows how to 
organize the code so it is easily maintained, flexible, and as fast as 
possible.</p>

<h2>Specifying Render Pass Dependencies<a class="inpage-nav-anchor" id="inpage-nav-1"></a></h2>

<p>We start by creating a render pass, in the same way as the previous 
tutorial. But this time we will provide additional information. Render 
pass describes the internal organization of rendering resources 
(images/attachments), how they are used, and how they change during the 
rendering process. Images’ layout changes can be performed explicitly by
 creating image memory barriers. But they can also be performed 
implicitly, when proper render pass description is specified (initial, 
subpass, and final image layouts). Implicit transition is preferred, as 
drivers can perform such transitions more optimally.</p>

<p>In this part of tutorial, identically as in the previous part, we 
specify “transfer src” for initial and final image layouts, and “color 
attachment optimal” subpass layout for our render pass. But previous 
tutorials lacked important, additional information, specifically how the
 image was used (that is, what types of operations occurred in 
connection with an image), and when it was used (which parts of a 
rendering pipeline were using an image). This information can be 
specified both in the image memory barrier and the render pass 
description. When we create an image memory barrier, we specify the 
types of operations which concern the given image (memory access types 
before and after barrier), and we also specify when this barrier should 
be placed (pipeline stages in which image was used before and after the 
barrier).</p>

<p>When we create a render pass and provide a description for it, the 
same information is specified through subpass dependencies. This 
additional data is crucial for a driver to optimally prepare an implicit
 barrier. Below is the source code that creates a render pass and 
prepares subpass dependencies.</p>
<div class="code-toolbar"><pre class=" language-cpp line-numbers"><div class="toolbar" style="float: right;"><div class="toolbar-item"><a>Copy Code</a></div></div><code class=" language-cpp">std<span class="token operator">::</span>vector<span class="token operator">&lt;</span>VkSubpassDependency<span class="token operator">&gt;</span> dependencies <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token punctuation">{</span>
    VK_SUBPASS_EXTERNAL<span class="token punctuation">,</span>                            <span class="token comment">// uint32_t                       srcSubpass</span>
    <span class="token number">0</span><span class="token punctuation">,</span>                                              <span class="token comment">// uint32_t                       dstSubpass</span>
    VK_PIPELINE_STAGE_BOTTOM_OF_PIPE_BIT<span class="token punctuation">,</span>           <span class="token comment">// VkPipelineStageFlags           srcStageMask</span>
    VK_PIPELINE_STAGE_COLOR_ATTACHMENT_OUTPUT_BIT<span class="token punctuation">,</span>  <span class="token comment">// VkPipelineStageFlags           dstStageMask</span>
    VK_ACCESS_MEMORY_READ_BIT<span class="token punctuation">,</span>                      <span class="token comment">// VkAccessFlags                  srcAccessMask</span>
    VK_ACCESS_COLOR_ATTACHMENT_WRITE_BIT<span class="token punctuation">,</span>           <span class="token comment">// VkAccessFlags                  dstAccessMask</span>
    VK_DEPENDENCY_BY_REGION_BIT                     <span class="token comment">// VkDependencyFlags              dependencyFlags</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token number">0</span><span class="token punctuation">,</span>                                              <span class="token comment">// uint32_t                       srcSubpass</span>
    VK_SUBPASS_EXTERNAL<span class="token punctuation">,</span>                            <span class="token comment">// uint32_t                       dstSubpass</span>
    VK_PIPELINE_STAGE_COLOR_ATTACHMENT_OUTPUT_BIT<span class="token punctuation">,</span>  <span class="token comment">// VkPipelineStageFlags           srcStageMask</span>
    VK_PIPELINE_STAGE_BOTTOM_OF_PIPE_BIT<span class="token punctuation">,</span>           <span class="token comment">// VkPipelineStageFlags           dstStageMask</span>
    VK_ACCESS_COLOR_ATTACHMENT_WRITE_BIT<span class="token punctuation">,</span>           <span class="token comment">// VkAccessFlags                  srcAccessMask</span>
    VK_ACCESS_MEMORY_READ_BIT<span class="token punctuation">,</span>                      <span class="token comment">// VkAccessFlags                  dstAccessMask</span>
    VK_DEPENDENCY_BY_REGION_BIT                     <span class="token comment">// VkDependencyFlags              dependencyFlags</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

VkRenderPassCreateInfo render_pass_create_info <span class="token operator">=</span> <span class="token punctuation">{</span>
  VK_STRUCTURE_TYPE_RENDER_PASS_CREATE_INFO<span class="token punctuation">,</span>        <span class="token comment">// VkStructureType                sType</span>
  <span class="token keyword keyword-nullptr">nullptr</span><span class="token punctuation">,</span>                                          <span class="token comment">// const void                    *pNext</span>
  <span class="token number">0</span><span class="token punctuation">,</span>                                                <span class="token comment">// VkRenderPassCreateFlags        flags</span>
  <span class="token number">1</span><span class="token punctuation">,</span>                                                <span class="token comment">// uint32_t                       attachmentCount</span>
  attachment_descriptions<span class="token punctuation">,</span>                          <span class="token comment">// const VkAttachmentDescription *pAttachments</span>
  <span class="token number">1</span><span class="token punctuation">,</span>                                                <span class="token comment">// uint32_t                       subpassCount</span>
  subpass_descriptions<span class="token punctuation">,</span>                             <span class="token comment">// const VkSubpassDescription    *pSubpasses</span>
  <span class="token keyword keyword-static_cast">static_cast</span><span class="token operator">&lt;</span><span class="token keyword keyword-uint32_t">uint32_t</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>dependencies<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>       <span class="token comment">// uint32_t                       dependencyCount</span>
  <span class="token operator">&amp;</span>dependencies<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>                                  <span class="token comment">// const VkSubpassDependency     *pDependencies</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword keyword-if">if</span><span class="token punctuation">(</span> <span class="token function">vkCreateRenderPass</span><span class="token punctuation">(</span> <span class="token function">GetDevice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>render_pass_create_info<span class="token punctuation">,</span> <span class="token keyword keyword-nullptr">nullptr</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>Vulkan<span class="token punctuation">.</span>RenderPass <span class="token punctuation">)</span> <span class="token operator">!=</span> VK_SUCCESS <span class="token punctuation">)</span> <span class="token punctuation">{</span>
  std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Could not create render pass!"</span> <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
  <span class="token keyword keyword-return">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre></div>

<p><strong>1.</strong> <em>Tutorial04.cpp, function CreateRenderPass()</em></p>

<p>Subpass dependencies describe dependencies between different 
subpasses. When an attachment is used in one specific way in a given 
subpass (for example, rendering into it), but in another way in another 
subpass (sampling from it), we can create a memory barrier or we can 
provide a subpass dependency that describes the intended usage of an 
attachment in these two subpasses. Of course, the latter option is 
recommended, as the driver can (usually) prepare the barriers in a more 
optimal way. And the code itself is improved—everything required to 
understand the code is gathered in one place, one object.</p>

<p>In our simple example, we have only one subpass, but we specify two 
dependencies. This is because we can (and should) specify dependencies 
between render passes (by providing the number of a given subpass) and 
operations outside of them (by providing a VK_SUBPASS_EXTERNAL value). 
Here we provide one dependency for color attachment between operations 
occurring before a render pass and its only subpass. The second 
dependency is defined for operations occurring inside a subpass and 
after the render pass.</p>

<p>What operations are we talking about? We are using only one 
attachment, which is an image acquired from a presentation engine 
(swapchain). The presentation engine uses an image as a source of a 
presentable data. It only displays an image. So the only operation that 
involves this image is “memory read” on the image with “present src” 
layout. This operation doesn’t occur in any normal pipeline stage, but 
it can be represented in the “bottom of pipeline” stage.</p>

<p>Inside our render pass, in its only subpass (with index 0), we are 
rendering into an image used as a color attachment. So the operation 
that occurs on this image is “color attachment write”, which is 
performed in the “color attachment output” pipeline stage (after a 
fragment shader). After that the image is presented and returned to a 
presentation engine, which again uses this image as a source of data. 
So, in our example, the operation after the render pass is the same as 
before it: “memory read”.</p>

<p>We specify this data through an array of VkSubpassDependency members.
 And when we create a render pass and a VkRenderPassCreateInfo 
structure, we specify the number of elements in the dependencies array 
(through dependencyCount member), and provide an address of its first 
element (through pDependencies). In a previous part of the tutorial we 
have provided 0 and nullptr for these two fields. VkSubpassDependency 
structure contains the following fields:</p>

<ul>
	<li>srcSubpass – Index of a first (previous) subpass or 
VK_SUBPASS_EXTERNAL if we want to indicate dependency between subpass 
and operations outside of a render pass.</li>
	<li>dstSubpass – Index of a second (later) subpass (or VK_SUBPASS_EXTERNAL).</li>
	<li>srcStageMask – Pipeline stage during which a given attachment was used before (in a src subpass).</li>
	<li>dstStageMask – Pipeline stage during which a given attachment will be used later (in a dst subpass).</li>
	<li>srcAccessMask – Types of memory operations that occurred in a src subpass or before a render pass.</li>
	<li>dstAccessMask – Types of memory operations that occurred in a dst subpass or after a render pass.</li>
	<li>dependencyFlags – Flag describing the type (region) of dependency.</li>
</ul>

<h2>Graphics Pipeline Creation<a class="inpage-nav-anchor" id="inpage-nav-2"></a></h2>

<p>Now we will create a graphics pipeline object. (We should create 
framebuffers for our swapchain images, but we will do that during 
command buffer recording). We don’t want to render a geometry that is 
hardcoded into a shader. We want to draw any number of vertices, and we 
also want to provide additional attributes, not only vertex positions. 
What should we do first?</p>

<h3>Writing Shaders<a class="inpage-nav-anchor" id="inpage-nav-2-undefined"></a></h3>

<p>First have a look at the vertex shader written in GLSL code:</p>
<div class="code-toolbar"><pre class=" language-cpp line-numbers"><div class="toolbar" style="float: right;"><div class="toolbar-item"><a>Copy Code</a></div></div><code class=" language-cpp"><span class="token macro property">#version 450</span>

<span class="token function">layout</span><span class="token punctuation">(</span>location <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span> in vec4 i_Position<span class="token punctuation">;</span>
<span class="token function">layout</span><span class="token punctuation">(</span>location <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">)</span> in vec4 i_Color<span class="token punctuation">;</span>

out gl_PerVertex
<span class="token punctuation">{</span>
  vec4 gl_Position<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token function">layout</span><span class="token punctuation">(</span>location <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span> out vec4 v_Color<span class="token punctuation">;</span>

<span class="token keyword keyword-void">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    gl_Position <span class="token operator">=</span> i_Position<span class="token punctuation">;</span>
    v_Color <span class="token operator">=</span> i_Color<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre></div>

<p><strong>2.</strong> <em>shader.vert</em></p>

<p>This shader is quite simple, though more complicated than the one from Tutorial 03.</p>

<p>We specify two input attributes (named i_Position and i_Color). In 
Vulkan, all attributes must have a location layout qualifier. When we 
specify a description of the vertex attributes in Vulkan API, the names 
of these attributes don’t matter, only their indices/locations. In 
OpenGL* we could ask for a location of an attribute with a given name. 
In Vulkan we can’t do this. Location layout qualifiers are the only way 
to go.</p>

<p>Next, we redeclare the gl_PerVertex block in the shader. Vulkan uses 
shader I/O blocks, and we should redeclare a gl_PerVertex block to 
specify exactly what members of this block to use. When we don’t, the 
default definition is used. But we must remember that the default 
definition contains gl_ClipDistance[], which requires us to enable a 
feature named shaderClipDistance (and in Vulkan we can’t use features 
that are not enabled during device creation or our application may not 
work correctly). Here we are using only a gl_Position member so the 
feature is not required.</p>

<p>We then specify an additional output varying variable called v_Color 
in which we store vertices’ colors. Inside a main function we copy 
values provided by an application to proper output variables: position 
to gl_Position and color to v_Color.</p>

<p>Now look at a fragment shader to see how attributes are consumed.</p>
<div class="code-toolbar"><pre class=" language-cpp line-numbers"><div class="toolbar" style="float: right;"><div class="toolbar-item"><a>Copy Code</a></div></div><code class=" language-cpp"><span class="token macro property">#version 450</span>

<span class="token function">layout</span><span class="token punctuation">(</span>location <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span> in vec4 v_Color<span class="token punctuation">;</span>

<span class="token function">layout</span><span class="token punctuation">(</span>location <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span> out vec4 o_Color<span class="token punctuation">;</span>

<span class="token keyword keyword-void">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  o_Color <span class="token operator">=</span> v_Color<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre></div>

<p><strong>3.</strong> <em>shader.frag</em></p>

<p>In a fragment shader, the input varying variable v_Color is copied to
 the only output variable called o_Color. Both variables have location 
layout specifiers. The v_Color variable has the same location as the 
output variable in the vertex shader, so it will contain color values 
interpolated between vertices.</p>

<p>These shaders can be converted to a SPIR-V assembly the same way as previously. The following commands do this:</p>

<p><code>glslangValidator.exe -V -H shader.vert &gt; vert.spv.txt</code></p>

<p><code>glslangValidator.exe -V -H shader.frag &gt; frag.spv.txt</code></p>

<p>So now, when we know what attributes we want to use in our shaders, we can create the appropriate graphics pipeline.</p>

<h3>Vertex Attributes Specification<a class="inpage-nav-anchor" id="inpage-nav-2-1"></a></h3>

<p>The most important improvement in this tutorial is added to the 
vertex input state creation, for which we specify a variable of type 
VkPipelineVertexInputStateCreateInfo. In this variable we provide 
pointers to structures, which define the type of vertex input data and 
number and layout of our attributes.</p>

<p>We want to use two attributes: vertex positions, which are composed 
of four float components, and vertex colors, which are also composed of 
four float values. We will lay all of our vertex data in one buffer 
using the interleaved attributes layout. This means that position for 
the first vertex will be placed, next color for the same vertex, next 
the position of second vertex, after that the color of the second 
vertex, then position and color of third vertex and so on. All this 
specification is performed with the following code:</p>
<div class="code-toolbar"><pre class=" language-cpp line-numbers"><div class="toolbar" style="float: right;"><div class="toolbar-item"><a>Copy Code</a></div></div><code class=" language-cpp">std<span class="token operator">::</span>vector<span class="token operator">&lt;</span>VkVertexInputBindingDescription<span class="token operator">&gt;</span> vertex_binding_descriptions <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token punctuation">{</span>
    <span class="token number">0</span><span class="token punctuation">,</span>                                                          <span class="token comment">// uint32_t                                       binding</span>
    <span class="token keyword keyword-sizeof">sizeof</span><span class="token punctuation">(</span>VertexData<span class="token punctuation">)</span><span class="token punctuation">,</span>                                         <span class="token comment">// uint32_t                                       stride</span>
    VK_VERTEX_INPUT_RATE_VERTEX                                 <span class="token comment">// VkVertexInputRate                              inputRate</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

std<span class="token operator">::</span>vector<span class="token operator">&lt;</span>VkVertexInputAttributeDescription<span class="token operator">&gt;</span> vertex_attribute_descriptions <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token punctuation">{</span>
    <span class="token number">0</span><span class="token punctuation">,</span>                                                          <span class="token comment">// uint32_t                                       location</span>
    vertex_binding_descriptions<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>binding<span class="token punctuation">,</span>                     <span class="token comment">// uint32_t                                       binding</span>
    VK_FORMAT_R32G32B32A32_SFLOAT<span class="token punctuation">,</span>                              <span class="token comment">// VkFormat                                       format</span>
    <span class="token function">offsetof</span><span class="token punctuation">(</span><span class="token keyword keyword-struct">struct</span> <span class="token class-name">VertexData</span><span class="token punctuation">,</span> x<span class="token punctuation">)</span>                              <span class="token comment">// uint32_t                                       offset</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token number">1</span><span class="token punctuation">,</span>                                                          <span class="token comment">// uint32_t                                       location</span>
    vertex_binding_descriptions<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>binding<span class="token punctuation">,</span>                     <span class="token comment">// uint32_t                                       binding</span>
    VK_FORMAT_R32G32B32A32_SFLOAT<span class="token punctuation">,</span>                              <span class="token comment">// VkFormat                                       format</span>
    <span class="token function">offsetof</span><span class="token punctuation">(</span> <span class="token keyword keyword-struct">struct</span> <span class="token class-name">VertexData</span><span class="token punctuation">,</span> r <span class="token punctuation">)</span>                            <span class="token comment">// uint32_t                                       offset</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

VkPipelineVertexInputStateCreateInfo vertex_input_state_create_info <span class="token operator">=</span> <span class="token punctuation">{</span>
  VK_STRUCTURE_TYPE_PIPELINE_VERTEX_INPUT_STATE_CREATE_INFO<span class="token punctuation">,</span>    <span class="token comment">// VkStructureType                                sType</span>
  <span class="token keyword keyword-nullptr">nullptr</span><span class="token punctuation">,</span>                                                      <span class="token comment">// const void                                    *pNext</span>
  <span class="token number">0</span><span class="token punctuation">,</span>                                                            <span class="token comment">// VkPipelineVertexInputStateCreateFlags          flags;</span>
  <span class="token keyword keyword-static_cast">static_cast</span><span class="token operator">&lt;</span><span class="token keyword keyword-uint32_t">uint32_t</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>vertex_binding_descriptions<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    <span class="token comment">// uint32_t                                       vertexBindingDescriptionCount</span>
  <span class="token operator">&amp;</span>vertex_binding_descriptions<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>                              <span class="token comment">// const VkVertexInputBindingDescription         *pVertexBindingDescriptions</span>
  <span class="token keyword keyword-static_cast">static_cast</span><span class="token operator">&lt;</span><span class="token keyword keyword-uint32_t">uint32_t</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>vertex_attribute_descriptions<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>  <span class="token comment">// uint32_t                                       vertexAttributeDescriptionCount</span>
  <span class="token operator">&amp;</span>vertex_attribute_descriptions<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>                             <span class="token comment">// const VkVertexInputAttributeDescription       *pVertexAttributeDescriptions</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 45px;"></span><span style="height: 45px;"></span><span style="height: 45px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 45px;"></span><span style="height: 45px;"></span><span style="height: 45px;"></span><span style="height: 45px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 45px;"></span><span style="height: 45px;"></span><span style="height: 45px;"></span><span style="height: 45px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 45px;"></span><span style="height: 45px;"></span><span style="height: 45px;"></span><span style="height: 45px;"></span><span style="height: 45px;"></span><span style="height: 45px;"></span><span style="height: 45px;"></span><span style="height: 22.5px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre></div>

<p><strong>4.</strong> <em>Tutorial04.cpp, function CreatePipeline()</em></p>

<p>First specify the binding (general memory information) of vertex data
 through VkVertexInputBindingDescription. It contains the following 
fields:</p>

<ul>
	<li>binding – Index of a binding with which vertex data will be associated.</li>
	<li>stride – The distance in bytes between two consecutive elements (the same attribute for two neighbor vertices).</li>
	<li>inputRate – Defines how data should be consumed, per vertex or per instance.</li>
</ul>

<p>The stride and inputRate fields are quite self-explanatory. 
Additional information may be required for a binding member. When we 
create a vertex buffer, we bind it to a chosen slot before rendering 
operations. The slot number (an index) is this binding and here we 
describe how data in this slot is aligned in memory and how it should be
 consumed (per vertex or per instance). Different vertex buffers can be 
bound to different bindings. And each binding may be differently 
positioned in memory.</p>

<p>Next step is to define all vertex attributes. We must specify a 
location (index) for each attribute (the same as in a shader source 
code, in location layout qualifier), source of data (binding from which 
data will be read), format (data type and number of components), and 
offset at which data for this specific attribute can be found (offset 
from the beginning of a data for a given vertex, not from the beginning 
of all vertex data). The situation here is exactly the same as in OpenGL
 where we created Vertex Buffer Objects (VBO, which can be thought of as
 an equivalent of “binding”) and defined attributes using 
glVertexAttribPointer() function through which we specified an index of 
an attribute (location), size and type (number of components and 
format), stride and offset. This information is provided through the 
VkVertexInputAttributeDescription structure. It contains these fields:</p>

<ul>
	<li>location – Index of an attribute, the same as defined by the location layout specifier in a shader source code.</li>
	<li>binding – The number of the slot from which data should be read 
(source of data like VBO in OpenGL), the same binding as in a 
VkVertexInputBindingDescription structure and <strong>vkCmdBindVertexBuffers()</strong> function (described later).</li>
	<li>format – Data type and number of components per attribute.</li>
	<li>offset – Beginning of data for a given attribute.</li>
</ul>

<p>When we are ready, we can prepare vertex input state description by 
filling a variable of type VkPipelineVertexInputStateCreateInfo which 
consist of the following fields:</p>

<ul>
	<li>sType – Type of structure, here it should be equal to VK_STRUCTURE_TYPE_PIPELINE_VERTEX_INPUT_STATE_CREATE_INFO.</li>
	<li>pNext – Pointer reserved for extensions. Right now set this value to null.</li>
	<li>flags – Parameter reserved for future use.</li>
	<li>vertexBindingDescriptionCount – Number of elements in the pVertexBindingDescriptions array.</li>
	<li>pVertexBindingDescriptions – Array describing all bindings defined 
for a given pipeline (buffers from which values of all attributes are 
read).</li>
	<li>vertexAttributeDescriptionCount – Number of elements in the pVertexAttributeDescriptions array.</li>
	<li>pVertexAttributeDescriptions – Array with elements specifying all vertex attributes.</li>
</ul>

<p>This concludes vertex attributes specification at pipeline creation. 
But to use them, we must create a vertex buffer and bind it to command 
buffer before we issue a rendering command.</p>

<h3>Input Assembly State Specification<a class="inpage-nav-anchor" id="inpage-nav-2-2"></a></h3>

<p>Previously we have drawn a single triangle using a triangle list 
topology. Now we will draw a quad, which is more convenient to draw by 
defining just four vertices, not two triangles and six vertices. To do 
this, we must use triangle strip topology. We define it through 
VkPipelineInputAssemblyStateCreateInfo structure that has the following 
members:</p>

<ul>
	<li>sType – Structure type, here equal to VK_STRUCTURE_TYPE_PIPELINE_INPUT_ASSEMBLY_STATE_CREATE_INFO.</li>
	<li>pNext – Pointer reserved for extensions.</li>
	<li>flags – Parameter reserved for future use.</li>
	<li>topology – Topology used for drawing vertices (like triangle fan, strip, list).</li>
	<li>primitiveRestartEnable – Parameter defining whether we want to 
restart assembling a primitive by using a special value of vertex index.</li>
</ul>

<p>Here is the code sample used to define triangle strip topology:</p>
<div class="code-toolbar"><pre class=" language-cpp line-numbers"><div class="toolbar" style="float: right;"><div class="toolbar-item"><a>Copy Code</a></div></div><code class=" language-cpp">VkPipelineInputAssemblyStateCreateInfo input_assembly_state_create_info<span class="token operator">=</span> <span class="token punctuation">{</span>
  VK_STRUCTURE_TYPE_PIPELINE_INPUT_ASSEMBLY_STATE_CREATE_INFO<span class="token punctuation">,</span>  <span class="token comment">// VkStructureType                                sType</span>
  <span class="token keyword keyword-nullptr">nullptr</span><span class="token punctuation">,</span>                                                      <span class="token comment">// const void                                    *pNext</span>
  <span class="token number">0</span><span class="token punctuation">,</span>                                                            <span class="token comment">// VkPipelineInputAssemblyStateCreateFlags        flags</span>
  VK_PRIMITIVE_TOPOLOGY_TRIANGLE_STRIP<span class="token punctuation">,</span>                         <span class="token comment">// VkPrimitiveTopology                            topology</span>
  VK_FALSE                                                      <span class="token comment">// VkBool32                                       primitiveRestartEnable</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span style="height: 22.5px;"></span><span style="height: 45px;"></span><span style="height: 45px;"></span><span style="height: 45px;"></span><span style="height: 45px;"></span><span style="height: 45px;"></span><span style="height: 22.5px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre></div>

<p><strong>5.</strong> <em>Tutorial04.cpp, function CreatePipeline()</em></p>

<h3>Viewport State Specification<a class="inpage-nav-anchor" id="inpage-nav-2-3"></a></h3>

<p>In this tutorial we introduce another change. Previously, for the 
sake of simplicity, we have hardcoded the viewport and scissor test 
parameters, which unfortunately caused our image to be always the same 
size, no matter how big the application window was. This time, we won’t 
specify these values through the VkPipelineViewportStateCreateInfo 
structure. We will use a dynamic state for that. Here is a code 
responsible for defining static viewport state parameters:</p>
<div class="code-toolbar"><pre class=" language-cpp line-numbers"><div class="toolbar" style="float: right;"><div class="toolbar-item"><a>Copy Code</a></div></div><code class=" language-cpp">VkPipelineViewportStateCreateInfo viewport_state_create_info<span class="token operator">=</span> <span class="token punctuation">{</span>
  VK_STRUCTURE_TYPE_PIPELINE_VIEWPORT_STATE_CREATE_INFO<span class="token punctuation">,</span>        <span class="token comment">// VkStructureType                                sType</span>
  <span class="token keyword keyword-nullptr">nullptr</span><span class="token punctuation">,</span>                                                      <span class="token comment">// const void                                    *pNext</span>
  <span class="token number">0</span><span class="token punctuation">,</span>                                                            <span class="token comment">// VkPipelineViewportStateCreateFlags             flags</span>
  <span class="token number">1</span><span class="token punctuation">,</span>                                                            <span class="token comment">// uint32_t                                       viewportCount</span>
  <span class="token keyword keyword-nullptr">nullptr</span><span class="token punctuation">,</span>                                                      <span class="token comment">// const VkViewport                              *pViewports</span>
  <span class="token number">1</span><span class="token punctuation">,</span>                                                            <span class="token comment">// uint32_t                                       scissorCount</span>
  <span class="token keyword keyword-nullptr">nullptr</span>                                                       <span class="token comment">// const VkRect2D                                *pScissors</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span style="height: 22.5px;"></span><span style="height: 45px;"></span><span style="height: 45px;"></span><span style="height: 45px;"></span><span style="height: 45px;"></span><span style="height: 45px;"></span><span style="height: 45px;"></span><span style="height: 45px;"></span><span style="height: 22.5px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre></div>

<p><strong>6.</strong> <em>Tutorial04.cpp, function CreatePipeline()</em></p>

<p>The structure that defines static viewport parameters has the following members:</p>

<ul>
	<li>sType – Type of the structure, VK_STRUCTURE_TYPE_PIPELINE_VIEWPORT_STATE_CREATE_INFO here.</li>
	<li>pNext – Pointer reserved for extension-specific parameters.</li>
	<li>flags – Parameter reserved for future use.</li>
	<li>viewportCount – Number of viewports.</li>
	<li>pViewports – Pointer to a structure defining static viewport parameters.</li>
	<li>scissorCount – Number of scissor rectangles (must have the same value as viewportCount parameter).</li>
	<li>pScissors – Pointer to an array of 2D rectangles defining static scissor test parameters for each viewport.</li>
</ul>

<p>When we want to define viewport and scissor parameters through a 
dynamic state, we don’t have to fill pViewports and pScissors members. 
That’s why they are set to null in the example above. But, we always 
have to define the number of viewports and scissor test rectangles. 
These values are always specified through the 
VkPipelineViewportStateCreateInfo structure, no matter if we want to use
 dynamic or static viewport and scissor state.</p>

<h3>Dynamic State Specification<a class="inpage-nav-anchor" id="inpage-nav-2-4"></a></h3>

<p>When we create a pipeline, we can specify which parts of it are 
always static, defined through structures at a pipeline creation, and 
which are dynamic, specified by proper function calls during command 
buffer recording. This allows us to lower the number of pipeline objects
 that differ only with small details like line widths, blend constants, 
or stencil parameters, or mentioned viewport size. Here is the code used
 to define parts of pipeline that should be dynamic:</p>
<div class="code-toolbar"><pre class=" language-cpp line-numbers"><div class="toolbar" style="float: right;"><div class="toolbar-item"><a>Copy Code</a></div></div><code class=" language-cpp">std<span class="token operator">::</span>vector<span class="token operator">&lt;</span>VkDynamicState<span class="token operator">&gt;</span> dynamic_states <span class="token operator">=</span> <span class="token punctuation">{</span>
  VK_DYNAMIC_STATE_VIEWPORT<span class="token punctuation">,</span>
  VK_DYNAMIC_STATE_SCISSOR<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

VkPipelineDynamicStateCreateInfo dynamic_state_create_info <span class="token operator">=</span> <span class="token punctuation">{</span>
  VK_STRUCTURE_TYPE_PIPELINE_DYNAMIC_STATE_CREATE_INFO<span class="token punctuation">,</span>         <span class="token comment">// VkStructureType                                sType</span>
  <span class="token keyword keyword-nullptr">nullptr</span><span class="token punctuation">,</span>                                                      <span class="token comment">// const void                                    *pNext</span>
  <span class="token number">0</span><span class="token punctuation">,</span>                                                            <span class="token comment">// VkPipelineDynamicStateCreateFlags              flags</span>
  <span class="token keyword keyword-static_cast">static_cast</span><span class="token operator">&lt;</span><span class="token keyword keyword-uint32_t">uint32_t</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>dynamic_states<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                 <span class="token comment">// uint32_t                                       dynamicStateCount</span>
  <span class="token operator">&amp;</span>dynamic_states<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>                                            <span class="token comment">// const VkDynamicState                          *pDynamicStates</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 45px;"></span><span style="height: 45px;"></span><span style="height: 45px;"></span><span style="height: 45px;"></span><span style="height: 45px;"></span><span style="height: 22.5px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre></div>

<p><strong>7.</strong> <em>Tutorial04.cpp, function CreatePipeline()</em></p>

<p>It is done by using a structure of type VkPipelineDynamicStateCreateInfo, which contains the following fields:</p>

<ul>
	<li>sType – Parameter defining the type of a given structure, here equal to VK_STRUCTURE_TYPE_PIPELINE_DYNAMIC_STATE_CREATE_INFO.</li>
	<li>pNext – Parameter reserved for extensions.</li>
	<li>flags – Parameter reserved for future use.</li>
	<li>dynamicStateCount – Number of elements in pDynamicStates array.</li>
	<li>pDynamicStates – Array containing enums, specifying which parts of a
 pipeline should be marked as dynamic. Each element of this array is of 
type VkDynamicState.</li>
</ul>

<h3>Pipeline Object Creation<a class="inpage-nav-anchor" id="inpage-nav-2-5"></a></h3>

<p>We now have defined all the necessary parameters of a graphics 
pipeline, so we can create a pipeline object. Here is the code that does
 it:</p>
<div class="code-toolbar"><pre class=" language-cpp line-numbers"><div class="toolbar" style="float: right;"><div class="toolbar-item"><a>Copy Code</a></div></div><code class=" language-cpp">VkGraphicsPipelineCreateInfo pipeline_create_info<span class="token operator">=</span> <span class="token punctuation">{</span>
  VK_STRUCTURE_TYPE_GRAPHICS_PIPELINE_CREATE_INFO<span class="token punctuation">,</span>              <span class="token comment">// VkStructureType                                sType</span>
  <span class="token keyword keyword-nullptr">nullptr</span><span class="token punctuation">,</span>                                                      <span class="token comment">// const void                                    *pNext</span>
  <span class="token number">0</span><span class="token punctuation">,</span>                                                            <span class="token comment">// VkPipelineCreateFlags                          flags</span>
  <span class="token keyword keyword-static_cast">static_cast</span><span class="token operator">&lt;</span><span class="token keyword keyword-uint32_t">uint32_t</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>shader_stage_create_infos<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>      <span class="token comment">// uint32_t                                       stageCount</span>
  <span class="token operator">&amp;</span>shader_stage_create_infos<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>                                <span class="token comment">// const VkPipelineShaderStageCreateInfo         *pStages</span>
  <span class="token operator">&amp;</span>vertex_input_state_create_info<span class="token punctuation">,</span>                              <span class="token comment">// const VkPipelineVertexInputStateCreateInfo    *pVertexInputState;</span>
  <span class="token operator">&amp;</span>input_assembly_state_create_info<span class="token punctuation">,</span>                            <span class="token comment">// const VkPipelineInputAssemblyStateCreateInfo  *pInputAssemblyState</span>
  <span class="token keyword keyword-nullptr">nullptr</span><span class="token punctuation">,</span>                                                      <span class="token comment">// const VkPipelineTessellationStateCreateInfo   *pTessellationState</span>
  <span class="token operator">&amp;</span>viewport_state_create_info<span class="token punctuation">,</span>                                  <span class="token comment">// const VkPipelineViewportStateCreateInfo       *pViewportState</span>
  <span class="token operator">&amp;</span>rasterization_state_create_info<span class="token punctuation">,</span>                             <span class="token comment">// const VkPipelineRasterizationStateCreateInfo  *pRasterizationState</span>
  <span class="token operator">&amp;</span>multisample_state_create_info<span class="token punctuation">,</span>                               <span class="token comment">// const VkPipelineMultisampleStateCreateInfo    *pMultisampleState</span>
  <span class="token keyword keyword-nullptr">nullptr</span><span class="token punctuation">,</span>                                                      <span class="token comment">// const VkPipelineDepthStencilStateCreateInfo   *pDepthStencilState</span>
  <span class="token operator">&amp;</span>color_blend_state_create_info<span class="token punctuation">,</span>                               <span class="token comment">// const VkPipelineColorBlendStateCreateInfo     *pColorBlendState</span>
  <span class="token operator">&amp;</span>dynamic_state_create_info<span class="token punctuation">,</span>                                   <span class="token comment">// const VkPipelineDynamicStateCreateInfo        *pDynamicState</span>
  pipeline_layout<span class="token punctuation">.</span><span class="token function">Get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                                        <span class="token comment">// VkPipelineLayout                               layout</span>
  Vulkan<span class="token punctuation">.</span>RenderPass<span class="token punctuation">,</span>                                            <span class="token comment">// VkRenderPass                                   renderPass</span>
  <span class="token number">0</span><span class="token punctuation">,</span>                                                            <span class="token comment">// uint32_t                                       subpass</span>
  VK_NULL_HANDLE<span class="token punctuation">,</span>                                               <span class="token comment">// VkPipeline                                     basePipelineHandle</span>
  <span class="token operator">-</span><span class="token number">1</span>                                                            <span class="token comment">// int32_t                                        basePipelineIndex</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword keyword-if">if</span><span class="token punctuation">(</span> <span class="token function">vkCreateGraphicsPipelines</span><span class="token punctuation">(</span> <span class="token function">GetDevice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> VK_NULL_HANDLE<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>pipeline_create_info<span class="token punctuation">,</span> <span class="token keyword keyword-nullptr">nullptr</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>Vulkan<span class="token punctuation">.</span>GraphicsPipeline <span class="token punctuation">)</span> <span class="token operator">!=</span> VK_SUCCESS <span class="token punctuation">)</span> <span class="token punctuation">{</span>
  std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Could not create graphics pipeline!"</span> <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
  <span class="token keyword keyword-return">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword keyword-return">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span style="height: 22.5px;"></span><span style="height: 45px;"></span><span style="height: 45px;"></span><span style="height: 45px;"></span><span style="height: 45px;"></span><span style="height: 45px;"></span><span style="height: 45px;"></span><span style="height: 45px;"></span><span style="height: 45px;"></span><span style="height: 45px;"></span><span style="height: 45px;"></span><span style="height: 45px;"></span><span style="height: 45px;"></span><span style="height: 45px;"></span><span style="height: 45px;"></span><span style="height: 45px;"></span><span style="height: 45px;"></span><span style="height: 45px;"></span><span style="height: 45px;"></span><span style="height: 45px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 45px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre></div>

<p><strong>8.</strong> <em>Tutorial04.cpp, function CreatePipeline()</em></p>

<p>The most important variable, which contains references to all 
pipeline parameters, is of type VkGraphicsPipelineCreateInfo. The only 
change from the previous tutorial is an addition of the pDynamicState 
parameter, which points to a structure of 
VkPipelineDynamicStateCreateInfo type, described above. Every pipeline 
state, which is specified as dynamic, must be set through a proper 
function call during command buffer recording.</p>

<p>The pipeline object itself is created by calling the <strong>vkCreateGraphicsPipelines()</strong> function.</p>

<h2>Vertex Buffer Creation<a class="inpage-nav-anchor" id="inpage-nav-3"></a></h2>

<p>To use vertex attributes, apart from specifying them during pipeline 
creation, we need to prepare a buffer that will contain all the data for
 these attributes. From this buffer, the values for attributes will be 
read and provided to the vertex shader.</p>

<p>In Vulkan, buffer and image creation consists of at least two stages.
 First, we create the object itself. Next, we need to create a memory 
object, which will then be bound to the buffer (or image). From this 
memory object, the buffer will take its storage space. This approach 
allows us to specify additional parameters for the memory and control it
 with more details.</p>

<p>To create a (general) buffer object we call <strong>vkCreateBuffer()</strong>.
 It accepts, among other parameters, a pointer to a variable of type 
VkBufferCreateInfo, which defines parameters of created buffer. Here is 
the code responsible for creating a buffer used as a source of data for 
vertex attributes:</p>
<div class="code-toolbar"><pre class=" language-cpp line-numbers"><div class="toolbar" style="float: right;"><div class="toolbar-item"><a>Copy Code</a></div></div><code class=" language-cpp">VertexData vertex_data<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token punctuation">{</span>
    <span class="token operator">-</span><span class="token number">0.7f</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">0.7f</span><span class="token punctuation">,</span> <span class="token number">0.0f</span><span class="token punctuation">,</span> <span class="token number">1.0f</span><span class="token punctuation">,</span>
    <span class="token number">1.0f</span><span class="token punctuation">,</span> <span class="token number">0.0f</span><span class="token punctuation">,</span> <span class="token number">0.0f</span><span class="token punctuation">,</span> <span class="token number">0.0f</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token operator">-</span><span class="token number">0.7f</span><span class="token punctuation">,</span> <span class="token number">0.7f</span><span class="token punctuation">,</span> <span class="token number">0.0f</span><span class="token punctuation">,</span> <span class="token number">1.0f</span><span class="token punctuation">,</span>
    <span class="token number">0.0f</span><span class="token punctuation">,</span> <span class="token number">1.0f</span><span class="token punctuation">,</span> <span class="token number">0.0f</span><span class="token punctuation">,</span> <span class="token number">0.0f</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token number">0.7f</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">0.7f</span><span class="token punctuation">,</span> <span class="token number">0.0f</span><span class="token punctuation">,</span> <span class="token number">1.0f</span><span class="token punctuation">,</span>
    <span class="token number">0.0f</span><span class="token punctuation">,</span> <span class="token number">0.0f</span><span class="token punctuation">,</span> <span class="token number">1.0f</span><span class="token punctuation">,</span> <span class="token number">0.0f</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token number">0.7f</span><span class="token punctuation">,</span> <span class="token number">0.7f</span><span class="token punctuation">,</span> <span class="token number">0.0f</span><span class="token punctuation">,</span> <span class="token number">1.0f</span><span class="token punctuation">,</span>
    <span class="token number">0.3f</span><span class="token punctuation">,</span> <span class="token number">0.3f</span><span class="token punctuation">,</span> <span class="token number">0.3f</span><span class="token punctuation">,</span> <span class="token number">0.0f</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

Vulkan<span class="token punctuation">.</span>VertexBuffer<span class="token punctuation">.</span>Size <span class="token operator">=</span> <span class="token keyword keyword-sizeof">sizeof</span><span class="token punctuation">(</span>vertex_data<span class="token punctuation">)</span><span class="token punctuation">;</span>

VkBufferCreateInfo buffer_create_info <span class="token operator">=</span> <span class="token punctuation">{</span>
  VK_STRUCTURE_TYPE_BUFFER_CREATE_INFO<span class="token punctuation">,</span>             <span class="token comment">// VkStructureType        sType</span>
  <span class="token keyword keyword-nullptr">nullptr</span><span class="token punctuation">,</span>                                          <span class="token comment">// const void            *pNext</span>
  <span class="token number">0</span><span class="token punctuation">,</span>                                                <span class="token comment">// VkBufferCreateFlags    flags</span>
  Vulkan<span class="token punctuation">.</span>VertexBuffer<span class="token punctuation">.</span>Size<span class="token punctuation">,</span>                         <span class="token comment">// VkDeviceSize           size</span>
  VK_BUFFER_USAGE_VERTEX_BUFFER_BIT<span class="token punctuation">,</span>                <span class="token comment">// VkBufferUsageFlags     usage</span>
  VK_SHARING_MODE_EXCLUSIVE<span class="token punctuation">,</span>                        <span class="token comment">// VkSharingMode          sharingMode</span>
  <span class="token number">0</span><span class="token punctuation">,</span>                                                <span class="token comment">// uint32_t               queueFamilyIndexCount</span>
  <span class="token keyword keyword-nullptr">nullptr</span>                                           <span class="token comment">// const uint32_t        *pQueueFamilyIndices</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword keyword-if">if</span><span class="token punctuation">(</span> <span class="token function">vkCreateBuffer</span><span class="token punctuation">(</span> <span class="token function">GetDevice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>buffer_create_info<span class="token punctuation">,</span> <span class="token keyword keyword-nullptr">nullptr</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>Vulkan<span class="token punctuation">.</span>VertexBuffer<span class="token punctuation">.</span>Handle <span class="token punctuation">)</span> <span class="token operator">!=</span> VK_SUCCESS <span class="token punctuation">)</span> <span class="token punctuation">{</span>
  std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Could not create a vertex buffer!"</span> <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
  <span class="token keyword keyword-return">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre></div>

<p><strong>9.</strong> <em>Tutorial04.cpp, function CreateVertexBuffer()</em></p>

<p>At the beginning of the CreateVertexBuffer() function we define a set
 of values for position and color attributes. First, four position 
components are defined for first vertex, next four color components for 
the same vertex, after that four components of a position attribute for 
second vertex are specified, next a color values for the same vertex, 
after that position and color for third and fourth vertices. The size of
 this array is used to define the size of a buffer. Remember though that
 internally graphics driver may require more storage for a buffer than 
the size requested by an application.</p>

<p>Next we define a variable of VkBufferCreateInfo type. It is a structure with the following fields:</p>

<ul>
	<li>sType – Type of the structure, which should be set to VK_STRUCTURE_TYPE_BUFFER_CREATE_INFO value.</li>
	<li>pNext – Parameter reserved for extensions.</li>
	<li>flags – Parameter defining additional creation parameters. Right 
now it allows creation of a buffer backed by a sparse memory (something 
similar to a mega texture). As we don’t want to use sparse memory, we 
can set this parameter to zero.</li>
	<li>size – Size, in bytes, of a buffer.</li>
	<li>usage – This parameter defines how we intend to use this buffer in 
future. We can specify that we want to use buffer as a uniform buffer, 
index buffer, source of data for transfer (copy) operations, and so on. 
Here we intend to use this buffer as a vertex buffer. Remember that we 
can’t use a buffer for a purpose that is not defined during buffer 
creation.</li>
	<li>sharingMode – Sharing mode, similarly to swapchain images, defines 
whether a given buffer can be accessed by multiple queues at the same 
time (concurrent sharing mode) or by just a single queue (exclusive 
sharing mode). If a concurrent sharing mode is specified, we must 
provide indices of all queues that will have access to a buffer. If we 
want to define an exclusive sharing mode, we can still reference this 
buffer in different queues, but only in one at a time. If we want to use
 a buffer in a different queue (submit commands that reference this 
buffer to another queue), we need to specify buffer memory barrier that 
transitions buffer’s ownership from one queue to another.</li>
	<li>queueFamilyIndexCount – Number of queue indices in pQueueFamilyIndices array (only when concurrent sharing mode is specified).</li>
	<li>pQueueFamilyIndices – Array with indices of all queues that will 
reference buffer (only when concurrent sharing mode is specified).</li>
</ul>

<p>To create a buffer we must call <strong>vkCreateBuffer()</strong> function.</p>

<h3>Buffer Memory Allocation<a class="inpage-nav-anchor" id="inpage-nav-3-undefined"></a></h3>

<p>We next create a memory object that will back the buffer’s storage.</p>
<div class="code-toolbar"><pre class=" language-cpp line-numbers"><div class="toolbar" style="float: right;"><div class="toolbar-item"><a>Copy Code</a></div></div><code class=" language-cpp">VkMemoryRequirements buffer_memory_requirements<span class="token punctuation">;</span>
<span class="token function">vkGetBufferMemoryRequirements</span><span class="token punctuation">(</span> <span class="token function">GetDevice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> buffer<span class="token punctuation">,</span> <span class="token operator">&amp;</span>buffer_memory_requirements <span class="token punctuation">)</span><span class="token punctuation">;</span>

VkPhysicalDeviceMemoryProperties memory_properties<span class="token punctuation">;</span>
<span class="token function">vkGetPhysicalDeviceMemoryProperties</span><span class="token punctuation">(</span> <span class="token function">GetPhysicalDevice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>memory_properties <span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword keyword-for">for</span><span class="token punctuation">(</span> <span class="token keyword keyword-uint32_t">uint32_t</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> memory_properties<span class="token punctuation">.</span>memoryTypeCount<span class="token punctuation">;</span> <span class="token operator">++</span>i <span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword keyword-if">if</span><span class="token punctuation">(</span> <span class="token punctuation">(</span>buffer_memory_requirements<span class="token punctuation">.</span>memoryTypeBits <span class="token operator">&amp;</span> <span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">&lt;&lt;</span> i<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span>
    <span class="token punctuation">(</span>memory_properties<span class="token punctuation">.</span>memoryTypes<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>propertyFlags <span class="token operator">&amp;</span> VK_MEMORY_PROPERTY_HOST_VISIBLE_BIT<span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>

    VkMemoryAllocateInfo memory_allocate_info <span class="token operator">=</span> <span class="token punctuation">{</span>
      VK_STRUCTURE_TYPE_MEMORY_ALLOCATE_INFO<span class="token punctuation">,</span>     <span class="token comment">// VkStructureType                        sType</span>
      <span class="token keyword keyword-nullptr">nullptr</span><span class="token punctuation">,</span>                                    <span class="token comment">// const void                            *pNext</span>
      buffer_memory_requirements<span class="token punctuation">.</span>size<span class="token punctuation">,</span>            <span class="token comment">// VkDeviceSize                           allocationSize</span>
      i                                           <span class="token comment">// uint32_t                               memoryTypeIndex</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token keyword keyword-if">if</span><span class="token punctuation">(</span> <span class="token function">vkAllocateMemory</span><span class="token punctuation">(</span> <span class="token function">GetDevice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>memory_allocate_info<span class="token punctuation">,</span> <span class="token keyword keyword-nullptr">nullptr</span><span class="token punctuation">,</span> memory <span class="token punctuation">)</span> <span class="token operator">==</span> VK_SUCCESS <span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword keyword-return">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword keyword-return">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre></div>

<p><strong>10.</strong> <em>Tutorial04.cpp, function AllocateBufferMemory()</em></p>

<p>First we must check what the memory requirements for a created buffer are. We do this by calling the <strong>vkGetBufferMemoryRequirements()</strong>
 function. It stores parameters for memory creation in a variable that 
we provided the address of in the last parameter. This variable must be 
of type VkMemoryRequirements and it contains information about required 
size, memory alignment, and supported memory types. What are memory 
types?</p>

<p>Each device may have and expose different memory types—heaps of 
various sizes that have different properties. One memory type may be a 
device’s local memory located on the GDDR chips (thus very, very fast). 
Another may be a shared memory that is visible both for a graphics card 
and a CPU. Both the graphics card and application may have access to 
this memory, but such memory type is slower than the device local-only 
memory (which is accessible only to a graphics card).</p>

<p>To check what memory heaps and types are available, we need to call the <strong>vkGetPhysicalDeviceMemoryProperties()</strong>
 function, which stores information about memory in a variable of type 
VkPhysicalDeviceMemoryProperties. It contains the following information:</p>

<ul>
	<li>memoryHeapCount – Number of memory heaps exposed by a given device.</li>
	<li>memoryHeaps – An array of memory heaps. Each heap represents a memory of different size and properties.</li>
	<li>memoryTypeCount – Number of different memory types exposed by a given device.</li>
	<li>memoryTypes – An array of memory types. Each element describes 
specific memory properties and contains an index of a heap that has 
these particular properties.</li>
</ul>

<p>Before we can allocate a memory for a given buffer, we need to check 
which memory type fulfills a buffer’s memory requirements. If we have 
additional, specific needs, we can also check them. For all of this, we 
iterate over all available memory types. Buffer memory requirements have
 a field called memoryTypeBits and if a bit on a given index is set in 
this field, it means that for a given buffer we can allocate a memory of
 the type represented by that index. But we must remember that while 
there must always be a memory type that fulfills buffer’s memory 
requirements, it may not support some other, specific needs. In this 
case we need to look for another memory type or change our additional 
requirements.</p>

<p>Here, our additional requirement is that memory needs to be host 
visible. This means that application can map this memory and get access 
to it—read it or write data to it. Such memory is usually slower than 
the device local-only memory, but this way we can easily upload data for
 our vertex attributes. The next tutorial will show how to use device 
local-only memory for better performance.</p>

<p>Fortunately, the host visible requirement is popular, and it should 
be easy to find a memory type that supports both the buffer’s memory 
requirements and the host visible property. We then prepare a variable 
of type VkMemoryAllocateInfo and fill all its fields:</p>

<ul>
	<li>sType – Type of the structure, here set to VK_STRUCTURE_TYPE_MEMORY_ALLOCATE_INFO.</li>
	<li>pNext – Pointer reserved for extensions.</li>
	<li>allocationSize – Minimum required memory size that should be allocated.</li>
	<li>memoryTypeIndex – Index of a memory type we want to use for a 
created memory object. It is the index of one of bits that are set (has 
value of one) in buffer’s memory requirement.</li>
</ul>

<p>After we fill such a structure we call <strong>vkAllocateMemory()</strong> and check whether the memory object allocation succeeded.</p>

<h3>Binding a Buffer’s Memory<a class="inpage-nav-anchor" id="inpage-nav-3-1"></a></h3>

<p>When we are done creating a memory object, we must bind it to our 
buffer. Without it, there will be no storage space in a buffer and we 
won’t be able to store any data in it.</p>
<div class="code-toolbar"><pre class=" language-cpp line-numbers"><div class="toolbar" style="float: right;"><div class="toolbar-item"><a>Copy Code</a></div></div><code class=" language-cpp"><span class="token keyword keyword-if">if</span><span class="token punctuation">(</span> <span class="token operator">!</span><span class="token function">AllocateBufferMemory</span><span class="token punctuation">(</span> Vulkan<span class="token punctuation">.</span>VertexBuffer<span class="token punctuation">.</span>Handle<span class="token punctuation">,</span> <span class="token operator">&amp;</span>Vulkan<span class="token punctuation">.</span>VertexBuffer<span class="token punctuation">.</span><span class="token type-opencl-host-c++ keyword">Memory</span> <span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
  std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Could not allocate memory for a vertex buffer!"</span> <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
  <span class="token keyword keyword-return">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword keyword-if">if</span><span class="token punctuation">(</span> <span class="token function">vkBindBufferMemory</span><span class="token punctuation">(</span> <span class="token function">GetDevice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> Vulkan<span class="token punctuation">.</span>VertexBuffer<span class="token punctuation">.</span>Handle<span class="token punctuation">,</span> Vulkan<span class="token punctuation">.</span>VertexBuffer<span class="token punctuation">.</span><span class="token type-opencl-host-c++ keyword">Memory</span><span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">)</span> <span class="token operator">!=</span> VK_SUCCESS <span class="token punctuation">)</span> <span class="token punctuation">{</span>
  std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Could not bind memory for a vertex buffer!"</span> <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
  <span class="token keyword keyword-return">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre></div>

<p><strong>11.</strong> <em>Tutorial04.cpp, function CreateVertexBuffer()</em></p>

<p>AllocateBufferMemory() is a function that allocates a memory object. 
It was presented earlier. When a memory object is created, we bind it to
 the buffer by calling the <strong>vkBindBufferMemory()</strong> 
function. During the call we must specify a handle to a buffer, handle 
to a memory object, and an offset. Offset is very important and requires
 some additional explanation.</p>

<p>When we queried for buffer memory requirement, we acquired 
information about required size, memory type, and alignment. Different 
buffer usages may require different memory alignment. The beginning of a
 memory object (offset of 0) satisfies all alignments. This means that 
all memory objects are created at addresses that fulfill the 
requirements of all different usages. So when we specify a zero offset, 
we don’t have to worry about anything.</p>

<p>But we can create larger memory object and use it as a storage space 
for multiple buffers (or images). This, in fact, is the recommended 
behavior. Creating larger memory objects means we are creating fewer 
memory objects. This allows driver to track fewer objects in general. 
Memory objects must be tracked by a driver because of OS requirements 
and security measures. Larger memory objects don’t cause big problems 
with memory fragmentation. Finally, we should allocate larger memory 
amounts and keep similar objects in them to increase cache hits and thus
 improve performance of our application.</p>

<p>But when we allocate larger memory objects and bind them to multiple 
buffers (or images), not all of them can be bound at offset zero. Only 
one can be bound at this offset, others must be bound further away, 
after a space used by the first buffer (or image). So the offset for the
 second, and all other buffers bound to the same memory object, must 
meet alignment requirements reported by the query. And we must remember 
it. That’s why alignment member is important.</p>

<p>When our buffer is created and memory for it is allocated and bound, we can fill the buffer with data for vertex attributes.</p>

<h3>Uploading Vertex Data<a class="inpage-nav-anchor" id="inpage-nav-3-2"></a></h3>

<p>We have created a buffer and we have bound a memory that is host 
visible. This means we can map this memory, acquire a pointer to this 
memory, and use this pointer to copy data from our application to the 
buffer itself (similar to the OpenGL’s glBufferData() function):</p>
<div class="code-toolbar"><pre class=" language-cpp line-numbers"><div class="toolbar" style="float: right;"><div class="toolbar-item"><a>Copy Code</a></div></div><code class=" language-cpp"><span class="token keyword keyword-void">void</span> <span class="token operator">*</span>vertex_buffer_memory_pointer<span class="token punctuation">;</span>
<span class="token keyword keyword-if">if</span><span class="token punctuation">(</span> <span class="token function">vkMapMemory</span><span class="token punctuation">(</span> <span class="token function">GetDevice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> Vulkan<span class="token punctuation">.</span>VertexBuffer<span class="token punctuation">.</span><span class="token type-opencl-host-c++ keyword">Memory</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> Vulkan<span class="token punctuation">.</span>VertexBuffer<span class="token punctuation">.</span>Size<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>vertex_buffer_memory_pointer <span class="token punctuation">)</span> <span class="token operator">!=</span> VK_SUCCESS <span class="token punctuation">)</span> <span class="token punctuation">{</span>
  std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Could not map memory and upload data to a vertex buffer!"</span> <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
  <span class="token keyword keyword-return">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">memcpy</span><span class="token punctuation">(</span> vertex_buffer_memory_pointer<span class="token punctuation">,</span> vertex_data<span class="token punctuation">,</span> Vulkan<span class="token punctuation">.</span>VertexBuffer<span class="token punctuation">.</span>Size <span class="token punctuation">)</span><span class="token punctuation">;</span>

VkMappedMemoryRange flush_range <span class="token operator">=</span> <span class="token punctuation">{</span>
  VK_STRUCTURE_TYPE_MAPPED_MEMORY_RANGE<span class="token punctuation">,</span>            <span class="token comment">// VkStructureType        sType</span>
  <span class="token keyword keyword-nullptr">nullptr</span><span class="token punctuation">,</span>                                          <span class="token comment">// const void            *pNext</span>
  Vulkan<span class="token punctuation">.</span>VertexBuffer<span class="token punctuation">.</span><span class="token type-opencl-host-c++ keyword">Memory</span><span class="token punctuation">,</span>                       <span class="token comment">// VkDeviceMemory         memory</span>
  <span class="token number">0</span><span class="token punctuation">,</span>                                                <span class="token comment">// VkDeviceSize           offset</span>
  VK_WHOLE_SIZE                                     <span class="token comment">// VkDeviceSize           size</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token function">vkFlushMappedMemoryRanges</span><span class="token punctuation">(</span> <span class="token function">GetDevice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>flush_range <span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">vkUnmapMemory</span><span class="token punctuation">(</span> <span class="token function">GetDevice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> Vulkan<span class="token punctuation">.</span>VertexBuffer<span class="token punctuation">.</span><span class="token type-opencl-host-c++ keyword">Memory</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword keyword-return">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span style="height: 22.5px;"></span><span style="height: 45px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre></div>

<p><strong>12.</strong> <em>Tutorial04.cpp, function CreateVertexBuffer()</em></p>

<p>To map memory, we call the <strong>vkMapMemory()</strong> function. 
In the call we must specify which memory object we want to map and a 
region to access. Region is defined by an offset from the beginning of a
 memory object’s storage and size. After the successful call we acquire a
 pointer. We can use it to copy data from our application to the 
provided memory address. Here we copy vertex data from an array with 
vertex positions and colors.</p>

<p>After a memory copy operation and before we unmap a memory (we don’t 
need to unmap it, we can keep a pointer and this shouldn’t impact 
performance), we need to tell the driver which parts of the memory was 
modified by our operations. This operation is called flushing. Through 
it we specify all memory ranges that our application copied data to. 
Ranges don’t have to be continuous. Ranges are defined by an array of 
VkMappedMemoryRange elements which contain these fields:</p>

<ul>
	<li>sType – Structure type, here equal to VK_STRUCTURE_TYPE_MAPPED_MEMORY_RANGE.</li>
	<li>pNext – Pointer reserved for extensions.</li>
	<li>memory – Handle of a mapped and modified memory object.</li>
	<li>offset – Offset (from the beginning of a given memory object’s storage) at which a given range starts.</li>
	<li>size – Size, in bytes, of an affected region. If the whole memory, 
from an offset to the end, was modified, we can use the special value of
 VK_WHOLE_SIZE.</li>
</ul>

<p>When we define all memory ranges that should be flashed, we can call the <strong>vkFlushMappedMemoryRanges()</strong>
 function. After that, the driver will know which parts were modified 
and will reload them (that is, refresh cache). Reloading usually occurs 
on barriers. After modifying a buffer, we should set a buffer memory 
barrier, which will tell the driver that some operations influenced a 
buffer and it should be refreshed. But, fortunately, in this case such a
 barrier is placed implicitly by the driver on a submission of a command
 buffer that references the given buffer and no additional operations 
are required. Now we can use this buffer during rendering commands 
recording.</p>

<h2>Rendering Resources Creation<a class="inpage-nav-anchor" id="inpage-nav-4"></a></h2>

<p>We now must prepare resources required for a command buffer 
recording. In previous tutorials we have recorded one static command 
buffer for each swapchain image. Here we will reorganize the rendering 
code. We will still display a simple, static scene, but the approach 
presented here is useful in real-life scenarios, where displayed scenes 
are dynamic.</p>

<p>To record command buffers and submit them to queue in an efficient 
way, we need four types of resources: command buffers, semaphores, 
fences and framebuffers. Semaphores, as we already discussed, are used 
for internal queue synchronization. Fences, on the other hand, allow the
 application to check if some specific situation occurred, e.g. if 
command buffer’s execution after it was submitted to queue, has 
finished. If necessary, application can wait on a fence, until it is 
signaled. In general, semaphores are used to synchronize queues (GPU) 
and fences are used to synchronize application (CPU).</p>

<p>To render a single frame of animation we need (at least) one command 
buffer, two semaphores—one for a swapchain image acquisition (image 
available semaphore) and the other to signal that presentation may occur
 (rendering a finished semaphore)—a fence, and a framebuffer. The fence 
is used later to check whether we can rerecord a given command buffer. 
We will keep several numbers of such rendering resources, which we can 
call a <em>virtual frame</em>. The number of these <em>virtual frames</em>
 (consisting of a command buffer, two semaphores, a fence, and a 
framebuffer) should be independent of a number of swapchain images.</p>

<p>The rendering algorithm progresses like this: We record rendering commands to the first <em>virtual frame</em>
 and then submit it to a queue. Next we record another frame (command 
buffer) and submit it to queue. We do this until we are out of all <em>virtual frames</em>.
 At this point we will start reusing frames by taking the oldest (least 
recently submitted) command buffer and rerecording it again. Then we 
will use another command buffer, and so on.</p>

<p>This is where the fences come in. We are not allowed to record a 
command buffer that has been submitted to a queue until its execution in
 the queue is finished. During command buffer recording, we can use the 
“simultaneous use” flag, which allows us to record or resubmit a command
 buffer that has already been submitted. This may impact performance 
though. A better way is to use fences and check whether a command buffer
 is not used any more. If a graphics card is still processing a command 
buffer, we can wait on a fence associated with a given command buffer, 
or use this additional time for other purposes, like improved AI 
calculations, and after some time check again to see whether a fence is 
signaled.</p>

<p>How many <em>virtual frames</em> should we have? One is not enough. 
When we record and submit a single command buffer, we immediately wait 
until we can rerecord it. It is a waste of time of both the CPU and the 
GPU. The GPU is usually faster, so waiting on a CPU causes more waiting 
on a GPU. We should keep the GPU as busy as possible. That is why thin 
APIs like Vulkan were created. Using two <em>virtual frames</em> gives huge performance gain, as there is much less waiting both on the CPU and the GPU. Adding a third <em>virtual frame</em>
 gives additional performance gain, but the increase isn’t as big. Using
 four or more groups of rendering resource doesn’t make sense, as the 
performance gain is negligible (of course this may depend on the 
complexity of the rendered scene and calculations performed by the 
CPU-like physics or AI). When we increase the number of <em>virtual frames</em> we also increase the input lag, as we present a frame that’s one to three frames behind the CPU. So two or three <em>virtual frames</em> seems to be the most reasonable compromise between performance, memory usage, and input lag.</p>

<p>You may wonder why the number of <em>virtual frames</em> shouldn’t be
 connected with the number of swapchain images. This approach may 
influence the behavior of our application. When we create a swapchain, 
we ask for the minimal required number of images, but the driver is 
allowed to create more. So different hardware vendors may implement 
drivers that offer different numbers of swapchain images, even for the 
same requirements (present mode and minimal number of images). When we 
connect the number of <em>virtual frames </em>with a number of swapchain images, our application will use only two <em>virtual frames </em>on one graphics card, but four <em>virtual frames</em>
 on another graphics card. This may influence both performance and 
mentioned input lag. It’s not a desired behavior. By keeping the number 
of <em>virtual frames</em> fixed, we can control our rendering algorithm
 and fine-tune it to our needs, that is, balance the time spent on 
rendering and AI or physics calculations.</p>

<h3>Command Pool Creation<a class="inpage-nav-anchor" id="inpage-nav-4-undefined"></a></h3>

<p>Before we can allocate a command buffer, we first need to create a command pool.</p>
<div class="code-toolbar"><pre class=" language-cpp line-numbers"><div class="toolbar" style="float: right;"><div class="toolbar-item"><a>Copy Code</a></div></div><code class=" language-cpp">VkCommandPoolCreateInfo cmd_pool_create_info<span class="token operator">=</span> <span class="token punctuation">{</span>
  VK_STRUCTURE_TYPE_COMMAND_POOL_CREATE_INFO<span class="token punctuation">,</span>       <span class="token comment">// VkStructureType                sType</span>
  <span class="token keyword keyword-nullptr">nullptr</span><span class="token punctuation">,</span>                                          <span class="token comment">// const void                    *pNext</span>
  VK_COMMAND_POOL_CREATE_RESET_COMMAND_BUFFER_BIT <span class="token operator">|</span> <span class="token comment">// VkCommandPoolCreateFlags       flags</span>
  VK_COMMAND_POOL_CREATE_TRANSIENT_BIT<span class="token punctuation">,</span>
  queue_family_index                                <span class="token comment">// uint32_t                       queueFamilyIndex</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword keyword-if">if</span><span class="token punctuation">(</span> <span class="token function">vkCreateCommandPool</span><span class="token punctuation">(</span> <span class="token function">GetDevice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>cmd_pool_create_info<span class="token punctuation">,</span> <span class="token keyword keyword-nullptr">nullptr</span><span class="token punctuation">,</span> pool <span class="token punctuation">)</span> <span class="token operator">!=</span> VK_SUCCESS <span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword keyword-return">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword keyword-return">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre></div>

<p><strong>13.</strong> <em>Tutorial04.cpp, function CreateCommandPool()</em></p>

<p>The command pool is created by calling <strong>vkCreateCommandPool()</strong>,
 which requires us to provide a pointer to a variable of type 
VkCommandPoolCreateInfo. The code remains mostly unchanged, compared to 
previous tutorials. But this time, two additional flags are added for 
command pool creation:</p>

<ul>
	<li>VK_COMMAND_POOL_CREATE_RESET_COMMAND_BUFFER_BIT – Indicates that 
command buffers, allocated from this pool, may be reset individually. 
Normally, without this flag, we can’t rerecord the same command buffer 
multiple times. It must be reset first. And, what’s more, command 
buffers created from one pool may be reset only all at once. Specifying 
this flag allows us to reset command buffers individually, and (even 
better) it is done implicitly by calling the <strong>vkBeginCommandBuffer()</strong> function.</li>
	<li>VK_COMMAND_POOL_CREATE_TRANSIENT_BIT – This flag tells the driver 
that command buffers allocated from this pool will be living for a short
 amount of time, they will be often recorded and reset (re-recorded). 
This information helps optimize command buffer allocation and perform it
 more optimally.</li>
</ul>

<h3>Command Buffer Allocation<a class="inpage-nav-anchor" id="inpage-nav-4-1"></a></h3>

<p>Allocating command buffers remains the same as previously.</p>
<div class="code-toolbar"><pre class=" language-cpp line-numbers"><div class="toolbar" style="float: right;"><div class="toolbar-item"><a>Copy Code</a></div></div><code class=" language-cpp"><span class="token keyword keyword-for">for</span><span class="token punctuation">(</span> size_t i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> Vulkan<span class="token punctuation">.</span>RenderingResources<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>i <span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword keyword-if">if</span><span class="token punctuation">(</span> <span class="token operator">!</span><span class="token function">AllocateCommandBuffers</span><span class="token punctuation">(</span> Vulkan<span class="token punctuation">.</span>CommandPool<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>Vulkan<span class="token punctuation">.</span>RenderingResources<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>CommandBuffer <span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
    std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Could not allocate command buffer!"</span> <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
    <span class="token keyword keyword-return">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword keyword-return">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre></div>

<p><strong>14.</strong> <em>Tutorial04.cpp, function CreateCommandBuffers()</em></p>

<p>The only change is that command buffers are gathered into a vector of
 rendering resources. Each rendering resource structure contains a 
command buffer, image available semaphore, rendering finished semaphore,
 a fence and a framebuffer. Command buffers are allocated in a loop. The
 number of elements in a rendering resources vector is chosen 
arbitrarily. For this tutorial it is equal to three.</p>

<h3>Semaphore Creation<a class="inpage-nav-anchor" id="inpage-nav-4-2"></a></h3>

<p>The code responsible for creating a semaphore is simple and the same as previously shown:</p>
<div class="code-toolbar"><pre class=" language-cpp line-numbers"><div class="toolbar" style="float: right;"><div class="toolbar-item"><a>Copy Code</a></div></div><code class=" language-cpp">VkSemaphoreCreateInfo semaphore_create_info<span class="token operator">=</span> <span class="token punctuation">{</span>
  VK_STRUCTURE_TYPE_SEMAPHORE_CREATE_INFO<span class="token punctuation">,</span>      <span class="token comment">// VkStructureType          sType</span>
  <span class="token keyword keyword-nullptr">nullptr</span><span class="token punctuation">,</span>                                      <span class="token comment">// const void*              pNext</span>
  <span class="token number">0</span>                                             <span class="token comment">// VkSemaphoreCreateFlags   flags</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword keyword-for">for</span><span class="token punctuation">(</span> size_t i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> Vulkan<span class="token punctuation">.</span>RenderingResources<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>i <span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword keyword-if">if</span><span class="token punctuation">(</span> <span class="token punctuation">(</span><span class="token function">vkCreateSemaphore</span><span class="token punctuation">(</span> <span class="token function">GetDevice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>semaphore_create_info<span class="token punctuation">,</span> <span class="token keyword keyword-nullptr">nullptr</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>Vulkan<span class="token punctuation">.</span>RenderingResources<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>ImageAvailableSemaphore <span class="token punctuation">)</span> <span class="token operator">!=</span> VK_SUCCESS<span class="token punctuation">)</span> <span class="token operator">||</span>
    <span class="token punctuation">(</span><span class="token function">vkCreateSemaphore</span><span class="token punctuation">(</span> <span class="token function">GetDevice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>semaphore_create_info<span class="token punctuation">,</span> <span class="token keyword keyword-nullptr">nullptr</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>Vulkan<span class="token punctuation">.</span>RenderingResources<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>FinishedRenderingSemaphore <span class="token punctuation">)</span> <span class="token operator">!=</span> VK_SUCCESS<span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
    std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Could not create semaphores!"</span> <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
    <span class="token keyword keyword-return">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword keyword-return">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 45px;"></span><span style="height: 45px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre></div>

<p><strong>15.</strong> <em>Tutorial04.cpp, function CreateSemaphores()</em></p>

<h3>Fence Creation<a class="inpage-nav-anchor" id="inpage-nav-4-3"></a></h3>

<p>Here is the code responsible for creating fence objects:</p>
<div class="code-toolbar"><pre class=" language-cpp line-numbers"><div class="toolbar" style="float: right;"><div class="toolbar-item"><a>Copy Code</a></div></div><code class=" language-cpp">VkFenceCreateInfo fence_create_info<span class="token operator">=</span> <span class="token punctuation">{</span>
  VK_STRUCTURE_TYPE_FENCE_CREATE_INFO<span class="token punctuation">,</span>              <span class="token comment">// VkStructureType                sType</span>
  <span class="token keyword keyword-nullptr">nullptr</span><span class="token punctuation">,</span>                                          <span class="token comment">// const void                    *pNext</span>
  VK_FENCE_CREATE_SIGNALED_BIT                      <span class="token comment">// VkFenceCreateFlags             flags</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword keyword-for">for</span><span class="token punctuation">(</span> size_t i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> Vulkan<span class="token punctuation">.</span>RenderingResources<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>i <span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword keyword-if">if</span><span class="token punctuation">(</span> <span class="token function">vkCreateFence</span><span class="token punctuation">(</span> <span class="token function">GetDevice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>fence_create_info<span class="token punctuation">,</span> <span class="token keyword keyword-nullptr">nullptr</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>Vulkan<span class="token punctuation">.</span>RenderingResources<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>Fence <span class="token punctuation">)</span> <span class="token operator">!=</span> VK_SUCCESS <span class="token punctuation">)</span> <span class="token punctuation">{</span>
    std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Could not create a fence!"</span> <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
    <span class="token keyword keyword-return">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword keyword-return">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 45px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre></div>

<p><strong>16.</strong> <em>Tutorial04.cpp, function CreateFences()</em></p>

<p>To create a fence object we call the <strong>vkCreateFence()</strong>
 function. It accepts, among other parameters, a pointer to a variable 
of type VkFenceCreateInfo, which has the following members:</p>

<ul>
	<li>sType – Type of the structure. Here it should be set to VK_STRUCTURE_TYPE_FENCE_CREATE_INFO.</li>
	<li>pNext – Pointer reserved for extensions.</li>
	<li>flags – Right now this parameter allows for creating a fence that is already signaled.</li>
</ul>

<p>A fence may have two states: signaled and unsignaled. The application
 checks whether a given fence is in a signaled state, or it may wait on a
 fence until the fence gets signaled. Signaling is done by the GPU after
 all operations submitted to the queue are processed. When we submit 
command buffers, we can provide a fence that will be signaled when a 
queue has finished executing all commands that were issued in this one 
submit operation. After the fence is signaled, it is the application’s 
responsibility to reset it to an unsignaled state.</p>

<p>Why create a fence that is already signaled? Our rendering algorithm 
will record commands to the first command buffer, then to the second 
command buffer, after that to the third, and then once again to the 
first (after its execution in a queue has ended). We use fences to check
 whether we can record a given command buffer once again. But what about
 the first recording? We don’t want to keep separate code paths for the 
first command buffer recording and for the following recording 
operations. So when we issue a command buffer recording for the first 
time, we also check whether a fence is already signaled. But because we 
didn’t submit a given command buffer, the fence associated with it can’t
 become signaled as a result of the finished execution. So the fence 
needs to be created in an already signaled state. This way, for the 
first time, we won’t have to wait for it to become signaled (as it is 
already signaled), but after the check we will reset it and immediately 
go to the recording code. After that we submit a command buffer and 
provide the same fence, which will get signaled by the queue when 
operations are done. The next time, when we want to rerecord rendering 
commands to the same command buffer, we can do the same operations: wait
 on the fence, reset it, and then start command buffer recording.</p>

<h2>Drawing<a class="inpage-nav-anchor" id="inpage-nav-5"></a></h2>

<p>Now we are nearly ready to record rendering operations. We are 
recording each command buffer just before it is submitted to the queue. 
We record one command buffer and submit it, then the next command buffer
 and submit it, then yet another one. After that we take the first 
command buffer, check whether we can use it, and we record it and submit
 it to the queue.</p>
<div class="code-toolbar"><pre class=" language-cpp line-numbers"><div class="toolbar" style="float: right;"><div class="toolbar-item"><a>Copy Code</a></div></div><code class=" language-cpp"><span class="token keyword keyword-static">static</span> size_t           resource_index <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
RenderingResourcesData ¤t_rendering_resource <span class="token operator">=</span> Vulkan<span class="token punctuation">.</span>RenderingResources<span class="token punctuation">[</span>resource_index<span class="token punctuation">]</span><span class="token punctuation">;</span>
VkSwapchainKHR          swap_chain <span class="token operator">=</span> <span class="token function">GetSwapChain</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>Handle<span class="token punctuation">;</span>
<span class="token keyword keyword-uint32_t">uint32_t</span>                image_index<span class="token punctuation">;</span>

resource_index <span class="token operator">=</span> <span class="token punctuation">(</span>resource_index <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">%</span> VulkanTutorial04Parameters<span class="token operator">::</span>ResourcesCount<span class="token punctuation">;</span>

<span class="token keyword keyword-if">if</span><span class="token punctuation">(</span> <span class="token function">vkWaitForFences</span><span class="token punctuation">(</span> <span class="token function">GetDevice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> ¤t_rendering_resource<span class="token punctuation">.</span>Fence<span class="token punctuation">,</span> VK_FALSE<span class="token punctuation">,</span> <span class="token number">1000000000</span> <span class="token punctuation">)</span> <span class="token operator">!=</span> VK_SUCCESS <span class="token punctuation">)</span> <span class="token punctuation">{</span>
  std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Waiting for fence takes too long!"</span> <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
  <span class="token keyword keyword-return">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">vkResetFences</span><span class="token punctuation">(</span> <span class="token function">GetDevice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> ¤t_rendering_resource<span class="token punctuation">.</span>Fence <span class="token punctuation">)</span><span class="token punctuation">;</span>

VkResult result <span class="token operator">=</span> <span class="token function">vkAcquireNextImageKHR</span><span class="token punctuation">(</span> <span class="token function">GetDevice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> swap_chain<span class="token punctuation">,</span> UINT64_MAX<span class="token punctuation">,</span> current_rendering_resource<span class="token punctuation">.</span>ImageAvailableSemaphore<span class="token punctuation">,</span> VK_NULL_HANDLE<span class="token punctuation">,</span> <span class="token operator">&amp;</span>image_index <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword keyword-switch">switch</span><span class="token punctuation">(</span> result <span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword keyword-case">case</span> VK_SUCCESS<span class="token operator">:</span>
  <span class="token keyword keyword-case">case</span> VK_SUBOPTIMAL_KHR<span class="token operator">:</span>
    <span class="token keyword keyword-break">break</span><span class="token punctuation">;</span>
  <span class="token keyword keyword-case">case</span> VK_ERROR_OUT_OF_DATE_KHR<span class="token operator">:</span>
    <span class="token keyword keyword-return">return</span> <span class="token function">OnWindowSizeChanged</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword keyword-default">default</span><span class="token operator">:</span>
    std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Problem occurred during swap chain image acquisition!"</span> <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
    <span class="token keyword keyword-return">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword keyword-if">if</span><span class="token punctuation">(</span> <span class="token operator">!</span><span class="token function">PrepareFrame</span><span class="token punctuation">(</span> current_rendering_resource<span class="token punctuation">.</span>CommandBuffer<span class="token punctuation">,</span> <span class="token function">GetSwapChain</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>Images<span class="token punctuation">[</span>image_index<span class="token punctuation">]</span><span class="token punctuation">,</span> current_rendering_resource<span class="token punctuation">.</span>Framebuffer <span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword keyword-return">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

VkPipelineStageFlags wait_dst_stage_mask <span class="token operator">=</span> VK_PIPELINE_STAGE_COLOR_ATTACHMENT_OUTPUT_BIT<span class="token punctuation">;</span>
VkSubmitInfo submit_info <span class="token operator">=</span> <span class="token punctuation">{</span>
  VK_STRUCTURE_TYPE_SUBMIT_INFO<span class="token punctuation">,</span>                          <span class="token comment">// VkStructureType              sType</span>
  <span class="token keyword keyword-nullptr">nullptr</span><span class="token punctuation">,</span>                                                <span class="token comment">// const void                  *pNext</span>
  <span class="token number">1</span><span class="token punctuation">,</span>                                                      <span class="token comment">// uint32_t                     waitSemaphoreCount</span>
  ¤t_rendering_resource<span class="token punctuation">.</span>ImageAvailableSemaphore<span class="token punctuation">,</span>    <span class="token comment">// const VkSemaphore           *pWaitSemaphores</span>
  <span class="token operator">&amp;</span>wait_dst_stage_mask<span class="token punctuation">,</span>                                   <span class="token comment">// const VkPipelineStageFlags  *pWaitDstStageMask;</span>
  <span class="token number">1</span><span class="token punctuation">,</span>                                                      <span class="token comment">// uint32_t                     commandBufferCount</span>
  ¤t_rendering_resource<span class="token punctuation">.</span>CommandBuffer<span class="token punctuation">,</span>              <span class="token comment">// const VkCommandBuffer       *pCommandBuffers</span>
  <span class="token number">1</span><span class="token punctuation">,</span>                                                      <span class="token comment">// uint32_t                     signalSemaphoreCount</span>
  ¤t_rendering_resource<span class="token punctuation">.</span>FinishedRenderingSemaphore  <span class="token comment">// const VkSemaphore           *pSignalSemaphores</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword keyword-if">if</span><span class="token punctuation">(</span> <span class="token function">vkQueueSubmit</span><span class="token punctuation">(</span> <span class="token function">GetGraphicsQueue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>Handle<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>submit_info<span class="token punctuation">,</span> current_rendering_resource<span class="token punctuation">.</span>Fence <span class="token punctuation">)</span> <span class="token operator">!=</span> VK_SUCCESS <span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword keyword-return">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

VkPresentInfoKHR present_info <span class="token operator">=</span> <span class="token punctuation">{</span>
  VK_STRUCTURE_TYPE_PRESENT_INFO_KHR<span class="token punctuation">,</span>                     <span class="token comment">// VkStructureType              sType</span>
  <span class="token keyword keyword-nullptr">nullptr</span><span class="token punctuation">,</span>                                                <span class="token comment">// const void                  *pNext</span>
  <span class="token number">1</span><span class="token punctuation">,</span>                                                      <span class="token comment">// uint32_t                     waitSemaphoreCount</span>
  ¤t_rendering_resource<span class="token punctuation">.</span>FinishedRenderingSemaphore<span class="token punctuation">,</span> <span class="token comment">// const VkSemaphore           *pWaitSemaphores</span>
  <span class="token number">1</span><span class="token punctuation">,</span>                                                      <span class="token comment">// uint32_t                     swapchainCount</span>
  <span class="token operator">&amp;</span>swap_chain<span class="token punctuation">,</span>                                            <span class="token comment">// const VkSwapchainKHR        *pSwapchains</span>
  <span class="token operator">&amp;</span>image_index<span class="token punctuation">,</span>                                           <span class="token comment">// const uint32_t              *pImageIndices</span>
  <span class="token keyword keyword-nullptr">nullptr</span>                                                 <span class="token comment">// VkResult                    *pResults</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
result <span class="token operator">=</span> <span class="token function">vkQueuePresentKHR</span><span class="token punctuation">(</span> <span class="token function">GetPresentQueue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>Handle<span class="token punctuation">,</span> <span class="token operator">&amp;</span>present_info <span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword keyword-switch">switch</span><span class="token punctuation">(</span> result <span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword keyword-case">case</span> VK_SUCCESS<span class="token operator">:</span>
    <span class="token keyword keyword-break">break</span><span class="token punctuation">;</span>
  <span class="token keyword keyword-case">case</span> VK_ERROR_OUT_OF_DATE_KHR<span class="token operator">:</span>
  <span class="token keyword keyword-case">case</span> VK_SUBOPTIMAL_KHR<span class="token operator">:</span>
    <span class="token keyword keyword-return">return</span> <span class="token function">OnWindowSizeChanged</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword keyword-default">default</span><span class="token operator">:</span>
    std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Problem occurred during image presentation!"</span> <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
    <span class="token keyword keyword-return">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword keyword-return">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 45px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 45px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre></div>

<p><strong>17.</strong> <em>Tutorial04.cpp, function Draw()</em></p>

<p>So first we take the least recently used rendering resource. Then we 
wait until the fence associated with this group is signaled. If it is, 
this means that we can safely take a command buffer and record it. But 
this also means that we can take semaphores used to acquire and present 
an image that was referenced in a given command buffer. We shouldn’t use
 the same semaphore for different purposes or in two different submit 
operations, until the previous submission is finished. The fences 
prevent us from altering both command buffers and semaphores. And as you
 will soon see, framebuffers too.</p>

<p>When a fence is finished, we reset the fence and perform normal 
drawing-related operations: we acquire an image, record operations 
rendering into an acquired image, submit the command buffer, and present
 an image.</p>

<p>After that we take another set of rendering resources and perform 
these same operations. Thanks to keeping three groups of rendering 
resources, three <em>virtual frames</em>, we lower the time wasted on waiting for a fence to be signaled.</p>

<h3>Recording a Command Buffer<a class="inpage-nav-anchor" id="inpage-nav-5-undefined"></a></h3>

<p>A function responsible for recording a command buffer is quite long. 
This time it is even longer, because we use a vertex buffer and a 
dynamic viewport and scissor test. And we also create temporary 
framebuffers!</p>

<p>Framebuffer creation is simple and fast. Keeping framebuffer objects 
along with a swapchain means that we need to recreate them when the 
swapchain needs to be recreated. If our rendering algorithm is 
complicated, we have multiple images and framebuffers associated with 
them. If those images need to have the same size as swapchain images, we
 need to recreate all of them (to include potential size change). So it 
is better and more convenient to create framebuffers on demand. This 
way, they always have the desired size. Framebuffers operate on image 
views, which are created for a given, specific image. When a swapchain 
is recreated, old images are invalid, not existent. So we must recreate 
image views and also framebuffers.</p>

<p>In the “03 – First Triangle” tutorial, we had framebuffers of a fixed
 size and they had to be recreated along with a swapchain. Now we have a
 framebuffer object in each of our <em>virtual frame</em> group of 
resources. Before we record a command buffer, we create a framebuffer 
for an image to which we will be rendering, and of the same size as that
 image. This way, when swapchain is recreated, the size of the next 
frame will be immediately adjusted and a handle of the new swapchain’s 
image and its image view will be used to create a framebuffer.</p>

<p>When we record a command buffer that uses a render pass and 
framebuffer objects, the framebuffer must remain valid for the whole 
time the command buffer is processed by the queue. When we create a new 
framebuffer, we can’t destroy it until commands submitted to a queue are
 finished. But as we are using fences, and we have already waited on a 
fence associated with a given command buffer, we are sure that the 
framebuffer can be safely destroyed. We then create a new framebuffer to
 include potential size and image handle changes.</p>
<div class="code-toolbar"><pre class=" language-cpp line-numbers"><div class="toolbar" style="float: right;"><div class="toolbar-item"><a>Copy Code</a></div></div><code class=" language-cpp"><span class="token keyword keyword-if">if</span><span class="token punctuation">(</span> framebuffer <span class="token operator">!=</span> VK_NULL_HANDLE <span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">vkDestroyFramebuffer</span><span class="token punctuation">(</span> <span class="token function">GetDevice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> framebuffer<span class="token punctuation">,</span> <span class="token keyword keyword-nullptr">nullptr</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

VkFramebufferCreateInfo framebuffer_create_info <span class="token operator">=</span> <span class="token punctuation">{</span>
  VK_STRUCTURE_TYPE_FRAMEBUFFER_CREATE_INFO<span class="token punctuation">,</span>      <span class="token comment">// VkStructureType                sType</span>
  <span class="token keyword keyword-nullptr">nullptr</span><span class="token punctuation">,</span>                                        <span class="token comment">// const void                    *pNext</span>
  <span class="token number">0</span><span class="token punctuation">,</span>                                              <span class="token comment">// VkFramebufferCreateFlags       flags</span>
  Vulkan<span class="token punctuation">.</span>RenderPass<span class="token punctuation">,</span>                              <span class="token comment">// VkRenderPass                   renderPass</span>
  <span class="token number">1</span><span class="token punctuation">,</span>                                              <span class="token comment">// uint32_t                       attachmentCount</span>
  <span class="token operator">&amp;</span>image_view<span class="token punctuation">,</span>                                    <span class="token comment">// const VkImageView             *pAttachments</span>
  <span class="token function">GetSwapChain</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>Extent<span class="token punctuation">.</span>width<span class="token punctuation">,</span>                    <span class="token comment">// uint32_t                       width</span>
  <span class="token function">GetSwapChain</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>Extent<span class="token punctuation">.</span>height<span class="token punctuation">,</span>                   <span class="token comment">// uint32_t                       height</span>
  <span class="token number">1</span>                                               <span class="token comment">// uint32_t                       layers</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword keyword-if">if</span><span class="token punctuation">(</span> <span class="token function">vkCreateFramebuffer</span><span class="token punctuation">(</span> <span class="token function">GetDevice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>framebuffer_create_info<span class="token punctuation">,</span> <span class="token keyword keyword-nullptr">nullptr</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>framebuffer <span class="token punctuation">)</span> <span class="token operator">!=</span> VK_SUCCESS <span class="token punctuation">)</span> <span class="token punctuation">{</span>
  std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Could not create a framebuffer!"</span> <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
  <span class="token keyword keyword-return">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword keyword-return">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre></div>

<p><strong>18.</strong> <em>Tutorial04.cpp, function CreateFramebuffer()</em></p>

<p>When we create a framebuffer, we take current swapchain extents and image view for an acquired swapchain image.</p>

<p>Next we start recording a command buffer:</p>
<div class="code-toolbar"><pre class=" language-cpp line-numbers"><div class="toolbar" style="float: right;"><div class="toolbar-item"><a>Copy Code</a></div></div><code class=" language-cpp"><span class="token keyword keyword-if">if</span><span class="token punctuation">(</span> <span class="token operator">!</span><span class="token function">CreateFramebuffer</span><span class="token punctuation">(</span> framebuffer<span class="token punctuation">,</span> image_parameters<span class="token punctuation">.</span>View <span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword keyword-return">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

VkCommandBufferBeginInfo command_buffer_begin_info <span class="token operator">=</span> <span class="token punctuation">{</span>
  VK_STRUCTURE_TYPE_COMMAND_BUFFER_BEGIN_INFO<span class="token punctuation">,</span>        <span class="token comment">// VkStructureType                        sType</span>
  <span class="token keyword keyword-nullptr">nullptr</span><span class="token punctuation">,</span>                                            <span class="token comment">// const void                            *pNext</span>
  VK_COMMAND_BUFFER_USAGE_ONE_TIME_SUBMIT_BIT<span class="token punctuation">,</span>        <span class="token comment">// VkCommandBufferUsageFlags              flags</span>
  <span class="token keyword keyword-nullptr">nullptr</span>                                             <span class="token comment">// const VkCommandBufferInheritanceInfo  *pInheritanceInfo</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token function">vkBeginCommandBuffer</span><span class="token punctuation">(</span> command_buffer<span class="token punctuation">,</span> <span class="token operator">&amp;</span>command_buffer_begin_info <span class="token punctuation">)</span><span class="token punctuation">;</span>

VkImageSubresourceRange image_subresource_range <span class="token operator">=</span> <span class="token punctuation">{</span>
  VK_IMAGE_ASPECT_COLOR_BIT<span class="token punctuation">,</span>                          <span class="token comment">// VkImageAspectFlags                     aspectMask</span>
  <span class="token number">0</span><span class="token punctuation">,</span>                                                  <span class="token comment">// uint32_t                               baseMipLevel</span>
  <span class="token number">1</span><span class="token punctuation">,</span>                                                  <span class="token comment">// uint32_t                               levelCount</span>
  <span class="token number">0</span><span class="token punctuation">,</span>                                                  <span class="token comment">// uint32_t                               baseArrayLayer</span>
  <span class="token number">1</span>                                                   <span class="token comment">// uint32_t                               layerCount</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword keyword-if">if</span><span class="token punctuation">(</span> <span class="token function">GetPresentQueue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>Handle <span class="token operator">!=</span> <span class="token function">GetGraphicsQueue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>Handle <span class="token punctuation">)</span> <span class="token punctuation">{</span>
  VkImageMemoryBarrier barrier_from_present_to_draw <span class="token operator">=</span> <span class="token punctuation">{</span>
    VK_STRUCTURE_TYPE_IMAGE_MEMORY_BARRIER<span class="token punctuation">,</span>           <span class="token comment">// VkStructureType                        sType</span>
    <span class="token keyword keyword-nullptr">nullptr</span><span class="token punctuation">,</span>                                          <span class="token comment">// const void                            *pNext</span>
    VK_ACCESS_MEMORY_READ_BIT<span class="token punctuation">,</span>                        <span class="token comment">// VkAccessFlags                          srcAccessMask</span>
    VK_ACCESS_MEMORY_READ_BIT<span class="token punctuation">,</span>                        <span class="token comment">// VkAccessFlags                          dstAccessMask</span>
    VK_IMAGE_LAYOUT_PRESENT_SRC_KHR<span class="token punctuation">,</span>                  <span class="token comment">// VkImageLayout                          oldLayout</span>
    VK_IMAGE_LAYOUT_PRESENT_SRC_KHR<span class="token punctuation">,</span>                  <span class="token comment">// VkImageLayout                          newLayout</span>
    <span class="token function">GetPresentQueue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>FamilyIndex<span class="token punctuation">,</span>                    <span class="token comment">// uint32_t                               srcQueueFamilyIndex</span>
    <span class="token function">GetGraphicsQueue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>FamilyIndex<span class="token punctuation">,</span>                   <span class="token comment">// uint32_t                               dstQueueFamilyIndex</span>
    image_parameters<span class="token punctuation">.</span>Handle<span class="token punctuation">,</span>                          <span class="token comment">// VkImage                                image</span>
    image_subresource_range                           <span class="token comment">// VkImageSubresourceRange                subresourceRange</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token function">vkCmdPipelineBarrier</span><span class="token punctuation">(</span> command_buffer<span class="token punctuation">,</span> VK_PIPELINE_STAGE_COLOR_ATTACHMENT_OUTPUT_BIT<span class="token punctuation">,</span> VK_PIPELINE_STAGE_COLOR_ATTACHMENT_OUTPUT_BIT<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword keyword-nullptr">nullptr</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword keyword-nullptr">nullptr</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>barrier_from_present_to_draw <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

VkClearValue clear_value <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token punctuation">{</span> <span class="token number">1.0f</span><span class="token punctuation">,</span> <span class="token number">0.8f</span><span class="token punctuation">,</span> <span class="token number">0.4f</span><span class="token punctuation">,</span> <span class="token number">0.0f</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>                         <span class="token comment">// VkClearColorValue                      color</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

VkRenderPassBeginInfo render_pass_begin_info <span class="token operator">=</span> <span class="token punctuation">{</span>
  VK_STRUCTURE_TYPE_RENDER_PASS_BEGIN_INFO<span class="token punctuation">,</span>           <span class="token comment">// VkStructureType                        sType</span>
  <span class="token keyword keyword-nullptr">nullptr</span><span class="token punctuation">,</span>                                            <span class="token comment">// const void                            *pNext</span>
  Vulkan<span class="token punctuation">.</span>RenderPass<span class="token punctuation">,</span>                                  <span class="token comment">// VkRenderPass                           renderPass</span>
  framebuffer<span class="token punctuation">,</span>                                        <span class="token comment">// VkFramebuffer                          framebuffer</span>
  <span class="token punctuation">{</span>                                                   <span class="token comment">// VkRect2D                               renderArea</span>
    <span class="token punctuation">{</span>                                                 <span class="token comment">// VkOffset2D                             offset</span>
      <span class="token number">0</span><span class="token punctuation">,</span>                                                <span class="token comment">// int32_t                                x</span>
      <span class="token number">0</span>                                                 <span class="token comment">// int32_t                                y</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">GetSwapChain</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>Extent<span class="token punctuation">,</span>                            <span class="token comment">// VkExtent2D                             extent;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token number">1</span><span class="token punctuation">,</span>                                                  <span class="token comment">// uint32_t                               clearValueCount</span>
  <span class="token operator">&amp;</span>clear_value                                        <span class="token comment">// const VkClearValue                    *pClearValues</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token function">vkCmdBeginRenderPass</span><span class="token punctuation">(</span> command_buffer<span class="token punctuation">,</span> <span class="token operator">&amp;</span>render_pass_begin_info<span class="token punctuation">,</span> VK_SUBPASS_CONTENTS_INLINE <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 45px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre></div>

<p><strong>19.</strong> <em>Tutorial04.cpp, function PrepareFrame()</em></p>

<p>First we define a variable of type VkCommandBufferBeginInfo and 
specify that a command buffer will be submitted only once. When we 
specify a VK_COMMAND_BUFFER_USAGE_ONE_TIME_SUBMIT_BIT flag, we can’t 
submit a given command buffer more times. After each submission it must 
be reset. But the recording operation resets it due to the 
VK_COMMAND_POOL_CREATE_RESET_COMMAND_BUFFER_BIT flag used during command
 pool creation.</p>

<p>Next we define subresource ranges for image memory barriers. The 
layout transitions of the swapchain images are performed implicitly 
inside a render pass, but if the graphics and presentation queue are 
different, the queue transition must be manually performed.</p>

<p>After that we begin a render pass with the temporary framebuffer object.</p>
<div class="code-toolbar"><pre class=" language-cpp line-numbers"><div class="toolbar" style="float: right;"><div class="toolbar-item"><a>Copy Code</a></div></div><code class=" language-cpp"><span class="token function">vkCmdBindPipeline</span><span class="token punctuation">(</span> command_buffer<span class="token punctuation">,</span> VK_PIPELINE_BIND_POINT_GRAPHICS<span class="token punctuation">,</span> Vulkan<span class="token punctuation">.</span>GraphicsPipeline <span class="token punctuation">)</span><span class="token punctuation">;</span>

VkViewport viewport <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token number">0.0f</span><span class="token punctuation">,</span>                                               <span class="token comment">// float                                  x</span>
  <span class="token number">0.0f</span><span class="token punctuation">,</span>                                               <span class="token comment">// float                                  y</span>
  <span class="token keyword keyword-static_cast">static_cast</span><span class="token operator">&lt;</span><span class="token keyword keyword-float">float</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token function">GetSwapChain</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>Extent<span class="token punctuation">.</span>width<span class="token punctuation">)</span><span class="token punctuation">,</span>    <span class="token comment">// float                                  width</span>
  <span class="token keyword keyword-static_cast">static_cast</span><span class="token operator">&lt;</span><span class="token keyword keyword-float">float</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token function">GetSwapChain</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>Extent<span class="token punctuation">.</span>height<span class="token punctuation">)</span><span class="token punctuation">,</span>   <span class="token comment">// float                                  height</span>
  <span class="token number">0.0f</span><span class="token punctuation">,</span>                                               <span class="token comment">// float                                  minDepth</span>
  <span class="token number">1.0f</span>                                                <span class="token comment">// float                                  maxDepth</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

VkRect2D scissor <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token punctuation">{</span>                                                   <span class="token comment">// VkOffset2D                             offset</span>
    <span class="token number">0</span><span class="token punctuation">,</span>                                                  <span class="token comment">// int32_t                                x</span>
    <span class="token number">0</span>                                                   <span class="token comment">// int32_t                                y</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>                                                   <span class="token comment">// VkExtent2D                             extent</span>
    <span class="token function">GetSwapChain</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>Extent<span class="token punctuation">.</span>width<span class="token punctuation">,</span>                        <span class="token comment">// uint32_t                               width</span>
    <span class="token function">GetSwapChain</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>Extent<span class="token punctuation">.</span>height                        <span class="token comment">// uint32_t                               height</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token function">vkCmdSetViewport</span><span class="token punctuation">(</span> command_buffer<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>viewport <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">vkCmdSetScissor</span><span class="token punctuation">(</span> command_buffer<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>scissor <span class="token punctuation">)</span><span class="token punctuation">;</span>

VkDeviceSize offset <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token function">vkCmdBindVertexBuffers</span><span class="token punctuation">(</span> command_buffer<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>Vulkan<span class="token punctuation">.</span>VertexBuffer<span class="token punctuation">.</span>Handle<span class="token punctuation">,</span> <span class="token operator">&amp;</span>offset <span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">vkCmdDraw</span><span class="token punctuation">(</span> command_buffer<span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">vkCmdEndRenderPass</span><span class="token punctuation">(</span> command_buffer <span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword keyword-if">if</span><span class="token punctuation">(</span> <span class="token function">GetGraphicsQueue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>Handle <span class="token operator">!=</span> <span class="token function">GetPresentQueue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>Handle <span class="token punctuation">)</span> <span class="token punctuation">{</span>
  VkImageMemoryBarrier barrier_from_draw_to_present <span class="token operator">=</span> <span class="token punctuation">{</span>
    VK_STRUCTURE_TYPE_IMAGE_MEMORY_BARRIER<span class="token punctuation">,</span>           <span class="token comment">// VkStructureType                        sType</span>
    <span class="token keyword keyword-nullptr">nullptr</span><span class="token punctuation">,</span>                                          <span class="token comment">// const void                            *pNext</span>
    VK_ACCESS_MEMORY_READ_BIT<span class="token punctuation">,</span>                        <span class="token comment">// VkAccessFlags                          srcAccessMask</span>
    VK_ACCESS_MEMORY_READ_BIT<span class="token punctuation">,</span>                        <span class="token comment">// VkAccessFlags                          dstAccessMask</span>
    VK_IMAGE_LAYOUT_PRESENT_SRC_KHR<span class="token punctuation">,</span>                  <span class="token comment">// VkImageLayout                          oldLayout</span>
    VK_IMAGE_LAYOUT_PRESENT_SRC_KHR<span class="token punctuation">,</span>                  <span class="token comment">// VkImageLayout                          newLayout</span>
    <span class="token function">GetGraphicsQueue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>FamilyIndex<span class="token punctuation">,</span>                   <span class="token comment">// uint32_t                               srcQueueFamilyIndex</span>
    <span class="token function">GetPresentQueue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>FamilyIndex<span class="token punctuation">,</span>                    <span class="token comment">// uint32_t                               dstQueueFamilyIndex</span>
    image_parameters<span class="token punctuation">.</span>Handle<span class="token punctuation">,</span>                          <span class="token comment">// VkImage                                image</span>
    image_subresource_range                           <span class="token comment">// VkImageSubresourceRange                subresourceRange</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token function">vkCmdPipelineBarrier</span><span class="token punctuation">(</span> command_buffer<span class="token punctuation">,</span> VK_PIPELINE_STAGE_COLOR_ATTACHMENT_OUTPUT_BIT<span class="token punctuation">,</span> VK_PIPELINE_STAGE_BOTTOM_OF_PIPE_BIT<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword keyword-nullptr">nullptr</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword keyword-nullptr">nullptr</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>barrier_from_draw_to_present <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword keyword-if">if</span><span class="token punctuation">(</span> <span class="token function">vkEndCommandBuffer</span><span class="token punctuation">(</span> command_buffer <span class="token punctuation">)</span> <span class="token operator">!=</span> VK_SUCCESS <span class="token punctuation">)</span> <span class="token punctuation">{</span>
  std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Could not record command buffer!"</span> <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
  <span class="token keyword keyword-return">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword keyword-return">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 45px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre></div>

<p><strong>20.</strong> <em>Tutorial04.cpp, function PrepareFrame()</em></p>

<p>Next we bind a graphics pipeline. It has two states marked as 
dynamic: viewport and scissor test. So we prepare structures that define
 viewport and scissor test parameters. The dynamic viewport state is set
 by calling the <strong>vkCmdSetViewport()</strong> function. The dynamic scissor test is set by calling the <strong>vkCmdSetScissor()</strong> function. This way, our graphics pipeline can be used for rendering into images of different sizes.</p>

<p>One last thing before we can draw anything is to bind appropriate 
vertex buffer, providing buffer data for vertex attributes. We do this 
through the <strong>vkCmdBindVertexBuffers()</strong> function call. We 
specify a binding number (which set of vertex attributes should take 
data from this buffer), a pointer to a buffer handle (or more handles if
 we want to bind buffers for multiple bindings) and an offset. The 
offset specifies that data for vertex attributes should be taken from 
further parts of the buffer. But we can’t specify offset larger than the
 size of a corresponding buffer (buffer, not memory object bound to this
 buffer).</p>

<p>Now we have specified all the required elements: framebuffer, 
viewport and scissor test, and a vertex buffer. We can draw the 
geometry, finish the render pass, and end the command buffer.</p>

<h2>Tutorial04 Execution<a class="inpage-nav-anchor" id="inpage-nav-6"></a></h2>

<p>Here is the result of rendering operations:</p>

<p style="text-align:center"><img src="API%20without%20Secrets_%20Introduction%20to%20Vulkan_%20Part%204_%20Vertex%20Attributes_files/vulkan-part-4-image-01-result-of-rendering-667842.png"></p>

<p>We are rendering a quad that has different colors in each corner. Try
 resizing the window; previously, the triangle was always the same size,
 only the black frame on the right and bottom sides of an application 
window grew larger or smaller. Now, thanks to the dynamic viewport 
state, the quad is growing or shrinking along with the window.</p>

<h2>Cleaning Up<a class="inpage-nav-anchor" id="inpage-nav-7"></a></h2>

<p>After rendering and before closing the application, we should destroy
 all resources. Here is a code responsible for this operation:</p>
<div class="code-toolbar"><pre class=" language-cpp line-numbers"><div class="toolbar" style="float: right;"><div class="toolbar-item"><a>Copy Code</a></div></div><code class=" language-cpp"><span class="token keyword keyword-if">if</span><span class="token punctuation">(</span> <span class="token function">GetDevice</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!=</span> VK_NULL_HANDLE <span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">vkDeviceWaitIdle</span><span class="token punctuation">(</span> <span class="token function">GetDevice</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword keyword-for">for</span><span class="token punctuation">(</span> size_t i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> Vulkan<span class="token punctuation">.</span>RenderingResources<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>i <span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword keyword-if">if</span><span class="token punctuation">(</span> Vulkan<span class="token punctuation">.</span>RenderingResources<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>Framebuffer <span class="token operator">!=</span> VK_NULL_HANDLE <span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">vkDestroyFramebuffer</span><span class="token punctuation">(</span> <span class="token function">GetDevice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> Vulkan<span class="token punctuation">.</span>RenderingResources<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>Framebuffer<span class="token punctuation">,</span> <span class="token keyword keyword-nullptr">nullptr</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword keyword-if">if</span><span class="token punctuation">(</span> Vulkan<span class="token punctuation">.</span>RenderingResources<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>CommandBuffer <span class="token operator">!=</span> VK_NULL_HANDLE <span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">vkFreeCommandBuffers</span><span class="token punctuation">(</span> <span class="token function">GetDevice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> Vulkan<span class="token punctuation">.</span>CommandPool<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>Vulkan<span class="token punctuation">.</span>RenderingResources<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>CommandBuffer <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword keyword-if">if</span><span class="token punctuation">(</span> Vulkan<span class="token punctuation">.</span>RenderingResources<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>ImageAvailableSemaphore <span class="token operator">!=</span> VK_NULL_HANDLE <span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">vkDestroySemaphore</span><span class="token punctuation">(</span> <span class="token function">GetDevice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> Vulkan<span class="token punctuation">.</span>RenderingResources<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>ImageAvailableSemaphore<span class="token punctuation">,</span> <span class="token keyword keyword-nullptr">nullptr</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword keyword-if">if</span><span class="token punctuation">(</span> Vulkan<span class="token punctuation">.</span>RenderingResources<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>FinishedRenderingSemaphore <span class="token operator">!=</span> VK_NULL_HANDLE <span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">vkDestroySemaphore</span><span class="token punctuation">(</span> <span class="token function">GetDevice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> Vulkan<span class="token punctuation">.</span>RenderingResources<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>FinishedRenderingSemaphore<span class="token punctuation">,</span> <span class="token keyword keyword-nullptr">nullptr</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword keyword-if">if</span><span class="token punctuation">(</span> Vulkan<span class="token punctuation">.</span>RenderingResources<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>Fence <span class="token operator">!=</span> VK_NULL_HANDLE <span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">vkDestroyFence</span><span class="token punctuation">(</span> <span class="token function">GetDevice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> Vulkan<span class="token punctuation">.</span>RenderingResources<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>Fence<span class="token punctuation">,</span> <span class="token keyword keyword-nullptr">nullptr</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token keyword keyword-if">if</span><span class="token punctuation">(</span> Vulkan<span class="token punctuation">.</span>CommandPool <span class="token operator">!=</span> VK_NULL_HANDLE <span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">vkDestroyCommandPool</span><span class="token punctuation">(</span> <span class="token function">GetDevice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> Vulkan<span class="token punctuation">.</span>CommandPool<span class="token punctuation">,</span> <span class="token keyword keyword-nullptr">nullptr</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
    Vulkan<span class="token punctuation">.</span>CommandPool <span class="token operator">=</span> VK_NULL_HANDLE<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword keyword-if">if</span><span class="token punctuation">(</span> Vulkan<span class="token punctuation">.</span>VertexBuffer<span class="token punctuation">.</span>Handle <span class="token operator">!=</span> VK_NULL_HANDLE <span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">vkDestroyBuffer</span><span class="token punctuation">(</span> <span class="token function">GetDevice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> Vulkan<span class="token punctuation">.</span>VertexBuffer<span class="token punctuation">.</span>Handle<span class="token punctuation">,</span> <span class="token keyword keyword-nullptr">nullptr</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
    Vulkan<span class="token punctuation">.</span>VertexBuffer<span class="token punctuation">.</span>Handle <span class="token operator">=</span> VK_NULL_HANDLE<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword keyword-if">if</span><span class="token punctuation">(</span> Vulkan<span class="token punctuation">.</span>VertexBuffer<span class="token punctuation">.</span><span class="token type-opencl-host-c++ keyword">Memory</span> <span class="token operator">!=</span> VK_NULL_HANDLE <span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">vkFreeMemory</span><span class="token punctuation">(</span> <span class="token function">GetDevice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> Vulkan<span class="token punctuation">.</span>VertexBuffer<span class="token punctuation">.</span><span class="token type-opencl-host-c++ keyword">Memory</span><span class="token punctuation">,</span> <span class="token keyword keyword-nullptr">nullptr</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
    Vulkan<span class="token punctuation">.</span>VertexBuffer<span class="token punctuation">.</span><span class="token type-opencl-host-c++ keyword">Memory</span> <span class="token operator">=</span> VK_NULL_HANDLE<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword keyword-if">if</span><span class="token punctuation">(</span> Vulkan<span class="token punctuation">.</span>GraphicsPipeline <span class="token operator">!=</span> VK_NULL_HANDLE <span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">vkDestroyPipeline</span><span class="token punctuation">(</span> <span class="token function">GetDevice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> Vulkan<span class="token punctuation">.</span>GraphicsPipeline<span class="token punctuation">,</span> <span class="token keyword keyword-nullptr">nullptr</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
    Vulkan<span class="token punctuation">.</span>GraphicsPipeline <span class="token operator">=</span> VK_NULL_HANDLE<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword keyword-if">if</span><span class="token punctuation">(</span> Vulkan<span class="token punctuation">.</span>RenderPass <span class="token operator">!=</span> VK_NULL_HANDLE <span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">vkDestroyRenderPass</span><span class="token punctuation">(</span> <span class="token function">GetDevice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> Vulkan<span class="token punctuation">.</span>RenderPass<span class="token punctuation">,</span> <span class="token keyword keyword-nullptr">nullptr</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
    Vulkan<span class="token punctuation">.</span>RenderPass <span class="token operator">=</span> VK_NULL_HANDLE<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre></div>

<p><strong>21.</strong> <em>Tutorial04.cpp, destructor</em></p>

<p>We destroy all resources after the device completes processing all 
commands submitted to all its queues. We destroy resources in a reverse 
order. First we destroy all rendering resources: framebuffers, command 
buffers, semaphores and fences. Fences are destroyed by calling the <strong>vkDestroyFence()</strong> function. Then the command pool is destroyed. After that we destroy buffer by calling the <strong>vkDestroyBuffer()</strong> function, and free memory object by calling the <strong>vkFreeMemory()</strong> function. Finally the pipeline object and a render pass are destroyed.</p>

<h2>Conclusion<a class="inpage-nav-anchor" id="inpage-nav-8"></a></h2>

<p>This tutorial is based on the”03 – First Triangle” tutorial. We 
improved rendering by using vertex attributes in a graphics pipeline and
 vertex buffers bound during command buffer recording. We described the 
number and layout of vertex attributes. We introduced dynamic pipeline 
states for the viewport and scissors test. We learned how to create 
buffers and memory objects and how to bind one to another. We also 
mapped memory and upload data from the CPU to the GPU.</p>

<p>We have created a set of rendering resources that allow us to 
efficiently record and issue rendering commands. These resources 
consisted of command buffers, semaphores, fences, and framebuffers. We 
learned how to use fences, how to set up values of dynamic pipeline 
states, and how to bind vertex buffers (source of vertex attribute data)
 during command buffer recording.</p>

<p>The next tutorial will present staging resources. These are 
intermediate buffers used to copy data between the CPU and GPU. This 
way, buffers (or images) used for rendering don’t have to be mapped by 
an application and can be bound to a device’s local (very fast) memory.</p>

<p><strong>Next up: <a href="https://web.archive.org/web/20200917044551/https://software.intel.com/content/www/us/en/develop/articles/api-without-secrets-introduction-to-vulkan-part-5.html">API without Secrets: Introduction to Vulkan* Part 5</a></strong></p>

<p>This sample source code is released under the <a href="https://web.archive.org/web/20200917044551/https://software.intel.com/en-us/articles/intel-sample-source-code-license-agreement/">Intel Sample Source Code License Agreement</a>.</p>
<p></p>
    </div>
</div>
<div class="clearfix"></div>
<div class="ct-outer-table">
    
</div>
</div>

<div class="idzRelatedContent">












































</div>

<div class="bladepar intelparsys">
</div>


    <div class="hidden">
    <sup>1</sup></div>
    <div class="disclaimer parbase editorial-disclaimer">












    
    
        
        
        
            <div class="disclaimer-component">
                <div class="container">
                    <h4>Product and Performance Information</h4>
                    
                    
                    
                        
                            <div class="disclaimer"><sup>1</sup><p>Intel's
 compilers may or may not optimize to the same degree for non-Intel 
microprocessors for optimizations that are not unique to Intel 
microprocessors. These optimizations include SSE2, SSE3, and SSSE3 
instruction sets and other optimizations. Intel does not guarantee the 
availability, functionality, or effectiveness of any optimization on 
microprocessors not manufactured by Intel. Microprocessor-dependent 
optimizations in this product are intended for use with Intel 
microprocessors. Certain optimizations not specific to Intel 
microarchitecture are reserved for Intel microprocessors. Please refer 
to the applicable product User and Reference Guides for more information
 regarding the specific instruction sets covered by this notice.</p>
<p>Notice revision #20110804</p>
</div>
                        
                    
                    
                </div>
            </div>
        
    

</div>


<div class="idzRateUs parbase">








<div class="rate-us-container">
    <div class="idz-survey">
        <div class="rate-us">
            <section class="blade blade-support-featured-content blade-featured-content solid theme-dark-1 no-print">
                <input type="hidden" id="hostname" value="/feedback/uri">
                <div class="container">
                    <div class="support-options">
                        <div class="blade-support-feedback">
                            <div class="container">
                                <div class="row">
                                    <div class="col-sm-10 rateUs-title text-left">
                                        <figure>
                                            <span class="feedback-icon"></span>
                                        </figure>
                                        <h2>Give Feedback</h2>
                                        <h2 class="feedback-close-btn"></h2>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="clearfix visible-xs space-xs"></div>
                </div>
            </section>
        </div>
        <div class="iframe-survey">
            <div class="iframe-form"><iframe src="https://web.archive.org/web/20200917044551if_/https://intel.az1.qualtrics.com/jfe/form/SV_eai43JosW74IFxz?Q_JFE=qdg" data-ruffle-polyfilled=""></iframe></div>
        </div>
    </div>
</div>
</div>

<script src="API%20without%20Secrets_%20Introduction%20to%20Vulkan_%20Part%204_%20Vertex%20Attributes_files/prism.js"></script>

    
        <div id="contextualFooter-PlaceHolder" class="contextualFooter"></div>
    



































<footer class="global blade solid brand-lighter-gray theme-light-2 component" data-component-id="1" data-component="footer" role="contentinfo" data-wap_type="wa_skip_track" id="skip-footer">
    <div class="container">
        <div class="content-footer">
            <div class="content">
                
                    
                        
                            <ul class="footer-links">
                                
                                    <li>
                                        <a href="https://web.archive.org/web/20200917044551/https://software.intel.com/content/www/us/en/company-overview/company-overview.html">Company Information</a>
                                    </li>
                                
                                    <li>
                                        <a href="https://web.archive.org/web/20200917044551/https://software.intel.com/content/www/us/en/corporate-responsibility/corporate-responsibility.html">Our Commitment</a>
                                    </li>
                                
                                    <li>
                                        <a href="https://web.archive.org/web/20200917044551/https://software.intel.com/content/www/us/en/blogs-communities-social.html">Communities </a>
                                    </li>
                                
                                    <li>
                                        <a href="https://web.archive.org/web/20200917044551/https://www.intc.com/investor-relations/default.aspx">Investor Relations</a>
                                    </li>
                                
                                    <li>
                                        <a href="https://web.archive.org/web/20200917044551/https://software.intel.com/content/www/us/en/company-overview/contact-us.html">Contact Us</a>
                                    </li>
                                
                                    <li>
                                        <a href="https://web.archive.org/web/20200917044551/https://newsroom.intel.com/">Newsroom</a>
                                    </li>
                                
                                    <li>
                                        <a href="https://web.archive.org/web/20200917044551/https://software.intel.com/content/www/us/en/jobs/jobs-at-intel.html"> Jobs</a>
                                    </li>
                                
                            </ul>
                        
                        
                        
                    
                
                    
                        
                        
                            <ul class="footer-links social">
                                
                                    <li>
                                        
                                            
                                            
                                                <a href="https://web.archive.org/web/20200917044551/https://www.facebook.com/Intel" target="" aria-label="Intel on Facebook" data-wap="{&quot;linktype&quot;:&quot;footersocial&quot;}">
                                                    <i aria-hidden="true" class="fa-facebook"></i>
                                                </a>
                                            
                                        
                                    </li>
                                
                                    <li>
                                        
                                            
                                            
                                                <a href="https://web.archive.org/web/20200917044551/https://twitter.com/intel" target="" aria-label="Intel on Twitter" data-wap="{&quot;linktype&quot;:&quot;footersocial&quot;}">
                                                    <i aria-hidden="true" class="fa-twitter"></i>
                                                </a>
                                            
                                        
                                    </li>
                                
                                    <li>
                                        
                                            
                                            
                                                <a href="https://web.archive.org/web/20200917044551/https://www.linkedin.com/company/intel-corporation" target="" aria-label="Intel on LinkedIn" data-wap="{&quot;linktype&quot;:&quot;footersocial&quot;}">
                                                    <i aria-hidden="true" class="fa-linkedin"></i>
                                                </a>
                                            
                                        
                                    </li>
                                
                                    <li>
                                        
                                            
                                            
                                                <a href="https://web.archive.org/web/20200917044551/https://www.youtube.com/user/channelintel?sub_confirmation=1" target="" aria-label="Intel on YouTube" data-wap="{&quot;linktype&quot;:&quot;footersocial&quot;}">
                                                    <i aria-hidden="true" class="fa-youtube"></i>
                                                </a>
                                            
                                        
                                    </li>
                                
                                    <li>
                                        
                                            
                                            
                                                <a href="https://web.archive.org/web/20200917044551/https://www.instagram.com/intel/" target="" aria-label="Intel on Instagram" data-wap="{&quot;linktype&quot;:&quot;footersocial&quot;}">
                                                    <i aria-hidden="true" class="fa-instagram"></i>
                                                </a>
                                            
                                        
                                    </li>
                                
                            </ul>
                        
                        
                    
                
                    
                        
                        
                        
                            <ul class="footer-links secondary-links" id="footerSecondaryLinks">
                                
                                    <li>
                                        
                                            
                                            
                                                <small>© Intel Corporation</small>
                                            
                                        
                                    </li>
                                
                                    <li>
                                        
                                            
                                                <a href="https://web.archive.org/web/20200917044551/https://software.intel.com/content/www/us/en/legal/terms-of-use.html">
                                                    <small>Terms of Use</small>
                                                </a>
                                            
                                            
                                        
                                    </li>
                                
                                    <li>
                                        
                                            
                                                <a href="https://web.archive.org/web/20200917044551/https://software.intel.com/content/www/us/en/legal/trademarks.html">
                                                    <small>*Trademarks</small>
                                                </a>
                                            
                                            
                                        
                                    </li>
                                
                                    <li>
                                        
                                            
                                                <a href="https://web.archive.org/web/20200917044551/https://software.intel.com/content/www/us/en/privacy/intel-privacy-notice.html">
                                                    <small>Privacy</small>
                                                </a>
                                            
                                            
                                        
                                    </li>
                                
                                    <li>
                                        
                                            
                                                <a href="https://web.archive.org/web/20200917044551/https://software.intel.com/content/www/us/en/privacy/intel-cookie-notice.html">
                                                    <small>Cookies</small>
                                                </a>
                                            
                                            
                                        
                                    </li>
                                
                                    <li>
                                        
                                            
                                                <a href="https://web.archive.org/web/20200917044551/https://software.intel.com/content/www/us/en/corporate-responsibility/statement-combating-modern-slavery.html">
                                                    <small>Supply Chain Transparency </small>
                                                </a>
                                            
                                            
                                        
                                    </li>
                                
                                    <li>
                                        
                                            
                                                <a href="https://web.archive.org/web/20200917044551/https://software.intel.com/content/www/us/en/siteindex.html">
                                                    <small>Site Map</small>
                                                </a>
                                            
                                            
                                        
                                    </li>
                                
                            </ul>
                        
                    
                
            </div>
            <div class="logo-container">
                <a href="https://web.archive.org/web/20200917044551/https://software.intel.com/content/www/us/en/homepage.html" class="footer-logo-rebrand" aria-label="Intel Footer Logo" title="Intel Footer Logo">
                    <img src="API%20without%20Secrets_%20Introduction%20to%20Vulkan_%20Part%204_%20Vertex%20Attributes_files/intel-footer-logo.svg" class="footer-logo-rebrand" alt="Intel Footer Logo" title="Intel Footer Logo">
                </a>
            </div>
        </div>
    </div>
</footer>












    <textarea id="defers" title="" style="display:none;">    
        &lt;script&gt;var isTargetEnabled =false;&lt;/script&gt;
        
        
            















    
    
        
        
        
        
        
        
        
    




    
    
        
    




    
    
    
    
        
    

&lt;script type="text/javascript"&gt;
    var cq_tms = {
        wa_emtcontenttype: 
"emtcontenttype:webpage/article,emtcontenttype:softwareordriver/
sourcecode/codesample,emtcontenttype:training/tutorial",
        wa_emtprogramminglanguage: "emtprogramminglanguage:cc",
        wa_emttechnology: 
"emttechnology:thirdpartytechnologies/
opengl,emttechnology:inteltechnologies/
intelgraphicsandvisualtechnologies,emttechnology:thirdpartytechnologies/
vulkan",
        wa_emtoperatingsystem: 
"emtoperatingsystem:linux,emtoperatingsystem:microsoftwindows",
        wa_emtskilllevel: 
"emtskilllevel:intermediate,emtskilllevel:beginner",
        wa_arkproducts: "arkproducts:processors/intelcoreprocessors",
        wa_idzcustomtags: "idzcustomtags:gameteam",
        wa_emtsubject: 
"emtsubject:itinformationtechnology/visualcomputing/
rendering,emtsubject:itinformationtechnology/visualcomputing/
videogamedevelopment",
        
        wa_industry_type: "",
        wa_partner_prog: "",
        wa_subject: 
"emtsubject:itinformationtechnology/visualcomputing/
rendering,emtsubject:itinformationtechnology/visualcomputing/
videogamedevelopment",
        wa_biz_size: "",
        wa_emt_org: "",
        wa_emt_intel: "",
        wa_partner_type: "",
        wa_programidentifier: "",
        wa_location: "us",
        wa_language: "en",
        wa_english_title: "API without Secrets: Introduction to Vulkan* 
Part 4: Vertex Attributes",
        wa_content_type: "article",
        wa_intel_platform: "",
        wa_applications: "",
        wa_local: "en_US",
        wa_intel_technology: 
"emttechnology:inteltechnologies/
intelgraphicsandvisualtechnologies,emttechnology:thirdpartytechnologies/
opengl,emttechnology:thirdpartytechnologies/vulkan",
        wa_system_type: "",
        wa_product_name: "",
        wa_audience: 
"emtaudience:business/btssbusinesstechnologysolutionspecialist/
softwaredeveloper",
        wa_life_cycle: "",
        wa_cq_url: 
"/content/www/us/en/develop/articles/api-without-secrets-introduction-
to-vulkan-part-4.html",
        wa_page_type_micro: "editorialposttemplate",
        wa_env: "prd",
        wa_cq_pub_env: "publish",
        wa_transl_status: "",
        wa_product_id: "122139",
        wa_software: "",
        wa_reference_design: "",
        wa_codename: "",
        wa_created_date: "1587990244251",
        wa_modifed_date: "1586858543936",
        wa_off_time: "1633961562332",
        wa_ownedby: "",
        wa_managedby: "",
        wa_idz_nid : "667842",
        wa_event_type: "",
        wa_idz_custom_tags: "idzcustomtags:gameteam",
        wa_programming_language: "emtprogramminglanguage:cc",
        wa_skill_level: 
"emtskilllevel:beginner,emtskilllevel:intermediate",
        wa_solution: "",
        wa_product_formFactor: "",
        wa_operating_system: 
"emtoperatingsystem:linux,emtoperatingsystem:microsoftwindows",
        wa_marketing_products: 
"arkproducts:processors/intelcoreprocessors",
        wa_ssg_third_party_prod_sys_sol: "",
        
        wa_secondary_content_type: 
"emtcontenttype:softwareordriver/sourcecode/
codesample,emtcontenttype:training/tutorial"
    };
    
    
    
    cq_tms.wa_tms_sync_load = "deferred";
    
&lt;/script&gt;





    &lt;script type="text/javascript" 
src="/web/20200917044551js_/https://software.intel.com/content/dam/www/
global/wap/tms.sync.js" async&gt;&lt;/script&gt;


        
    
    &lt;link rel="stylesheet" 
href="/web/20200917044551cs_/https://software.intel.com/etc.clientlibs/
settings/wcm/designs/ver/8.0.00.50/intel/clientlibs/pages/commons-
page.min.css" type="text/css"&gt;&lt;script 
src="/web/20200917044551js_/https://software.intel.com/etc.clientlibs/
settings/wcm/designs/ver/8.0.00.50/intel/clientlibs/pages/commons-
page.min.js" defer&gt;&lt;/script&gt;


&lt;script&gt;!function(){var 
e=setInterval(function(){"undefined"!=typeof 
$CQ&amp;&amp;($CQ(function(){CQ_Analytics.SegmentMgr.loadSegments("/etc/
segmentation"),CQ_Analytics.ClientContextUtils.init("/etc/clientcontext/
intel",window.location.pathname.substr(0,window.location.pathname.indexOf(".")))}),clearInterval(e))},100)}
();&lt;/script&gt;










&lt;link rel="stylesheet" type="text/css" 
href="/web/20200917044551cs_/https://software.intel.com/etc.clientlibs/
settings/wcm/designs/intel/us/en/css/resources/css/
intel.rwd.override.css"/&gt;

</textarea>







<deepl-input-controller translate="no"></deepl-input-controller></body></html>
<!--
     FILE ARCHIVED ON 04:45:51 Sep 17, 2020 AND RETRIEVED FROM THE
     INTERNET ARCHIVE ON 21:53:56 Sep 10, 2025.
     JAVASCRIPT APPENDED BY WAYBACK MACHINE, COPYRIGHT INTERNET ARCHIVE.

     ALL OTHER CONTENT MAY ALSO BE PROTECTED BY COPYRIGHT (17 U.S.C.
     SECTION 108(a)(3)).
-->
<!--
playback timings (ms):
  captures_list: 0.792
  exclusion.robots: 0.039
  exclusion.robots.policy: 0.024
  esindex: 0.016
  cdx.remote: 27.864
  LoadShardBlock: 263.63 (3)
  PetaboxLoader3.datanode: 80.0 (4)
  PetaboxLoader3.resolve: 243.707 (3)
  load_resource: 68.466
-->