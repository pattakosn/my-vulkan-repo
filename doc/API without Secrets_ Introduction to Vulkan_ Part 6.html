<!DOCTYPE html>
<html class="rwd geo-override  vis no-rtl headerfooter-menu3  js flexbox flexboxlegacy canvas canvastext webgl no-touch geolocation postmessage no-websqldatabase indexeddb hashchange history draganddrop websockets rgba hsla multiplebgs backgroundsize borderimage borderradius boxshadow textshadow opacity cssanimations csscolumns cssgradients no-cssreflections csstransforms csstransforms3d csstransitions fontface generatedcontent video audio localstorage sessionstorage webworkers no-applicationcache svg inlinesvg smil svgclippaths" lang="en" style="--wm-toolbar-height: 67px;"><head><script src="API%20without%20Secrets_%20Introduction%20to%20Vulkan_%20Part%206_files/athena.js" type="text/javascript"></script><link type="text/css" rel="stylesheet" id="dark-mode-general-link"><link type="text/css" rel="stylesheet" id="dark-mode-custom-link"><style lang="en" type="text/css" id="dark-mode-custom-style"></style><style lang="en" type="text/css" id="dark-mode-native-style"></style><style lang="en" type="text/css" id="dark-mode-native-sheet"></style>
<script type="text/javascript">window.addEventListener('DOMContentLoaded',function(){var v=archive_analytics.values;v.service='wb';v.server_name='wwwb-app218.us.archive.org';v.server_ms=409;archive_analytics.send_pageview({});});</script>
<script type="text/javascript" src="API%20without%20Secrets_%20Introduction%20to%20Vulkan_%20Part%206_files/bundle-playback.js" charset="utf-8"></script>
<script type="text/javascript" src="API%20without%20Secrets_%20Introduction%20to%20Vulkan_%20Part%206_files/wombat.js" charset="utf-8"></script>
<script>window.RufflePlayer=window.RufflePlayer||{};window.RufflePlayer.config={"autoplay":"on","unmuteOverlay":"hidden","showSwfDownload":true};</script>
<script type="text/javascript" src="API%20without%20Secrets_%20Introduction%20to%20Vulkan_%20Part%206_files/ruffle.js"></script>
<script type="text/javascript">
    __wm.init("https://web.archive.org/web");
  __wm.wombat("https://software.intel.com/content/www/us/en/develop/articles/api-without-secrets-introduction-to-vulkan-part-6.html","20200917044700","https://web.archive.org/","web","https://web-static.archive.org/_static/",
	      "1600318020");
</script>
<link rel="stylesheet" type="text/css" href="API%20without%20Secrets_%20Introduction%20to%20Vulkan_%20Part%206_files/banner-styles.css">
<link rel="stylesheet" type="text/css" href="API%20without%20Secrets_%20Introduction%20to%20Vulkan_%20Part%206_files/iconochive.css">
<!-- End Wayback Rewrite JS Include -->

    <meta charset="UTF-8">
    





<title>API without Secrets: Introduction to Vulkan* Part 6</title>
    








    <script type="text/javascript" src="API%20without%20Secrets_%20Introduction%20to%20Vulkan_%20Part%206_files/performance-config.js"></script>

<link rel="preconnect" href="https://web.archive.org/web/20200917044700/https://dpm.demdex.net/" crossorigin="">
<link rel="dns-prefetch" href="https://web.archive.org/web/20200917044700/https://dpm.demdex.net/">
<link rel="preconnect" href="https://web.archive.org/web/20200917044700/https://starget.intel.com/">
<link rel="dns-prefetch" href="https://web.archive.org/web/20200917044700/https://starget.intel.com/">
<link rel="preconnect" href="https://web.archive.org/web/20200917044700/https://a.idio.co/" crossorigin="">
<link rel="dns-prefetch" href="https://web.archive.org/web/20200917044700/https://a.idio.co/">
<link rel="preconnect" href="https://web.archive.org/web/20200917044700/https://s334284386.t.eloqua.com/">
<link rel="dns-prefetch" href="https://web.archive.org/web/20200917044700/https://s334284386.t.eloqua.com/">
<link rel="dns-prefetch" href="https://web.archive.org/web/20200917044700/https://onsite2.researchintel.com/">
<link rel="preconnect" href="https://web.archive.org/web/20200917044700/https://tags.tiqcdn.com/" crossorigin="">
<link rel="dns-prefetch" href="https://web.archive.org/web/20200917044700/https://tags.tiqcdn.com/">
<link rel="preconnect" href="https://web.archive.org/web/20200917044700/https://www91.intel.com/">
<link rel="dns-prefetch" href="https://web.archive.org/web/20200917044700/https://www91.intel.com/">

    














<meta http-equiv="X-UA-Compatible" content="IE=Edge">
<!--[if lte IE 9]>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<![endif]-->


    <meta name="keywords" content="Game Dev,Tutorial,Code Sample,Virtual Reality,Graphics,Game Development,">

    <meta name="description" content="This part of the tutorial presented a way to use textures (combined image samplers, in fact) inside shaders. To do this we created an image and allocated and bound a memory to it. We also created an image view. Next, we copied data from a staging buffer to the image to initialize its contents. We also created a sampler object that defined a way in which image data was read inside shaders.">

    <meta name="language" content="en">

    <meta name="location" content="us">

    <meta name="robots" content="follow,index,noarchive">

    <meta name="X-Server" content="INTE-T1">


    <meta property="og:image" content="https://web.archive.org/web/20200917044700im_/https://www.intel.com/content/dam/develop/external/us/en/images/intel-truck-1-738455.png">

    <meta property="og:type" content="company">

    <meta property="og:site_name" content="Intel">

    <meta property="og:title" content="API without Secrets: Introduction to Vulkan* Part 6">

    <meta property="fb:admins" content="267985180046218">

    <meta property="og:url" content="https://web.archive.org/web/20200917044700/https://www.intel.com/content/www/us/en/develop/articles/api-without-secrets-introduction-to-vulkan-part-6.html">

    <meta property="og:description" content="This part of the tutorial presented a way to use textures (combined image samplers, in fact) inside shaders. To do this we created an image and allocated and bound a memory to it. We also created an image view. Next, we copied data from a staging buffer to the image to initialize its contents. We also created a sampler object that defined a way in which image data was read inside shaders.">

<meta http-equiv="content-type" content="text/html; charset=UTF-8">

    <meta name="emtcontenttype" content="Content Type|Web Pages|Articles;Content Type|Software and Drivers|Source Code|Code Samples;Content Type|Training|Tutorials;">

    <meta name="contentpath" content="/content/www/us/en/develop/articles/api-without-secrets-introduction-to-vulkan-part-6">

    <meta name="authoreddate" content="2017-07-19T10:11:57.000-07:00">

    <meta name="emttechnology" content="Technology|Third-Party Technologies|OpenGL*;Technology|Third-Party Technologies|Vulkan*;Technology|Intel® Technologies|Intel® Graphics and Visual Technologies;Technology|Intel® Technologies|Intel® Graphics and Visual Technologies|Virtual Reality Powered by Intel® Technology;">

    <meta name="localecode" content="en_US">

    <meta name="mime" content="text/html">

    <meta name="format" content="editorialpost">

    <meta name="excludefromviews" content="false">

    <meta name="taxonomy" content="etm-4e3b51bdc1f84c06a3c0ec85a7c56bd3;etm-0d937c50068349bfa1e24d64b9a17db7;etm-18f0d076608f4156928fea673fa184a9;etm-666e8e040da343a588faa76a1dda2ae4;etm-e9ad772b023840f09a3bb94d6251ea2c;etm-1b1627b1502a4090908800edf123071c;etm-678e0660d7864aa29cadc065a34d8ec9;etm-e8f566054c77415a8e9f5989e2af7108;etm-bc7a5787fc704f86ac1cfec692ad5c5f;etm-8f11476223194fa68d9e0bad77696e2f;etm-08ad0fd40b054d9b8efc6915d6f5f551;etm-353e88e31003471096cda41fbe308605;">

    <meta name="title" content="API without Secrets: Introduction to Vulkan* Part 6">

    <meta name="menu" content="Game Development">

    <meta name="programminglanguage" content="Programming Language|C/C++;">

    <meta name="idzcustomtags" content="IDZ Custom Tags|Featured;IDZ Custom Tags|gameteam;">

    <meta name="emtsubject" content="Subject|Information Technology (IT)|Visual Computing|Video Game Development;">

    <meta name="reimaginefilters" content="Technology|Third-Party Technologies|OpenGL*;Technology|Third-Party Technologies|Vulkan*;IDZ Custom Tags|Featured;IDZ Custom Tags|gameteam;Programming Language|C/C++;Subject|Information Technology (IT)|Visual Computing|Video Game Development;Technology|Intel® Technologies|Intel® Graphics and Visual Technologies;Technology|Intel® Technologies|Intel® Graphics and Visual Technologies|Virtual Reality Powered by Intel® Technology;Content Type|Software and Drivers|Source Code|Code Samples;Content Type|Training|Tutorials;Skill Level|Beginner;Skill Level|Intermediate;">

    <meta name="generic1" content="true">

    <meta name="skilllevel" content="Skill Level|Beginner;Skill Level|Intermediate;">

    <meta name="emtaudience" content="Audience|Business|Business Technology Solution Specialist (BTSS)|Software Developer;">

    <meta name="intelkeywords" content="Game Dev,Tutorial,Code Sample,Virtual Reality,Graphics,Game Development,">

    <meta name="lastModifieddate" content="2017-08-01T00:00:00.000-07:00">

    <meta name="thumbnailurl" content="https://software.intel.com/content/dam/develop/external/us/en/images/intel-truck-1-738455.png">


    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    





<link rel="icon" type="image/png" sizes="32x32" href="https://web.archive.org/web/20200917044700im_/https://software.intel.com/etc.clientlibs/settings/wcm/designs/intel/default/resources/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="https://web.archive.org/web/20200917044700im_/https://software.intel.com/etc.clientlibs/settings/wcm/designs/intel/default/resources/favicon-16x16.png">
<link rel="shortcut icon" href="https://web.archive.org/web/20200917044700im_/https://software.intel.com/etc.clientlibs/settings/wcm/designs/intel/default/resources/favicon.ico">
    





<link rel="canonical" href="https://web.archive.org/web/20200917044700/https://software.intel.com/content/www/us/en/develop/articles/api-without-secrets-introduction-to-vulkan-part-6.html">
    

    <style>@-ms-viewport{width:device-width;}</style>
    
        
        
            
                
                
                    <link rel="stylesheet" href="API%20without%20Secrets_%20Introduction%20to%20Vulkan_%20Part%206_files/intc-core.min.css" type="text/css"><script src="API%20without%20Secrets_%20Introduction%20to%20Vulkan_%20Part%206_files/intc-core.min.js" defer="defer"></script>
                    
                
            
        
    
<script src="API%20without%20Secrets_%20Introduction%20to%20Vulkan_%20Part%206_files/clipboard.min.js"></script><style>:is([id*='google_ads_iframe'],[id*='taboola-'],.taboolaHeight,.taboola-placeholder,#top-ad,#credential_picker_container,#credentials-picker-container,#credential_picker_iframe,[id*='google-one-tap-iframe'],#google-one-tap-popup-container,.google-one-tap__module,.google-one-tap-modal-div,#amp_floatingAdDiv,#ez-content-blocker-container) {display:none!important;min-height:0!important;height:0!important;}</style><script>var isTargetEnabled =false;</script><script>var _____WB$wombat$assign$function_____ = function(name) {return (self._wb_wombat && self._wb_wombat.local_init && self._wb_wombat.local_init(name)) || self[name]; };
if (!self.__WB_pmw) { self.__WB_pmw = function(obj) { this.__WB_source = obj; return this; } }
{
let window = _____WB$wombat$assign$function_____("window");
let globalThis = _____WB$wombat$assign$function_____("globalThis");
let self = _____WB$wombat$assign$function_____("self");
let document = _____WB$wombat$assign$function_____("document");
let location = _____WB$wombat$assign$function_____("location");
let top = _____WB$wombat$assign$function_____("top");
let parent = _____WB$wombat$assign$function_____("parent");
let frames = _____WB$wombat$assign$function_____("frames");
let opener = _____WB$wombat$assign$function_____("opener");
{
var cq_tms = {
        wa_emtcontenttype: "emtcontenttype:webpage/article,emtcontenttype:softwareordriver/sourcecode/codesample,emtcontenttype:training/tutorial",
        wa_emtprogramminglanguage: "emtprogramminglanguage:cc",
        wa_emttechnology: "emttechnology:thirdpartytechnologies/opengl,emttechnology:inteltechnologies/intelgraphicsandvisualtechnologies/virtualrealitypoweredbyinteltechnology,emttechnology:inteltechnologies/intelgraphicsandvisualtechnologies,emttechnology:thirdpartytechnologies/vulkan",
        wa_emtskilllevel: "emtskilllevel:intermediate,emtskilllevel:beginner",
        wa_idzcustomtags: "idzcustomtags:gameteam,idzcustomtags:featured",
        wa_emtsubject: "emtsubject:itinformationtechnology/visualcomputing/videogamedevelopment",
        
        wa_industry_type: "",
        wa_partner_prog: "",
        wa_subject: "emtsubject:itinformationtechnology/visualcomputing/videogamedevelopment",
        wa_biz_size: "",
        wa_emt_org: "",
        wa_emt_intel: "",
        wa_partner_type: "",
        wa_programidentifier: "",
        wa_location: "us",
        wa_language: "en",
        wa_english_title: "API without Secrets: Introduction to Vulkan* Part 6",
        wa_content_type: "article",
        wa_intel_platform: "",
        wa_applications: "",
        wa_local: "en_US",
        wa_intel_technology: "emttechnology:inteltechnologies/intelgraphicsandvisualtechnologies,emttechnology:inteltechnologies/intelgraphicsandvisualtechnologies/virtualrealitypoweredbyinteltechnology,emttechnology:thirdpartytechnologies/opengl,emttechnology:thirdpartytechnologies/vulkan",
        wa_system_type: "",
        wa_product_name: "",
        wa_audience: "emtaudience:business/btssbusinesstechnologysolutionspecialist/softwaredeveloper",
        wa_life_cycle: "",
        wa_cq_url: "/content/www/us/en/develop/articles/api-without-secrets-introduction-to-vulkan-part-6.html",
        wa_page_type_micro: "editorialposttemplate",
        wa_env: "prd",
        wa_cq_pub_env: "publish",
        wa_transl_status: "",
        wa_product_id: "",
        wa_software: "",
        wa_reference_design: "",
        wa_codename: "",
        wa_created_date: "1587984593897",
        wa_modifed_date: "1586858224455",
        wa_off_time: "1633707367406",
        wa_ownedby: "",
        wa_managedby: "",
        wa_idz_nid : "738455",
        wa_event_type: "",
        wa_idz_custom_tags: "idzcustomtags:featured,idzcustomtags:gameteam",
        wa_programming_language: "emtprogramminglanguage:cc",
        wa_skill_level: "emtskilllevel:beginner,emtskilllevel:intermediate",
        wa_solution: "",
        wa_product_formFactor: "",
        wa_operating_system: "",
        wa_marketing_products: "",
        wa_ssg_third_party_prod_sys_sol: "",
        
        wa_secondary_content_type: "emtcontenttype:softwareordriver/sourcecode/codesample,emtcontenttype:training/tutorial"
    };
    
    
    
    cq_tms.wa_tms_sync_load = "deferred";

}}</script><script>var _____WB$wombat$assign$function_____ = function(name) {return (self._wb_wombat && self._wb_wombat.local_init && self._wb_wombat.local_init(name)) || self[name]; };
if (!self.__WB_pmw) { self.__WB_pmw = function(obj) { this.__WB_source = obj; return this; } }
{
let window = _____WB$wombat$assign$function_____("window");
let globalThis = _____WB$wombat$assign$function_____("globalThis");
let self = _____WB$wombat$assign$function_____("self");
let document = _____WB$wombat$assign$function_____("document");
let location = _____WB$wombat$assign$function_____("location");
let top = _____WB$wombat$assign$function_____("top");
let parent = _____WB$wombat$assign$function_____("parent");
let frames = _____WB$wombat$assign$function_____("frames");
let opener = _____WB$wombat$assign$function_____("opener");
{
!function(){var e=setInterval(function(){"undefined"!=typeof $CQ&&($CQ(function(){CQ_Analytics.SegmentMgr.loadSegments("/etc/segmentation"),CQ_Analytics.ClientContextUtils.init("/etc/clientcontext/intel",window.location.pathname.substr(0,window.location.pathname.indexOf(".")))}),clearInterval(e))},100)}();

}}</script><link rel="stylesheet" type="text/css" href="API%20without%20Secrets_%20Introduction%20to%20Vulkan_%20Part%206_files/commons-page.min.css"><link rel="stylesheet" type="text/css" href="API%20without%20Secrets_%20Introduction%20to%20Vulkan_%20Part%206_files/intel.rwd.override.css"></head>



















    



    




<body class="page-is-published simplified-header"><!-- BEGIN WAYBACK TOOLBAR INSERT -->
<script>__wm.rw(0);</script>
<div id="wm-ipp-base" lang="en" style="display: block; direction: ltr; height: 67px;" toolbar-mode="auto">
</div><div id="wm-ipp-print">The Wayback Machine - 
https://web.archive.org/web/20200917044700/https://software.intel.com/
content/www/us/en/develop/articles/api-without-secrets-introduction-to-
vulkan-part-6.html</div>
<script type="text/javascript">//<![CDATA[
__wm.bt(750,27,25,2,"web","https://software.intel.com/content/www/us/en/develop/articles/api-without-secrets-introduction-to-vulkan-part-6.html","20200917044700",1996,"https://web-static.archive.org/_static/",["https://web-static.archive.org/_static/css/banner-styles.css?v=p7PEIJWi","https://web-static.archive.org/_static/css/iconochive.css?v=3PDvdIFv"], false);
  __wm.rw(1);
//]]></script>
<!-- END WAYBACK TOOLBAR INSERT -->
 

<div class="promo-banner-content"></div>

























<script>
    var isLoggedin = (location.protocol == 'https:' && document.cookie.indexOf('SMSESSION') != -1);
    var loginValidateURL = 'https://web.archive.org/web/20200917044700/https://www.intel.com/libs/apps/intel/myintel/profile.html/validate/loggedin';
</script>




    
    
        
        
            



























    
    
        
    



    
    
        <div class="header-simplify component" data-component="header" data-component-id="1">
            <header role="banner">
                <span visibility="hidden"></span>
                <div class="site-mask" data-igm-site-mask=""></div>
                <nav class="global-menu-simplify navbar-fixed-top " role="navigation" aria-label="Site" data-igm="">
                    <div class="container main-navbar">
                        <div class="row">
                            <div class="nav-left col-xs-5 mobileFirst">
                                <div class="content">
                                    <button class="hamburger icon hidden-md hidden-lg hidden-xl" data-toggle="mega-menu" data-target="#menu-products"><span class="fa-menu"></span>
                                    </button>
                                    <ul class="hidden-xs hidden-sm">
                                        
                                            <li>
                                                <button data-toggle="mega-menu" data-target="#menu-0">Products</button>
                                            </li>
                                        
                                            <li>
                                                <button data-toggle="mega-menu" data-target="#menu-1">Support</button>
                                            </li>
                                        
                                            <li>
                                                <button data-toggle="mega-menu" data-target="#menu-2">Solutions</button>
                                            </li>
                                        
                                    </ul>
                                </div>
                            </div>

                            <div class="nav-center col-xs-2">
                                <div class="content">
                                    <a href="https://web.archive.org/web/20200917044700/https://software.intel.com/content/www/us/en/homepage.html" alt="Intel homepage" class="navbar-logo" title="Intel Logo"></a>
                                </div>
                            </div>

                            <div class="nav-right col-xs-5">
                                <div class="content">
                                    
                                        <button type="button" class="language-selector-toggle mobileFirst" aria-label="USA (English)" data-igm-search-toggle="">
                                    <span class="hidden-xs" aria-hidden="true">
                                        USA (English)
                                    </span>
                                            <span class="icon fa-globe align-icons"></span>
                                        </button>
                                    

                                    <span class="states-login">
                            <span class="state-logged-in state-option">
                            <span class="option-links" id="myprofile-signin-menu"></span>

                            </span>
                                    </span>
                                    <button class="login login-toggle item icon mobileFirst" aria-label="Sign In" data-igm-search-toggle="">
                                <span class="login-label" aria-hidden="true"> Sign In </span><span class="icon-login align-icons fa-"></span></button>
                                    
                                <span role="search">
                                    <button type="button" title="Search" class="search-button icon mobileFirst" data-igm-search-toggle=""><span class="fa-search" id="newsearch"></span></button>
                                </span>
                                    
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="uheadersearch homepagesearch">
























    










    















    
    
    
        
    


    <div id="simplify-search" class="search-content brand-darkest-gray theme-dark-1 component mobileFirst" data-component="homepagesearch" data-igm-search-content="" data-component-id="1">
        <div class="wrapper-outer-sticky-footer">
            <div class="wrapper-sticky-footer">
                <div class="slide-search-results">
                    <form class="search item" data-igm-search-control="" name="hpsform-new" id="hpsform-new" action="/web/20200917044700/https://software.intel.com/content/www/us/en/search.html" onsubmit="return INTEL_TYPE_AHEAD.onSubmitHps('Search', '/content/www/us/en', 'en_US')">
                        <button type="submit" class="search-button icon" aria-label="Search" data-tabindex="2"><span class="fa-search"></span></button>
                        
                            
                            
                                <label for="mobile-search">
                                    <input id="toplevelcategory" name="toplevelcategory" type="hidden" value="none">
                                    <input id="query" name="query" type="hidden" value="">
                                    <input data-tabindex="1" data-search-input="" id="mobile-search" name="keyword" type="text" data-igm-search-input="" title="Search" autocomplete="off" placeholder="Search Intel.com">
                                </label>
                            
                        
                        <button id="header-btn-clear" type="clear" class="search-clear" data-igm-search-clear="">
                            <span></span></button>
                        <button type="button" id="cls-btn" class="close icon" aria-label="Close" data-igm-search-toggle="" data-tabindex="3"><span></span></button>
                    </form>
                    <div class="search-quick-links hidden" data-component="wa_skip_track" data-component-id="1">
                        <div class="overlay-content quick-links-terms">
                            <h3>Quick Links</h3>
                            <p>Try these quick links to visit popular site sections</p>
                            <ul>
                                <li>
                                    <a class="quick-link" rel="noopener noreferrer" href="https://web.archive.org/web/20200917044700/https://downloadcenter.intel.com/?wapkw=quicklink:download-center">
                                        Download Center
                                    </a>
                                </li>
                                <li>
                                    <a class="quick-link" rel="noopener noreferrer" href="https://web.archive.org/web/20200917044700/https://ark.intel.com/?wapkw=quicklink:product-specifications">
                                        Product Specifications
                                    </a>
                                </li>
                                <li>
                                    <a class="quick-link" rel="noopener noreferrer" href="https://web.archive.org/web/20200917044700/https://www.intel.com/content/www/us/en/products/devices-systems.html?wapkw=quicklink:products">
                                        Products
                                    </a>
                                </li>
                                <li><a class="quick-link" rel="noopener noreferrer" href="https://web.archive.org/web/20200917044700/https://www.intel.com/content/www/us/en/support.html?wapkw=quicklink:support">
                                    Support
                                </a>
                                </li>
                            </ul>
                        </div>
                    </div>
                    <div class="results-overlay results-recent results component" data-component="wa_skip_track" data-component-id="1">
                        <div class="overlay-content recent-searches-terms">
                            <h3>Recent Searches</h3>
                        </div>
                    </div>
                </div>
                <div class="slide-language-selector">
                    <div class="modal-intel language-selector modal-expose-menu" id="modal-language-selector">
                    </div>
                    













<script type="text/javascript">
    var languageslectorexists = false;
</script>

    <script type="text/javascript">
        languageslectorexists = true;

    </script>
    <!-- MODAL for Language selector -->
    <script id="gls-template" type="text/x-handlebars-template">
        <div class="language-selector-block">
            <div class="modal-content flyout-panel-block force-background" role="dialog"
                 aria-labelledby="regionselector" aria-describedby="selectregion">
                <div class="modal-header flyout-panel-block-header">
                        
                    <h2 class="modal-title" id="Region-Modal">
                        <span class="icon fa-globe align-icons"></span>
                        Select Your Region
                        <div id="close_button" class="modal-footer flyout-panel-block-header">
                            <button type="button" class="close icon" aria-label="Close" data-igm-search-toggle="">
                                <span></span>
                            </button>
                        </div>
                    </h2>
                </div>
                <div class="modal-body lang-selector-body">
                    <div class="flyout-control-panel">
                        <ul class="list-unstyled flyout-control-listing" id="language-accordion">

                            {{#if alsoAvail}}
                            <div class="col-xs-12 lang-selector">
                                <h4 class="accordion-toggle fa- expanded" data-toggle="collapse"
                                    data-parent="#language-accordion"
                                    data-target="#header-translations">
                                    {{localeTitle}}</h4>
                            </div>
                            {{#each sections}}
                            <div id="header-translations" class="accordion-panel in">
                                {{#each locale}}
                                {{regionNames languageList @index countryName}}
                                {{/each}}
                            </div>
                            {{/each}}
                            {{/if}}

                            <div class="col-xs-12 lang-selector">
                                <h4 class="accordion-toggle fa- {{#if alsoAvail}}collapsed{{else}}expanded{{/if}}"
                                    data-toggle="collapse"
                                    data-parent="#language-accordion"
                                    data-target="#home-redirects">
                                    {{homepageTitle}}</h4>
                            </div>
                            {{#each sections}}
                            <div id="home-redirects"
                                 class="accordion-panel {{#if ../alsoAvail}}collapse{{else}}in{{/if}}">
                                {{#each locale}}
                                <li>
                                    <a href="#homepage-{{@index}}" data-toggle="flyout" class="flyout-control">{{{countryName}}}<span
                                            class="icon-caret fa-angle-right"></span></a>
                                </li>
                                {{/each}}
                            </div>
                            {{/each}}

                        </ul>
                        {{#each sections}}
                        {{#each locale}}
                        {{storeIndex @index}}

                        <div class="flyout-panel flyout-panel-position-right flyout-panel-closed force-background"
                             id="geo-{{getIndex}}">
                            <div class="flyout-panel-inner">
                                <div class="flyout-panel-header">
                                    <a href="#" class="close-flyout back-link pull-left"><span
                                            class="icon-back fa-angle-left"></span>
                                        back</a>
                                </div>
                                <div class="flyout-panel-body">
                                    <div class="igm-text-listing">
                                        <div class="pad-btm-10">
                                            <ul class="list-unstyled">
                                                {{#each languageList}}
                                                {{#if localelink}}
                                                <li class="lang-option"><a
                                                        data-locale="{{{language}}}_{{{locale}}}"
                                                        href={{{localelink}}}>{{countryLanguageLabel label language}}</a>
                                                </li>
                                                {{/if}}
                                                {{/each}}
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        {{/each}}
                        {{/each}}

                        {{#each sections}}
                        {{#each locale}}
                        {{#if languageList}}
                        <div class="flyout-panel flyout-panel-position-right flyout-panel-closed force-background"
                             id="homepage-{{@index}}">
                            <div class="flyout-panel-inner">
                                <div class="flyout-panel-header">
                                    <a href="#" class="close-flyout back-link pull-left"><span
                                            class="icon-back fa-angle-left"></span>back</a>
                                </div>
                                <div class="flyout-panel-body">
                                    <div class="igm-text-listing">
                                        <div class="pad-btm-10">
                                            <ul class="list-unstyled">
                                                {{#each languageList}}
                                                {{#if_ne language 'en'
                                                locale 'us' }}
                                                <li class="lang-option"><a
                                                        data-locale="{{{language}}}_{{{locale}}}"
                                                        href={{{homepagelink}}}>{{countryLanguageLabel label language}}</a>
                                                </li>
                                                {{/if_ne}}
                                                {{/each}}
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        {{/if}}
                        {{/each}}
                        {{/each}}

                    </div>
                </div>
            </div>
        </div>
    </script>

    <script type="text/javascript">
        var langSelectData = {"alsoAvail":true,"mobileHomepageTitle":"Find your Country's/Region's Homepage","mobileSelectTitle":"Select a Country/Region","mobileAvailableTitle":"Page Available In","sections":[{"locale":[{"countryName":"Asia Pacific","languageList":[{"homepagelink":"https://web.archive.org/web/20200917044700/https://www.intel.sg/content/www/xa/en/homepage.html","localelink":"","label":"Asia Pacific (English)","locale":"xa","language":"en"},{"homepagelink":"https://web.archive.org/web/20200917044700/https://www.intel.com.au/content/www/au/en/homepage.html","localelink":"","label":"Australia (English)","locale":"au","language":"en"},{"homepagelink":"https://web.archive.org/web/20200917044700/https://www.intel.cn/content/www/cn/zh/homepage.html","localelink":"https://web.archive.org/web/20200917044700/https://www.intel.cn/content/www/cn/zh/develop/articles/api-without-secrets-introduction-to-vulkan-part-6.html","label":"China (简体中文)","locale":"cn","language":"zh"},{"homepagelink":"https://web.archive.org/web/20200917044700/https://www.intel.in/content/www/in/en/homepage.html","localelink":"","label":"India (English)","locale":"in","language":"en"},{"homepagelink":"https://web.archive.org/web/20200917044700/https://www.intel.co.id/content/www/id/id/homepage.html","localelink":"","label":"Indonesia (Bahasa Indonesia)","locale":"id","language":"id"},{"homepagelink":"https://web.archive.org/web/20200917044700/https://www.intel.co.jp/content/www/jp/ja/homepage.html","localelink":"","label":"Japan (日本語)","locale":"jp","language":"ja"},{"homepagelink":"https://web.archive.org/web/20200917044700/https://www.intel.co.kr/content/www/kr/ko/homepage.html","localelink":"","label":"Korea (한국어)","locale":"kr","language":"ko"},{"homepagelink":"https://web.archive.org/web/20200917044700/https://www.intel.com.tw/content/www/tw/zh/homepage.html","localelink":"","label":"Taiwan (繁體中文)","locale":"tw","language":"zh"},{"homepagelink":"https://web.archive.org/web/20200917044700/https://www.thailand.intel.com/content/www/th/th/homepage.html","localelink":"","label":"Thailand (ไทย)","locale":"th","language":"th"},{"homepagelink":"https://web.archive.org/web/20200917044700/https://www.intel.vn/content/www/vn/vi/homepage.html","localelink":"","label":"Vietnam (Tiếng Việt)","locale":"vn","language":"vi"}]},{"countryName":"Europe","languageList":[{"homepagelink":"https://web.archive.org/web/20200917044700/https://www.intel.fr/content/www/fr/fr/homepage.html","localelink":"","label":"France (Français)","locale":"fr","language":"fr"},{"homepagelink":"https://web.archive.org/web/20200917044700/https://www.intel.de/content/www/de/de/homepage.html","localelink":"","label":"Germany (Deutsch)","locale":"de","language":"de"},{"homepagelink":"https://web.archive.org/web/20200917044700/https://www.intel.ie/content/www/ie/en/homepage.html","localelink":"","label":"Ireland (English)","locale":"ie","language":"en"},{"homepagelink":"https://web.archive.org/web/20200917044700/https://www.intel.it/content/www/it/it/homepage.html","localelink":"","label":"Italy (Italiano)","locale":"it","language":"it"},{"homepagelink":"https://web.archive.org/web/20200917044700/https://www.intel.pl/content/www/pl/pl/homepage.html","localelink":"","label":"Poland (Polski)","locale":"pl","language":"pl"},{"homepagelink":"https://web.archive.org/web/20200917044700/https://www.intel.ru/content/www/ru/ru/homepage.html","localelink":"https://web.archive.org/web/20200917044700/https://www.intel.ru/content/www/ru/ru/develop/articles/api-without-secrets-introduction-to-vulkan-part-6.html","label":"Russia (Русский)","locale":"ru","language":"ru"},{"homepagelink":"https://web.archive.org/web/20200917044700/https://www.intel.es/content/www/es/es/homepage.html","localelink":"","label":"Spain (Español)","locale":"es","language":"es"},{"homepagelink":"https://web.archive.org/web/20200917044700/https://www.intel.com.tr/content/www/tr/tr/homepage.html","localelink":"","label":"Turkey (Türkçe)","locale":"tr","language":"tr"},{"homepagelink":"https://web.archive.org/web/20200917044700/https://www.intel.co.uk/content/www/uk/en/homepage.html","localelink":"","label":"United Kingdom (English)","locale":"uk","language":"en"}]},{"countryName":"Latin America","languageList":[{"homepagelink":"https://web.archive.org/web/20200917044700/https://www.intel.la/content/www/xl/es/homepage.html","localelink":"https://web.archive.org/web/20200917044700/https://www.intel.la/content/www/xl/es/develop/articles/api-without-secrets-introduction-to-vulkan-part-6.html","label":"Argentina (Español)","locale":"xl","language":"es"},{"homepagelink":"https://web.archive.org/web/20200917044700/https://www.intel.com.br/content/www/br/pt/homepage.html","localelink":"https://web.archive.org/web/20200917044700/https://www.intel.com.br/content/www/br/pt/develop/articles/api-without-secrets-introduction-to-vulkan-part-6.html","label":"Brazil (Português)","locale":"br","language":"pt"},{"homepagelink":"https://web.archive.org/web/20200917044700/https://www.intel.la/content/www/xl/es/homepage.html","localelink":"https://web.archive.org/web/20200917044700/https://www.intel.la/content/www/xl/es/develop/articles/api-without-secrets-introduction-to-vulkan-part-6.html","label":"Chile (Español)","locale":"xl","language":"es"},{"homepagelink":"https://web.archive.org/web/20200917044700/https://www.intel.la/content/www/xl/es/homepage.html","localelink":"https://web.archive.org/web/20200917044700/https://www.intel.la/content/www/xl/es/develop/articles/api-without-secrets-introduction-to-vulkan-part-6.html","label":"Colombia (Español)","locale":"xl","language":"es"},{"homepagelink":"https://web.archive.org/web/20200917044700/https://www.intel.la/content/www/xl/es/homepage.html","localelink":"https://web.archive.org/web/20200917044700/https://www.intel.la/content/www/xl/es/develop/articles/api-without-secrets-introduction-to-vulkan-part-6.html","label":"Latin America (Español)","locale":"xl","language":"es"},{"homepagelink":"https://web.archive.org/web/20200917044700/https://www.intel.la/content/www/xl/es/homepage.html","localelink":"https://web.archive.org/web/20200917044700/https://www.intel.la/content/www/xl/es/develop/articles/api-without-secrets-introduction-to-vulkan-part-6.html","label":"Mexico (Español)","locale":"xl","language":"es"},{"homepagelink":"https://web.archive.org/web/20200917044700/https://www.intel.la/content/www/xl/es/homepage.html","localelink":"https://web.archive.org/web/20200917044700/https://www.intel.la/content/www/xl/es/develop/articles/api-without-secrets-introduction-to-vulkan-part-6.html","label":"Peru (Español)","locale":"xl","language":"es"}]},{"countryName":"Middle East/Africa","languageList":[{"homepagelink":"https://web.archive.org/web/20200917044700/https://www.intel.co.il/content/www/il/he/homepage.html","localelink":"","label":"Israel (עברית)","locale":"il","language":"he"}]},{"countryName":"North America","languageList":[{"homepagelink":"https://web.archive.org/web/20200917044700/https://www.intel.com/content/www/us/en/homepage.html","localelink":"","label":"United States (English)","locale":"us","language":"en"},{"homepagelink":"https://web.archive.org/web/20200917044700/https://www.intel.ca/content/www/ca/en/homepage.html","localelink":"","label":"Canada (English)","locale":"ca","language":"en"},{"homepagelink":"https://web.archive.org/web/20200917044700/https://www.intel.ca/content/www/ca/fr/homepage.html","localelink":"","label":"Canada (Français)","locale":"ca","language":"fr"}]}]}],"homepageTitle":"Go to your Country's/Region's Homepage","localeTitle":"This page is also available in"};
    </script>


                </div>
                <div class="slide-signin">
                    





































    
    
        
        
        
    




<div class="modal-intel modal-signin" id="modal-signin-form" aria-labelledby="Signin">
    <div class="slide-signin-block" data-component="signincomponent" data-component-id="1">
        <div class="modal-header">
            <button type="button" class="close icon theme-white" data-igm-search-toggle="" aria-label="Close">
                <span></span></button>
            <h2 class="modal-title" id="Signin"><span class="icon-login align-icons fa-"></span>Sign In</h2>
        </div>

        <div class="modal-body">
            <div class="alert alert-danger" id="login-error" role="alert"></div>
            <form id="igm-form-signin" action="https://web.archive.org/web/20200917044700/https://www.intel.com/libs/apps/intel/login.json/securitytoken" method="POST" name="igm-form-signin" class="igm-form-signin intel-form" novalidate="">
                <div class="form-group">
                    <label for="username">
                        <input class="form-control form-input" aria-describedby="uname-error" name="userid" id="username" placeholder="Username" required="">
                    </label>
                    <div class="error validation-messages" id="uname-error">
                        <div class="rule broken">Your username is missing</div>
                    </div>
                </div>
                <div class="form-group">
                    <label for="password">
                        <input type="password" class="form-control form-input" aria-describedby="pwd-error" id="password" name="password" placeholder="Password" required="" autocomplete="off">
                    </label>
                    <div class="error validation-messages" id="pwd-error">
                        <div class="rule broken">Your password is missing</div>
                    </div>
                </div>
                <p>By signing in, you agree to our <a href="https://web.archive.org/web/20200917044700/https://software.intel.com/content/www/us/en/legal/terms-of-use.html">Terms of Service</a>.</p>
                <div class="row">
                    <div class="col-xs-12">
                        <input type="hidden" name="callBack" id="callBackSimplify">
                        <input type="hidden" name="queryParam" id="queryParam">
                        <input type="submit" class="btn btn-primary" value="Sign In" data-wap="{&quot;linktype&quot;:&quot;sign-in&quot;}">
                        <label for="cbRememberMe" class="remember-user"><input id="cbRememberMe" name="rememberme" type="checkbox" value="true">
                            <span>Remember me</span></label>
                    </div>
                </div>
            </form>
            <p>
                Forgot your Intel
                <a href="https://web.archive.org/web/20200917044700/https://www.intel.com/content/www/us/en/my-intel/forgot-userid.html">username</a>
                or
                <a href="https://web.archive.org/web/20200917044700/https://www.intel.com/content/www/us/en/my-intel/forgot-password.html">password</a>?
            </p>

            <p class="mobile-intel-signin">Do you work for Intel? <a href="#" onclick="intel.signinsimplify.geturl('https://web.archive.org/web/20200917044700/https://sifederation.intel.com/federation/bridge/sso_irp.asp?target=')">Sign in here</a>.</p>
            
                <p>
                    Don’t have an Intel account?
                    <a href="#" onclick="intel.signinHeaderSimplify.doRedirect('/forms/basic-intel-registration.html')">
                        Sign up here
                    </a>
                    for a basic account.
                </p>
            
        </div>
    </div>
</div>
<iframe id="frameSigninSimplify" tabindex="-1" title="My Intel Sign in" aria-hidden="true" name="frameSigninSimplify" src="/web/20200917044700if_/https://software.intel.com/etc.clientlibs/settings/wcm/designs/intel/clientlibs/pages/commons-page/resources/html/idamFormStaticSimplify.html" style="display:none;" data-ruffle-polyfilled=""></iframe>


<script>

    
    

    
    var intel = intel || {};
    intel.signinsimplifyConfig = {
        locale: '',
        messages: {
            InvalidCredential: 'The username or password you entered was invalid.',
            InvalidField: 'The username or password you entered was invalid.',
            AccountDisabled: 'For security reasons, your account has been disabled. For help, <a href=\"#\" class=\"contactLink new-tab-link\" target=\"_blank\" rel=\"noopener noreferrer\" >contact us<\/a>.',
            AccountLocked: 'Your account has been locked. For help, please read the <a href=\"#\" class=\"faqsLink new-tab-link\" target=\"_blank\" rel=\"noopener noreferrer\" >Sign In FAQ<\/a>.',
            UserNotFound: 'The username or password you entered was invalid.',
            Unknown: 'An unexpected error occurred. Try it again. For help, use the contact or support options below.',
            PasswordExpired: 'Your password is expired. Please change your password.',
            LoginAssistLink: 'https://web.archive.org/web/20200917044700/https://signin.intel.com/ContactUs.aspx',
            faqsLink: '/content/www/us/en/my-intel/sign-in-help.html'
        },
        nameField: 'Username',
        passField: 'Password',
        signinUrl: '/libs/apps/intel/login.json/securitytoken',
        isPopup: true,
        responseHref: 'https://web.archive.org/web/20200917044700/https://www.intel.com/content/www/us/en/develop/articles/api-without-secrets-introduction-to-vulkan-part-6.html' + window.location.hash,
        sslDomainUrl: 'www.intel.com',
        loginUrl: 'https://web.archive.org/web/20200917044700/https://welcome.intel.com/login.aspx?appid=258&qlogin=true',
        ssoUri: 'https://web.archive.org/web/20200917044700/https://federatesso.intel.com',
        logoutUrl: 'https://web.archive.org/web/20200917044700/https://welcome.intel.com/logout.aspx',
        logoutHref: 'https://web.archive.org/web/20200917044700/https://signin.intel.com/Logout?RedirectURL=https://www.intel.com/content/www/us/en/develop/articles/api-without-secrets-introduction-to-vulkan-part-6' + '.html',
        loginErrorID: '#login-error',
        usernameID: '#username',
        remembermeId: '#cbRememberMe',
        formID: '#igm-form-signin',
        unameErrorID: '#uname-error',
        passID: '#password',
        passError: '#pwd-error',
        changePasswordUrl: '/content/www/us/en/my-intel/change-password.html',
        emailVerificationUrl: '/content/www/us/en/my-intel/email-verification.expired.html',
        aboutToExpireEmailUrl: '/content/www/us/en/my-intel/email-verification.html',
        renewalUrl: '/content/www/us/en/secure/technology-provider/forms/renew-technology-provider-membership.html',
        limitedUrl: '/content/www/us/en/resellers/limited-status-secondary.html',
        isaPRMDashBoardURL: '/content/www/us/en/secure/partner/solutions-alliance/overview.html',
        itpPRMDashBoardURL: '/content/www/us/en/secure/partner/technology-provider/iot/overview.html',
        itpisaPRMDashBoardURL: '/content/www/us/en/secure/partner/iot-itp-isa/overview.html',
        isaRenewalURL: '/content/www/us/en/secure/partner/forms/solutions-alliance-renewal.html',
    };
    
    if(location.protocol=='https:' && document.cookie.indexOf('SMSESSION')!=-1) {
        if (document.cookie.indexOf('IGHFLoggedIn') == -1) {
            var currentUrl = window.location.href;
            var cookiename = "IGHFtarget";
            var samlcookieValue = cookiename + "=" + encodeURIComponent(currentUrl) + ";secure;path=/;domain=.intel.com";
            document.cookie= samlcookieValue;
            window.location.href = 'https://web.archive.org/web/20200917044700/https://sfederation.intel.com/federation2/sp/WebExperienceManagementSolutiononAEMforIntel/d3d3LmludGVsLmNvbQ%3D%3D';
        }
    }
    
</script>

                </div>
                    <div class="slide-myintel component" data-component="myintel-navmenu" data-component-id="1"></div>
            </div>
            <div class="search-info">

                
                
                
                    <a id="dropDownSearchSignIn" target="_self" tabindex="0" href="#" class="login-toggle pale-blue" data-target="#modal-signin-form">Sign In</a> to access restricted content.
            </div>
            <div class="signout-info">
                <button type="button" class="btn btn-primary" data-sso-uri="https://federatesso.intel.com" data-logout-uri="" data-wap="{&quot;linktype&quot;:&quot;logout&quot;}" onclick="intel.signinsimplify.signOut()">Sign Out
                </button>
            </div>
        </div>
    </div>

<script type="text/javascript">
    var global_config = {
        "icsUrl": "https://web.archive.org/web/20200917044700/https://supporttickets.intel.com/services/oauth2/authorize?response_type=token&client_id=3MVG9QDx8IX8nP5Rh0X3B7gohGtUh8sjFQ8Tw_U8sS9_PoVrupDFwZ_nwLcze2n64lGBbGchyUb7_9W8n8pAV&redirect_uri=https%3A%2F%2Fsoftware.intel.com%2Fcontent%2Fwww%2Fus%2Fen%2Fsecure%2Fmy-intel%2Ftoken.html",
        "ipsUrl": "https://web.archive.org/web/20200917044700/https://premiersupport.intel.com/IPS/services/oauth2/authorize?response_type=token&client_id=3MVG9xOCXq4ID1uEa5F2lCYAp6mmKvTMlKbMIrsMKShY2oOqs1ETvPRjwmhoPivHd9_U53EzmiyYxn3nVpA9J&redirect_uri=https%3A%2F%2Fsoftware.intel.com%2Fcontent%2Fwww%2Fus%2Fen%2Fsecure%2Fmy-intel%2Ftoken.html"
    };
    var globalSearch = globalSearch || {};
    globalSearch = {
        sharePointSearchPromote:true,
        searchProvider: 'coveo',
        baseSearchQuery: 'localecode:"en_US" NOT generic1:"false" ',
        langRootPath: '/content/www/us/en',
        headingTxt: 'Best Match',
        locale: 'en_US',
        typeAheadUrl: 'https://web.archive.org/web/20200917044700/http://search.intel.com/SearchLookup/DataProvider.ashx',
        bestMatchUrl: 'https://web.archive.org/web/20200917044700/https://platform.cloud.coveo.com/rest/search/v2/querySuggest',
        searchRealm: 'Default',
        bestMatchQ1: 'NAR',
        bestMatchQ2: 'en',
        bestMatchQ11: 'sptitle,description,url,thumbnailurl,reimaginerootlevel',
        progId: '',
        useEMTTags: true,
        defaultPage: 'search.html',
        token: 'xx43151f87-f1d8-4211-ae65-ce98d805849c',
        searchHub: 'entepriseSearch',

        gtvLabels: {
            suggested: "",
            products: "Products",
            support: "Support",
            developers: "Developers",
            drivers: "Drivers",
            forums: "Forums",
            specifications: "Specifications",
            download: "",
            searchesRelatedTo: "",
            search: "Search Intel.com",
            inLabel: "in",
            searchSupport: "Search Intel® Support",
            intelcom: "",
            forLabel: "for",
            allResults: "All Results",
            show: "Show",
            results: "Results"
        },
        mobileResults: "5",
        laptopResults: "10",
        EDCProgramIdentifier: "false",
        rdcContentDataSource: ""
    };
</script>
</div>

                </nav>
                <!-- end global intel header -->
                <div class="mega-menu-content"></div>
                    
            </header>
        </div>

        <script type="text/javascript">
            var globalHeader = globalHeader || {};
            globalHeader = {
                currentPath: "/content/www/us/en/develop/articles/api-without-secrets-introduction-to-vulkan-part-6",
                lanloc: "/us/en",
                lanLoc: "US/en",
                helpformurl: "",
                intelHeaderFooterVersion: "menu3",
                megaMenuPath: "/content/data/globalelements/US/en/globalnav4",
                globalBannerPath: "/content/data/globalelements/US/en/sitewide-banner-placeholder",
                subMenuPath: "/content/data/globalelements/US/en/sub-navigation/idz/idz-gd",
                isCHF:false,
                secureRedirectURL: "",
            }
        </script>
    


        
    


<section data-scroll-track="false">
    <div class="container">
        <div class="row">
            <div class="col-xs-12 pull-right persistent-cta-integration-globalNav" id="alertMsg">
                <div id="alertSupport">
                    <div class="browser_detect" id="browserdetectid" style="display:none;">
                        <p>The browser version you are using is not recommended for this site.<br>Please consider upgrading to the latest version of your browser by clicking one of the following links.</p>
                        <div class="browser_types">
                            <ul>
                                
                                    <li><a href="https://web.archive.org/web/20200917044700/https://support.apple.com/downloads/safari">Safari</a></li>
                                
                                    <li><a href="https://web.archive.org/web/20200917044700/https://support.google.com/chrome/answer/95346?hl=en">Chrome</a></li>
                                
                                    <li><a href="https://web.archive.org/web/20200917044700/https://www.microsoft.com/en-us/edge">Edge</a></li>
                                
                                    <li><a href="https://web.archive.org/web/20200917044700/https://www.mozilla.org/en-US/firefox/new/">Firefox</a></li>
                                
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>



















<div class="editorialpost editorialPost parbase">

















<link rel="stylesheet" href="API%20without%20Secrets_%20Introduction%20to%20Vulkan_%20Part%206_files/idzLibs.min.css" type="text/css"><script src="API%20without%20Secrets_%20Introduction%20to%20Vulkan_%20Part%206_files/idzLibs.min.js" defer="defer"></script>





<header class="editorialPostHeader">
    <div class="sticky_button_blue sticky_button_blue_pp">
        <div class="persistent_cta_bar">
















</div>

    </div>
    
    <h1 class="editorialTitle"> API without Secrets: Introduction to Vulkan* Part 6 </h1>
    <p class="editAuthor">
        <span class="label-style">By</span>

            
                
                    <a href="https://web.archive.org/web/20200917044700/https://software.intel.com/en-us/profile/+rw9Uv7oFRNFxXzJ/NuMzw==">Pawel Lapinski</a><span class="label-style">,</span>
                
                
            

            
        
    </p>
    <div class="editorialDisplayLine">
        <p class="editorialDisplayLineHide">

            
            
            

                        <span class="label-style">  Published:</span>07/19/2017&nbsp;&nbsp;
                <span class="label-style"> Last Updated:</span>08/01/2017

            
            
            
            
            

        </p>
    </div>
</header>
<div class="editorialPostNav ">
    
        <div id="inpage-navigation" class="inpage-navigation" style="height: 100%; margin-top: -18px; top: 320.6px;"><h4 id="inpage-nav-contents">CONTENTS</h4><ul class="inpage-nav"><li class="parent nochildren"><a class="jumplink" href="#inpage-nav-undefined"><span class="word_arrow">Tutorial</span> 6: Descriptor Sets – Using Textures in Shaders</a></li><li class="parent haschildren"><a class="jumplink" href="#inpage-nav-1"><span class="word_arrow">Creating</span> an Image</a><ul class="inpage-nav list-h3" style=""><li class="parent nochildren"><a class="jumplink" href="#inpage-nav-1-undefined"><span class="word_arrow">Allocating</span> Image Memory</a></li><li class="parent nochildren"><a class="jumplink" href="#inpage-nav-1-1"><span class="word_arrow">Creating</span> Image View</a></li><li class="parent nochildren"><a class="jumplink" href="#inpage-nav-1-2"><span class="word_arrow">Copying</span> Data to an Image</a></li></ul></li><li class="parent nochildren"><a class="jumplink" href="#inpage-nav-2"><span class="word_arrow">Creating</span> a Sampler</a></li><li class="parent haschildren"><a class="jumplink" href="#inpage-nav-3"><span class="word_arrow">Using</span> Descriptor Sets</a><ul class="inpage-nav list-h3" style=""><li class="parent nochildren"><a class="jumplink" href="#inpage-nav-3-undefined"><span class="word_arrow">Creating</span> a Descriptor Set Layout</a></li><li class="parent nochildren"><a class="jumplink" href="#inpage-nav-3-1"><span class="word_arrow">Creating</span> a Descriptor Pool</a></li><li class="parent nochildren"><a class="jumplink" href="#inpage-nav-3-2"><span class="word_arrow">Allocating</span> Descriptor Sets</a></li><li class="parent nochildren"><a class="jumplink" href="#inpage-nav-3-3"><span class="word_arrow">Updating</span> Descriptor Sets</a></li><li class="parent nochildren"><a class="jumplink" href="#inpage-nav-3-4"><span class="word_arrow">Creating</span> a Pipeline Layout</a></li><li class="parent nochildren"><a class="jumplink" href="#inpage-nav-3-5"><span class="word_arrow">Binding</span> Descriptor Sets</a></li><li class="parent nochildren"><a class="jumplink" href="#inpage-nav-3-6"><span class="word_arrow">Accessing</span> Descriptors in Shaders</a></li></ul></li><li class="parent nochildren"><a class="jumplink" href="#inpage-nav-4"><span class="word_arrow">Tutorial06</span> Execution</a></li><li class="parent nochildren"><a class="jumplink" href="#inpage-nav-5"><span class="word_arrow">Cleaning</span> Up</a></li><li class="parent nochildren"><a class="jumplink" href="#inpage-nav-6"><span class="word_arrow">Conclusion</span></a></li></ul></div>
    
</div>
<div class="editorialPostContent ">
    <div class="editorialBody">
        <p></p><p><a class="button-highlight" href="https://web.archive.org/web/20200917044700/https://github.com/GameTechDev/IntroductionToVulkan" rel="nofollow" target="_blank">Download</a></p>

<p><a class="button-white-border" href="https://web.archive.org/web/20200917044700/https://software.intel.com/content/dam/develop/external/us/en/documents/apiwithoutwithoutsecretsintroductiontovulkanpart6-final-738455.pdf">View PDF</a> [736 KB]</p>

<p><strong>Back to:&nbsp;<a href="https://web.archive.org/web/20200917044700/https://software.intel.com/content/www/us/en/develop/articles/api-without-secrets-introduction-to-vulkan-part-5.html">Part 5 Staging Resources </a></strong></p>

<p><strong>Next up: <a href="https://web.archive.org/web/20200917044700/https://software.intel.com/content/www/us/en/develop/articles/api-without-secrets-introduction-to-vulkan-part-7.html">Uniform Buffers - Using Buffers in Shaders</a></strong></p>

<hr>
<h2>Tutorial 6: Descriptor Sets – Using Textures in Shaders<a class="inpage-nav-anchor" id="inpage-nav-undefined"></a></h2>

<p>We know how to create a graphics pipeline and how to use shaders to 
draw geometry on screen. We have also learned how to create buffers and 
use them as a source of vertex data (vertex buffers). Now we need to 
know how to provide data to shaders—we will see how to use resources 
like samplers and images inside shader source code and how to set up an 
interface between the application and the programmable shader stages.</p>

<p>In this tutorial, we will focus on a functionality that is similar to
 OpenGL* textures. But in Vulkan* there are no such objects. We have 
only two resource types in which we can store data: buffers and images 
(there are also push constants, but we will cover them in a dedicated 
tutorial). Each of them can be provided to shaders, in which case we 
call such resources descriptors, but we can’t provide them to shaders 
directly. Instead, they are aggregated in wrapper or container objects 
called <em>descriptor sets</em>. We can place multiple resources in a 
single descriptor set but we need to do it according to a predefined 
structure of such set. This structure defines the contents of a single 
descriptor set—types of resources that are placed inside it, number of 
each of these resource types, and their order. This description is 
specified inside objects named <em>descriptor set layouts</em>. Similar 
descriptions need to be specified when we write shader programs. 
Together they form an interface between API (our application) and the 
programmable pipeline (shaders).</p>

<p>When we have prepared a layout, and created a descriptor set, we can <em>fill</em>
 it; in this way we define specific objects (buffers and/or images) that
 we want to use in shaders. After that, before issuing drawing commands 
inside a command buffer, we need to bind such a set to the command 
buffer. This allows us to use the resources from inside the shader 
source code; for example, fetch data from a sampled image (a <em>texture</em>), or read a value of a uniform variable stored in a uniform buffer.</p>

<p>In this part of the tutorial, we will see how to create descriptor 
set layouts and descriptor sets themselves. We will also prepare a 
sampler and an image so we can make them available as a texture inside 
shaders. We will also learn how we can use them inside shaders.</p>

<p>As mentioned previously, this tutorial is based on the knowledge presented in all the previous parts of the <em>API without Secrets: Introduction to Vulkan</em> tutorials, and only the differences and parts important for the described topics are presented.</p>

<h2>Creating an Image<a class="inpage-nav-anchor" id="inpage-nav-1"></a></h2>

<p>We start by creating an image that will act as our texture. Images 
represent a continuous area of memory, which is interpreted according to
 the rules defined during image creation. In Vulkan, we have only three 
basic image types: 1D, 2D, and 3D. Images may have mipmaps (levels of 
detail), many array layers (at least one is required), or samples per 
frame. All these parameters are specified during image creation. In the 
code sample, we create the most commonly used two‑dimensional image, 
with one sample per pixel and the four RGBA components.</p>
<div class="code-toolbar"><pre class=" language-cpp line-numbers"><div class="toolbar" style="float: right;"><div class="toolbar-item"><a>Copy Code</a></div></div><code class=" language-cpp">VkImageCreateInfo image_create_info<span class="token operator">=</span> <span class="token punctuation">{</span>
  VK_STRUCTURE_TYPE_IMAGE_CREATE_INFO<span class="token punctuation">,</span>  <span class="token comment">// VkStructureType        sType;</span>
  <span class="token keyword keyword-nullptr">nullptr</span><span class="token punctuation">,</span>                              <span class="token comment">// const void            *pNext</span>
  <span class="token number">0</span><span class="token punctuation">,</span>                                    <span class="token comment">// VkImageCreateFlags     flags</span>
  VK_IMAGE_TYPE_2D<span class="token punctuation">,</span>                     <span class="token comment">// VkImageType            imageType</span>
  VK_FORMAT_R8G8B8A8_UNORM<span class="token punctuation">,</span>             <span class="token comment">// VkFormat               format</span>
  <span class="token punctuation">{</span>                                     <span class="token comment">// VkExtent3D             extent</span>
    width<span class="token punctuation">,</span>                                <span class="token comment">// uint32_t               width</span>
    height<span class="token punctuation">,</span>                               <span class="token comment">// uint32_t               height</span>
    <span class="token number">1</span>                                     <span class="token comment">// uint32_t               depth</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token number">1</span><span class="token punctuation">,</span>                                    <span class="token comment">// uint32_t               mipLevels</span>
  <span class="token number">1</span><span class="token punctuation">,</span>                                    <span class="token comment">// uint32_t               arrayLayers</span>
  VK_SAMPLE_COUNT_1_BIT<span class="token punctuation">,</span>                <span class="token comment">// VkSampleCountFlagBits  samples</span>
  VK_IMAGE_TILING_OPTIMAL<span class="token punctuation">,</span>              <span class="token comment">// VkImageTiling          tiling</span>
  VK_IMAGE_USAGE_TRANSFER_DST_BIT <span class="token operator">|</span>     <span class="token comment">// VkImageUsageFlags      usage</span>
  VK_IMAGE_USAGE_SAMPLED_BIT<span class="token punctuation">,</span>
  VK_SHARING_MODE_EXCLUSIVE<span class="token punctuation">,</span>            <span class="token comment">// VkSharingMode          sharingMode</span>
  <span class="token number">0</span><span class="token punctuation">,</span>                                    <span class="token comment">// uint32_t               queueFamilyIndexCount</span>
  <span class="token keyword keyword-nullptr">nullptr</span><span class="token punctuation">,</span>                              <span class="token comment">// const uint32_t        *pQueueFamilyIndices</span>
  VK_IMAGE_LAYOUT_UNDEFINED             <span class="token comment">// VkImageLayout          initialLayout</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword keyword-return">return</span> <span class="token function">vkCreateImage</span><span class="token punctuation">(</span> <span class="token function">GetDevice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>image_create_info<span class="token punctuation">,</span> <span class="token keyword keyword-nullptr">nullptr</span><span class="token punctuation">,</span> image <span class="token punctuation">)</span> <span class="token operator">==</span> VK_SUCCESS<span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre></div>

<p><strong>1.</strong><em>Tutorial06.cpp, function CreateImage()</em></p>

<p>To create an image we need to prepare a structure of type 
VkImageCreateInfo. This structure contains the basic set of parameters 
required to create an image. These parameters are specified through the 
following members:</p>

<ul>
	<li>sType – Typical type of the structure. It must be equal to a VK_STRUCTURE_TYPE_IMAGE_CREATE_INFO value.</li>
	<li>pNext – Pointer reserved for extensions.</li>
	<li>flags–Parameter that describes additional properties of an image. 
Through this parameter we can specify that the image can be backed by a 
sparse memory. But a more interesting value is a 
VK_IMAGE_CREATE_CUBE_COMPATIBLE_BIT, which allows us to use the image as
 a cubemap. If we don’t have additional requirements, we can set this 
parameter to 0.</li>
	<li>imageType – Basic type (number of dimensions) of the image: 1D, 2D, or 3D.</li>
	<li>format – Format of the image: number of its components, number of bits for each component, and a data type.</li>
	<li>extent – Size of the image (number of texels/pixels) in each dimension.</li>
	<li>mipLevels – Number of levels of detail (mipmaps).</li>
	<li>arrayLayers – Number of array layers.</li>
	<li>samples – Number of per texel samples (one for normal images and more than one for multisampled images).</li>
	<li>tiling – Defines the inner memory structure of the image: linear or optimal.</li>
	<li>usage – Defines all the ways in which we want to use an image during its overall lifetime.</li>
	<li>sharingMode – Specifies whether an image will be accessed by queues
 from multiple families at a time (the same as the sharingMode parameter
 used during swapchain or buffer creation).</li>
	<li>queueFamilyIndexCount–Number of elements in a pQueueFamilyIndices array (used only when concurrent sharing mode is specified).</li>
	<li>pQueueFamilyIndices – Array with indices of all queue families from
 which queues will access an image (used only when concurrent sharing 
mode is specified).</li>
	<li>initialLayout – Memory layout image will be created with. We can 
only provide an undefined or preinitialized layout. We also need to 
perform a layout transition before we can use an image inside command 
buffers.</li>
</ul>

<p>Most of the parameters defined during image creation are quite 
self-explanatory or similar to parameters used during creation of other 
resources. But three parameters require additional explanation.</p>

<p>Tiling defines the inner memory structure of an image (but don’t 
confuse it with a layout). Images may have linear or optimal tiling 
(buffers always have linear tiling). Images with linear tiling have 
their texels laid out linearly, one texel after another, one row after 
another, and so on. We can query for all the relevant image’s memory 
parameters (offset and size, row, array, and depth stride). This way we 
know how the image’s contents are kept in memory. Such tiling can be 
used to copy data to an image directly (by mapping the image’s memory). 
Unfortunately, there are severe restrictions on images with linear 
tiling. For example, the Vulkan specification says that only 2D images 
must support linear tiling. Hardware vendors may implement support for 
linear tiling in other image types, but this is not obligatory, and we 
can’t rely on such support. But, what’s more important, linearly tiled 
images may have worse performance than their optimal counterparts.</p>

<p>When we specify an optimal tiling for images, it means that we don’t 
know how their memory is structured. Each platform we execute our 
application on may keep an image’s contents in a totally different way, 
so it’s practically impossible to map an image’s memory and copy it to 
or from the CPU directly (we need to use a staging resource, a buffer or
 an image). But this way we can create whatever images we want (there 
are no restrictions similar to linearly tiled images) and our 
application will have better performance. That’s why it is strongly 
suggested to always specify optimal tiling for images.</p>

<p>Now let’s focus on an initialLayout parameter. Layout, as it was 
described in a tutorial about swapchains, defines an image’s memory 
layout and is strictly connected with the way in which we want to use an
 image. Each specific usage has its own memory layout. Before we can use
 an image in a given way we need to perform a layout transition. For 
example, swapchain images can be displayed on screen only in 
VK_IMAGE_LAYOUT_PRESENT_SRC_KHR layout. When we want to render into an 
image, we need to set its memory layout to 
VK_IMAGE_LAYOUT_COLOR_ATTACHMENT_OPTIMAL. There is also a general layout
 that allows us to use images any way we want to, but as it impacts 
performance, it’s use is strongly discouraged (use only when really 
necessary).</p>

<p>Now, when we want to change the way in which an image is used, we 
need to perform the above-mentioned layout transition. We must specify a
 current (old) layout and a new one. The old layout can have one of two 
values: current image layout or an undefined layout. When we specify the
 value of a current image’s layout, the image contents are preserved 
during transition. But when we don’t need an image’s contents, we can 
provide an undefined layout. In this way layout transition may be 
performed faster.</p>

<p>And this is when the initialLayout parameter comes in. We can specify
 only two values for it—undefined or preinitialized. The preinitialized 
layout value allows us to preserve an image’s contents during the 
image’s first layout transition. This way we can copy data to an image 
with memory mapping; but this is quite impractical. We can only copy 
data directly (through memory mapping) to images with linear tiling, 
which have restrictions as mentioned above. Practically speaking, these 
images can only be used as staging resources—for transferring data 
between GPU and CPU. But for this purpose we can also use buffers; 
that’s why it is much easier to copy data using a buffer than using an 
image with linear tiling.</p>

<p>All this leads to the conclusion that, in most cases, an undefined 
layout can be used for an initialLayout parameter. In such a case, an 
image’s contents cannot be initialized directly (by mapping its memory).
 But if we want to, we can copy data to such an image by using a staging
 buffer. That approach is presented in this tutorial.</p>

<p>One last thing we need to remember is the usage. Similar to buffers, 
when we create an image we need to designate ALL the ways in which we 
intend to use the image. We can’t change it later and we can’t use the 
image in a way that wasn’t specified during its creation. Here, we want 
to use an image as a texture inside shaders. For this purpose we specify
 the VK_IMAGE_USAGE_SAMPLED_BIT usage. We also need a way to upload data
 to the image. We are going to read it from an image file and copy it to
 the image object. This can be done by transferring data using a staging
 resource. In such a case, the image will be a target of a transfer 
operation; that’s why we also specify the 
VK_IMAGE_USAGE_TRANSFER_DST_BIT usage.</p>

<p>Now, when we have provided values for all the parameters, we can create an image. This is done by calling the <strong>vkCreateImage()</strong>
 function for which we need to provide a handle of a logical device, a 
pointer to the structure described above, and a pointer to a variable of
 type VkImage in which the handle of the created image will be stored.</p>

<h3>Allocating Image Memory<a class="inpage-nav-anchor" id="inpage-nav-1-undefined"></a></h3>

<p>Similar to buffers, images don’t have their own memory, so before we 
can use images we need to bind memory to them. To do this, we first need
 to know what the properties of memory that can be bound to an image 
are. We do this by calling the <strong>vkGetImageMemoryRequirements()</strong> function.</p>
<div class="code-toolbar"><pre class=" language-cpp line-numbers"><div class="toolbar" style="float: right;"><div class="toolbar-item"><a>Copy Code</a></div></div><code class=" language-cpp">VkMemoryRequirements image_memory_requirements<span class="token punctuation">;</span>
<span class="token function">vkGetImageMemoryRequirements</span><span class="token punctuation">(</span> <span class="token function">GetDevice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> Vulkan<span class="token punctuation">.</span><span class="token type-opencl-host-c++ keyword">Image</span><span class="token punctuation">.</span>Handle<span class="token punctuation">,</span> <span class="token operator">&amp;</span>image_memory_requirements <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre></div>

<p><strong>2.</strong><em>Tutorial06.cpp, function AllocateImageMemory()</em></p>

<p>The above call stores the required memory parameters in an 
image_memory_requirements variable. This tells us how much memory we 
need and which memory type supported by a given physical device can be 
used for an image’s memory allocation. If we don’t know what memory 
types are supported by a given physical device we can learn about them 
by calling the <strong>vkGetPhysicalDeviceMemoryProperties()</strong> 
function. This was covered in a previous tutorial, when we were 
allocating memory for a buffer. Next, we can iterate over available 
memory types and check which are compatible with our image.</p>
<div class="code-toolbar"><pre class=" language-cpp line-numbers"><div class="toolbar" style="float: right;"><div class="toolbar-item"><a>Copy Code</a></div></div><code class=" language-cpp"><span class="token keyword keyword-for">for</span><span class="token punctuation">(</span> <span class="token keyword keyword-uint32_t">uint32_t</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> memory_properties<span class="token punctuation">.</span>memoryTypeCount<span class="token punctuation">;</span> <span class="token operator">++</span>i <span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword keyword-if">if</span><span class="token punctuation">(</span> <span class="token punctuation">(</span>image_memory_requirements<span class="token punctuation">.</span>memoryTypeBits <span class="token operator">&amp;</span> <span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">&lt;&lt;</span> i<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span>
    <span class="token punctuation">(</span>memory_properties<span class="token punctuation">.</span>memoryTypes<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>propertyFlags <span class="token operator">&amp;</span> property<span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>

    VkMemoryAllocateInfo memory_allocate_info <span class="token operator">=</span> <span class="token punctuation">{</span>
      VK_STRUCTURE_TYPE_MEMORY_ALLOCATE_INFO<span class="token punctuation">,</span> <span class="token comment">// VkStructureType  sType</span>
      <span class="token keyword keyword-nullptr">nullptr</span><span class="token punctuation">,</span>                                <span class="token comment">// const void      *pNext</span>
      image_memory_requirements<span class="token punctuation">.</span>size<span class="token punctuation">,</span>         <span class="token comment">// VkDeviceSize     allocationSize</span>
      i                                       <span class="token comment">// uint32_t         memoryTypeIndex</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token keyword keyword-if">if</span><span class="token punctuation">(</span> <span class="token function">vkAllocateMemory</span><span class="token punctuation">(</span> <span class="token function">GetDevice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>memory_allocate_info<span class="token punctuation">,</span> <span class="token keyword keyword-nullptr">nullptr</span><span class="token punctuation">,</span> memory <span class="token punctuation">)</span> <span class="token operator">==</span> VK_SUCCESS <span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword keyword-return">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword keyword-return">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre></div>

<p><strong>3.</strong><em>Tutorial06.cpp, function AllocateImageMemory()</em></p>

<p>Each memory type has a specific set of properties. When we want to 
bind memory to an image, we can have our own specific requirements too. 
For example, we may need to access memory directly, by mapping it, so 
such memory must be host-visible. If we have additional requirements we 
can compare them with the properties of each available memory type. When
 we find the match, we can use a given memory type and allocate a memory
 object from it by calling the <strong>vkAllocateMemory()</strong> function.</p>

<p>After that, we need to bind such memory to our image. We do this by calling the <strong>vkBindImageMemory()</strong>
 function and providing the handle of an image to which we want to bind 
memory, a handle of a memory object, and an offset from the beginning of
 the memory object, like this:</p>
<div class="code-toolbar"><pre class=" language-cpp line-numbers"><div class="toolbar" style="float: right;"><div class="toolbar-item"><a>Copy Code</a></div></div><code class=" language-cpp"><span class="token keyword keyword-if">if</span><span class="token punctuation">(</span> <span class="token function">vkBindImageMemory</span><span class="token punctuation">(</span> <span class="token function">GetDevice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> Vulkan<span class="token punctuation">.</span><span class="token type-opencl-host-c++ keyword">Image</span><span class="token punctuation">.</span>Handle<span class="token punctuation">,</span> Vulkan<span class="token punctuation">.</span><span class="token type-opencl-host-c++ keyword">Image</span><span class="token punctuation">.</span><span class="token type-opencl-host-c++ keyword">Memory</span><span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">)</span> <span class="token operator">!=</span> VK_SUCCESS <span class="token punctuation">)</span> <span class="token punctuation">{</span>
  std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Could not bind memory to an image!"</span> <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
  <span class="token keyword keyword-return">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span aria-hidden="true" class="line-numbers-rows"><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre></div>

<p><strong>4.</strong><em>Tutorial06.cpp, function CreateTexture()</em></p>

<p>Offset value is very important when we bind memory to an object. 
Resources in Vulkan have specific requirements for memory offset 
alignment. Information about the requirements is also available in the 
image_memory_requirements variable. The offset that we provide when we 
bind a memory must be a multiple of the variable’s alignment member. 
Zero is always a valid offset value.</p>

<p>Of course, when we want to bind a memory to an image, we don’t need 
to create a new memory object each time. It is more optimal to create a 
small number of larger memory objects and bind parts of them by 
providing a proper offset value.</p>

<h3>Creating Image View<a class="inpage-nav-anchor" id="inpage-nav-1-1"></a></h3>

<p>When we want to use an image in our application we rarely provide the
 image’s handle. Image views are usually used instead. They provide an 
additional layer that interprets the contents of an image for the 
purpose of using it in a specific context. For example, we may have a 
multilayer image (2D array) and we want to render only to a specific 
array layer. To do this we create an image view in which we define the 
layer we want to use. Another example is an image with six array layers.
 Using image views, we can interpret it as a cubemap.</p>

<p>Creation of image views was described in <a href="https://web.archive.org/web/20200917044700/https://software.intel.com/en-us/articles/api-without-secrets-introduction-to-vulkan-part-3#_Toc445674491">Introduction to Vulkan Part 3: First Triangle</a>, so I will provide only the source code used in this part.</p>
<div class="code-toolbar"><pre class=" language-cpp line-numbers"><div class="toolbar" style="float: right;"><div class="toolbar-item"><a>Copy Code</a></div></div><code class=" language-cpp">VkImageViewCreateInfo image_view_create_info<span class="token operator">=</span> <span class="token punctuation">{</span>
  VK_STRUCTURE_TYPE_IMAGE_VIEW_CREATE_INFO<span class="token punctuation">,</span> <span class="token comment">// VkStructureType          sType</span>
  <span class="token keyword keyword-nullptr">nullptr</span><span class="token punctuation">,</span>                                  <span class="token comment">// const void              *pNext</span>
  <span class="token number">0</span><span class="token punctuation">,</span>                                        <span class="token comment">// VkImageViewCreateFlags   flags</span>
  image_parameters<span class="token punctuation">.</span>Handle<span class="token punctuation">,</span>                  <span class="token comment">// VkImage                  image</span>
  VK_IMAGE_VIEW_TYPE_2D<span class="token punctuation">,</span>                    <span class="token comment">// VkImageViewType          viewType</span>
  VK_FORMAT_R8G8B8A8_UNORM<span class="token punctuation">,</span>                 <span class="token comment">// VkFormat                 format</span>
  <span class="token punctuation">{</span>                                         <span class="token comment">// VkComponentMapping       components</span>
    VK_COMPONENT_SWIZZLE_IDENTITY<span class="token punctuation">,</span>            <span class="token comment">// VkComponentSwizzle       r</span>
    VK_COMPONENT_SWIZZLE_IDENTITY<span class="token punctuation">,</span>            <span class="token comment">// VkComponentSwizzle       g</span>
    VK_COMPONENT_SWIZZLE_IDENTITY<span class="token punctuation">,</span>            <span class="token comment">// VkComponentSwizzle       b</span>
    VK_COMPONENT_SWIZZLE_IDENTITY             <span class="token comment">// VkComponentSwizzle       a</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>                                         <span class="token comment">// VkImageSubresourceRange  subresourceRange</span>
    VK_IMAGE_ASPECT_COLOR_BIT<span class="token punctuation">,</span>                <span class="token comment">// VkImageAspectFlags       aspectMask</span>
    <span class="token number">0</span><span class="token punctuation">,</span>                                        <span class="token comment">// uint32_t                 baseMipLevel</span>
    <span class="token number">1</span><span class="token punctuation">,</span>                                        <span class="token comment">// uint32_t                 levelCount</span>
    <span class="token number">0</span><span class="token punctuation">,</span>                                        <span class="token comment">// uint32_t                 baseArrayLayer</span>
    <span class="token number">1</span>                                         <span class="token comment">// uint32_t                 layerCount</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword keyword-return">return</span> <span class="token function">vkCreateImageView</span><span class="token punctuation">(</span> <span class="token function">GetDevice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>image_view_create_info<span class="token punctuation">,</span> <span class="token keyword keyword-nullptr">nullptr</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>image_parameters<span class="token punctuation">.</span>View <span class="token punctuation">)</span> <span class="token operator">==</span> VK_SUCCESS<span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre></div>

<p><strong>5.</strong><em>Tutorial06.cpp, function CreateImageView()</em></p>

<h3>Copying Data to an Image<a class="inpage-nav-anchor" id="inpage-nav-1-2"></a></h3>

<p>Now we need to copy data to our image. We do this by using a staging 
buffer. We first create a buffer big enough to hold our image data. 
Next, we allocate memory that is host-visible (that can be mapped), and 
bind it to the buffer. Then, we copy data to the buffer’s memory like 
this:</p>
<div class="code-toolbar"><pre class=" language-cpp line-numbers"><div class="toolbar" style="float: right;"><div class="toolbar-item"><a>Copy Code</a></div></div><code class=" language-cpp"><span class="token comment">// Prepare data in staging buffer</span>
<span class="token keyword keyword-void">void</span> <span class="token operator">*</span>staging_buffer_memory_pointer<span class="token punctuation">;</span>
<span class="token keyword keyword-if">if</span><span class="token punctuation">(</span> <span class="token function">vkMapMemory</span><span class="token punctuation">(</span> <span class="token function">GetDevice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> Vulkan<span class="token punctuation">.</span>StagingBuffer<span class="token punctuation">.</span><span class="token type-opencl-host-c++ keyword">Memory</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> data_size<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>staging_buffer_memory_pointer <span class="token punctuation">)</span> <span class="token operator">!=</span> VK_SUCCESS <span class="token punctuation">)</span> <span class="token punctuation">{</span>
  std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Could not map memory and upload texture data to a staging buffer!"</span> <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
  <span class="token keyword keyword-return">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">memcpy</span><span class="token punctuation">(</span> staging_buffer_memory_pointer<span class="token punctuation">,</span> texture_data<span class="token punctuation">,</span> data_size <span class="token punctuation">)</span><span class="token punctuation">;</span>

VkMappedMemoryRange flush_range <span class="token operator">=</span> <span class="token punctuation">{</span>
  VK_STRUCTURE_TYPE_MAPPED_MEMORY_RANGE<span class="token punctuation">,</span>  <span class="token comment">// VkStructureType   sType</span>
  <span class="token keyword keyword-nullptr">nullptr</span><span class="token punctuation">,</span>                                <span class="token comment">// const void       *pNext</span>
  Vulkan<span class="token punctuation">.</span>StagingBuffer<span class="token punctuation">.</span><span class="token type-opencl-host-c++ keyword">Memory</span><span class="token punctuation">,</span>            <span class="token comment">// VkDeviceMemory    memory</span>
  <span class="token number">0</span><span class="token punctuation">,</span>                                      <span class="token comment">// VkDeviceSize      offset</span>
  data_size                               <span class="token comment">// VkDeviceSize      size</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token function">vkFlushMappedMemoryRanges</span><span class="token punctuation">(</span> <span class="token function">GetDevice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>flush_range <span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">vkUnmapMemory</span><span class="token punctuation">(</span> <span class="token function">GetDevice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> Vulkan<span class="token punctuation">.</span>StagingBuffer<span class="token punctuation">.</span><span class="token type-opencl-host-c++ keyword">Memory</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

<span aria-hidden="true" class="line-numbers-rows"><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 45px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre></div>

<p><strong>6.</strong><em>Tutorial06.cpp, function CopyTextureData()</em></p>

<p>We map the buffer’s memory. This operation gives us a pointer that 
can be used the way that all other C++ pointers are used. We copy 
texture data to it and inform the driver which parts of the buffer’s 
memory were changed during this operation (we flush the memory). At the 
end, we unmap the memory, but this is not necessary.</p>

<p>Image data is read from a file with the following code:</p>
<div class="code-toolbar"><pre class=" language-cpp line-numbers"><div class="toolbar" style="float: right;"><div class="toolbar-item"><a>Copy Code</a></div></div><code class=" language-cpp"><span class="token keyword keyword-int">int</span> width <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> height <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> data_size <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
std<span class="token operator">::</span>vector texture_data <span class="token operator">=</span> Tools<span class="token operator">::</span><span class="token function">GetImageData</span><span class="token punctuation">(</span> <span class="token string">"Data06/texture.png"</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>width<span class="token punctuation">,</span> <span class="token operator">&amp;</span>height<span class="token punctuation">,</span> <span class="token keyword keyword-nullptr">nullptr</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>data_size <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword keyword-if">if</span><span class="token punctuation">(</span> texture_data<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword keyword-return">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword keyword-if">if</span><span class="token punctuation">(</span> <span class="token operator">!</span><span class="token function">CopyTextureData</span><span class="token punctuation">(</span> <span class="token operator">&amp;</span>texture_data<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> data_size<span class="token punctuation">,</span> width<span class="token punctuation">,</span> height <span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
  std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Could not upload texture data to device memory!"</span> <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
  <span class="token keyword keyword-return">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span aria-hidden="true" class="line-numbers-rows"><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre></div>

<p><strong>7.</strong><em>Tutorial06.cpp, function CreateTexture()</em></p>

<p>For the purpose of this tutorial we will use the following image as a texture:</p>

<p style="text-align:center"><img alt="Image of a large semi truck with intel logo on the side, speeding down the road" src="API%20without%20Secrets_%20Introduction%20to%20Vulkan_%20Part%206_files/intel-truck-1-738455.webp"></p>

<p align="center">&nbsp;</p>

<p>The operation of copying data from a buffer to an image requires 
recording a command buffer and submitting it to a queue. Calling the <strong>vkBeginCommandBuffer()</strong> function starts the recording operation:</p>
<div class="code-toolbar"><pre class=" language-cpp line-numbers"><div class="toolbar" style="float: right;"><div class="toolbar-item"><a>Copy Code</a></div></div><code class=" language-cpp"><span class="token comment">// Prepare command buffer to copy data from staging buffer to a vertex buffer</span>
VkCommandBufferBeginInfo command_buffer_begin_info <span class="token operator">=</span> <span class="token punctuation">{</span>
  VK_STRUCTURE_TYPE_COMMAND_BUFFER_BEGIN_INFO<span class="token punctuation">,</span>  <span class="token comment">// VkStructureType                        sType</span>
  <span class="token keyword keyword-nullptr">nullptr</span><span class="token punctuation">,</span>                                      <span class="token comment">// const void                            *pNext</span>
  VK_COMMAND_BUFFER_USAGE_ONE_TIME_SUBMIT_BIT<span class="token punctuation">,</span>  <span class="token comment">// VkCommandBufferUsageFlags              flags</span>
  <span class="token keyword keyword-nullptr">nullptr</span>                                       <span class="token comment">// const VkCommandBufferInheritanceInfo  *pInheritanceInfo</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

VkCommandBuffer command_buffer <span class="token operator">=</span> Vulkan<span class="token punctuation">.</span>RenderingResources<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>CommandBuffer<span class="token punctuation">;</span>

<span class="token function">vkBeginCommandBuffer</span><span class="token punctuation">(</span> command_buffer<span class="token punctuation">,</span> <span class="token operator">&amp;</span>command_buffer_begin_info<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span aria-hidden="true" class="line-numbers-rows"><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre></div>

<p><strong>8.</strong><em>Tutorial06.cpp, function CopyTextureData()</em></p>

<p>At the beginning of the command buffer recording we need to perform a
 layout transition on our image. We want to copy data to the image so we
 need to change its layout to a VK_IMAGE_LAYOUT_TRANSFER_DST_OPTIMAL. We
 need to do this explicitly using an image memory barrier and calling 
the <strong>vkCmdPipelineBarrier()</strong> function:</p>
<div class="code-toolbar"><pre class=" language-cpp line-numbers"><div class="toolbar" style="float: right;"><div class="toolbar-item"><a>Copy Code</a></div></div><code class=" language-cpp">VkImageSubresourceRange image_subresource_range<span class="token operator">=</span> <span class="token punctuation">{</span>
  VK_IMAGE_ASPECT_COLOR_BIT<span class="token punctuation">,</span>              <span class="token comment">// VkImageAspectFlags        aspectMask</span>
  <span class="token number">0</span><span class="token punctuation">,</span>                                      <span class="token comment">// uint32_t                  baseMipLevel</span>
  <span class="token number">1</span><span class="token punctuation">,</span>                                      <span class="token comment">// uint32_t                  levelCount</span>
  <span class="token number">0</span><span class="token punctuation">,</span>                                      <span class="token comment">// uint32_t                  baseArrayLayer</span>
  <span class="token number">1</span>                                       <span class="token comment">// uint32_t                  layerCount</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

VkImageMemoryBarrier image_memory_barrier_from_undefined_to_transfer_dst <span class="token operator">=</span> <span class="token punctuation">{</span>
  VK_STRUCTURE_TYPE_IMAGE_MEMORY_BARRIER<span class="token punctuation">,</span> <span class="token comment">// VkStructureType           sType</span>
  <span class="token keyword keyword-nullptr">nullptr</span><span class="token punctuation">,</span>                                <span class="token comment">// const void               *pNext</span>
  <span class="token number">0</span><span class="token punctuation">,</span>                                      <span class="token comment">// VkAccessFlags             srcAccessMask</span>
  VK_ACCESS_TRANSFER_WRITE_BIT<span class="token punctuation">,</span>           <span class="token comment">// VkAccessFlags             dstAccessMask</span>
  VK_IMAGE_LAYOUT_UNDEFINED<span class="token punctuation">,</span>              <span class="token comment">// VkImageLayout             oldLayout</span>
  VK_IMAGE_LAYOUT_TRANSFER_DST_OPTIMAL<span class="token punctuation">,</span>   <span class="token comment">// VkImageLayout             newLayout</span>
  VK_QUEUE_FAMILY_IGNORED<span class="token punctuation">,</span>                <span class="token comment">// uint32_t                  srcQueueFamilyIndex</span>
  VK_QUEUE_FAMILY_IGNORED<span class="token punctuation">,</span>                <span class="token comment">// uint32_t                  dstQueueFamilyIndex</span>
  Vulkan<span class="token punctuation">.</span><span class="token type-opencl-host-c++ keyword">Image</span><span class="token punctuation">.</span>Handle<span class="token punctuation">,</span>                    <span class="token comment">// VkImage                   image</span>
  image_subresource_range                 <span class="token comment">// VkImageSubresourceRange   subresourceRange</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token function">vkCmdPipelineBarrier</span><span class="token punctuation">(</span> command_buffer<span class="token punctuation">,</span> VK_PIPELINE_STAGE_TOP_OF_PIPE_BIT<span class="token punctuation">,</span> VK_PIPELINE_STAGE_TRANSFER_BIT<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword keyword-nullptr">nullptr</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword keyword-nullptr">nullptr</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>image_memory_barrier_from_undefined_to_transfer_dst<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span aria-hidden="true" class="line-numbers-rows"><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 45px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre></div>

<p><strong>9.</strong><em>Tutorial06.cpp, function CopyTextureData()</em></p>

<p>Next, we can copy the data itself. To do this we need to provide 
parameters describing both a source and a destination for the data: 
which parts of the image we want to update (imageSubresource member), a 
specific region within the provided part (imageOffset), and the total 
size of the image. For the source of the data we need to provide an 
offset from the beginning of a buffer’s memory where the data starts, 
and how this data is structured, and the size of an imaginary image 
inside the buffer (the size of its rows and columns). Fortunately, we 
can store our data in such a way that it fits our image. This allows us 
to set a zero value for both parameters (bufferRowLength and 
bufferImageHeight), specifying that the data is tightly packed according
 to the image size.</p>
<div class="code-toolbar"><pre class=" language-cpp line-numbers"><div class="toolbar" style="float: right;"><div class="toolbar-item"><a>Copy Code</a></div></div><code class=" language-cpp">VkBufferImageCopy buffer_image_copy_info<span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token number">0</span><span class="token punctuation">,</span>                                  <span class="token comment">// VkDeviceSize               bufferOffset</span>
  <span class="token number">0</span><span class="token punctuation">,</span>                                  <span class="token comment">// uint32_t                   bufferRowLength</span>
  <span class="token number">0</span><span class="token punctuation">,</span>                                  <span class="token comment">// uint32_t                   bufferImageHeight</span>
  <span class="token punctuation">{</span>                                   <span class="token comment">// VkImageSubresourceLayers   imageSubresource</span>
    VK_IMAGE_ASPECT_COLOR_BIT<span class="token punctuation">,</span>          <span class="token comment">// VkImageAspectFlags         aspectMask</span>
    <span class="token number">0</span><span class="token punctuation">,</span>                                  <span class="token comment">// uint32_t                   mipLevel</span>
    <span class="token number">0</span><span class="token punctuation">,</span>                                  <span class="token comment">// uint32_t                   baseArrayLayer</span>
    <span class="token number">1</span>                                   <span class="token comment">// uint32_t                   layerCount</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>                                   <span class="token comment">// VkOffset3D                 imageOffset</span>
    <span class="token number">0</span><span class="token punctuation">,</span>                                  <span class="token comment">// int32_t                    x</span>
    <span class="token number">0</span><span class="token punctuation">,</span>                                  <span class="token comment">// int32_t                    y</span>
    <span class="token number">0</span>                                   <span class="token comment">// int32_t                    z</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>                                   <span class="token comment">// VkExtent3D                 imageExtent</span>
    width<span class="token punctuation">,</span>                              <span class="token comment">// uint32_t                   width</span>
    height<span class="token punctuation">,</span>                             <span class="token comment">// uint32_t                   height</span>
    <span class="token number">1</span>                                   <span class="token comment">// uint32_t                   depth</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token function">vkCmdCopyBufferToImage</span><span class="token punctuation">(</span> command_buffer<span class="token punctuation">,</span> Vulkan<span class="token punctuation">.</span>StagingBuffer<span class="token punctuation">.</span>Handle<span class="token punctuation">,</span> Vulkan<span class="token punctuation">.</span><span class="token type-opencl-host-c++ keyword">Image</span><span class="token punctuation">.</span>Handle<span class="token punctuation">,</span> VK_IMAGE_LAYOUT_TRANSFER_DST_OPTIMAL<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>buffer_image_copy_info <span class="token punctuation">)</span><span class="token punctuation">;</span>

<span aria-hidden="true" class="line-numbers-rows"><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 45px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre></div>

<p><strong>10.</strong><em>Tutorial06.cpp, function CopyTextureData()</em></p>

<p>One last thing is to perform another layout transition. Our image 
will be used as a texture inside shaders, so we need to transition it to
 a VK_IMAGE_LAYOUT_SHADER_READ_ONLY_OPTIMAL layout. After that, we can 
end our command buffer, submit it to a queue, and wait for the transfer 
to complete (in a real-life application, we should skip waiting and 
synchronize operations in some other way; for example, using semaphores,
 to avoid unnecessary pipeline stalls).</p>
<div class="code-toolbar"><pre class=" language-cpp line-numbers"><div class="toolbar" style="float: right;"><div class="toolbar-item"><a>Copy Code</a></div></div><code class=" language-cpp">VkImageMemoryBarrier image_memory_barrier_from_transfer_to_shader_read<span class="token operator">=</span> <span class="token punctuation">{</span>
  VK_STRUCTURE_TYPE_IMAGE_MEMORY_BARRIER<span class="token punctuation">,</span>   <span class="token comment">// VkStructureType              sType</span>
  <span class="token keyword keyword-nullptr">nullptr</span><span class="token punctuation">,</span>                                  <span class="token comment">// const void                  *pNext</span>
  VK_ACCESS_TRANSFER_WRITE_BIT<span class="token punctuation">,</span>             <span class="token comment">// VkAccessFlags                srcAccessMask</span>
  VK_ACCESS_SHADER_READ_BIT<span class="token punctuation">,</span>                <span class="token comment">// VkAccessFlags                dstAccessMask</span>
  VK_IMAGE_LAYOUT_TRANSFER_DST_OPTIMAL<span class="token punctuation">,</span>     <span class="token comment">// VkImageLayout                oldLayout</span>
  VK_IMAGE_LAYOUT_SHADER_READ_ONLY_OPTIMAL<span class="token punctuation">,</span> <span class="token comment">// VkImageLayout                newLayout</span>
  VK_QUEUE_FAMILY_IGNORED<span class="token punctuation">,</span>                  <span class="token comment">// uint32_t                     srcQueueFamilyIndex</span>
  VK_QUEUE_FAMILY_IGNORED<span class="token punctuation">,</span>                  <span class="token comment">// uint32_t                     dstQueueFamilyIndex</span>
  Vulkan<span class="token punctuation">.</span><span class="token type-opencl-host-c++ keyword">Image</span><span class="token punctuation">.</span>Handle<span class="token punctuation">,</span>                      <span class="token comment">// VkImage                      image</span>
  image_subresource_range                   <span class="token comment">// VkImageSubresourceRange      subresourceRange</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token function">vkCmdPipelineBarrier</span><span class="token punctuation">(</span> command_buffer<span class="token punctuation">,</span> VK_PIPELINE_STAGE_TRANSFER_BIT<span class="token punctuation">,</span> VK_PIPELINE_STAGE_FRAGMENT_SHADER_BIT<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword keyword-nullptr">nullptr</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword keyword-nullptr">nullptr</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>image_memory_barrier_from_transfer_to_shader_read<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">vkEndCommandBuffer</span><span class="token punctuation">(</span> command_buffer <span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Submit command buffer and copy data from staging buffer to a vertex buffer</span>
VkSubmitInfo submit_info <span class="token operator">=</span> <span class="token punctuation">{</span>
  VK_STRUCTURE_TYPE_SUBMIT_INFO<span class="token punctuation">,</span>            <span class="token comment">// VkStructureType              sType</span>
  <span class="token keyword keyword-nullptr">nullptr</span><span class="token punctuation">,</span>                                  <span class="token comment">// const void                  *pNext</span>
  <span class="token number">0</span><span class="token punctuation">,</span>                                        <span class="token comment">// uint32_t                     waitSemaphoreCount</span>
  <span class="token keyword keyword-nullptr">nullptr</span><span class="token punctuation">,</span>                                  <span class="token comment">// const VkSemaphore           *pWaitSemaphores</span>
  <span class="token keyword keyword-nullptr">nullptr</span><span class="token punctuation">,</span>                                  <span class="token comment">// const VkPipelineStageFlags  *pWaitDstStageMask;</span>
  <span class="token number">1</span><span class="token punctuation">,</span>                                        <span class="token comment">// uint32_t                     commandBufferCount</span>
  <span class="token operator">&amp;</span>command_buffer<span class="token punctuation">,</span>                          <span class="token comment">// const VkCommandBuffer       *pCommandBuffers</span>
  <span class="token number">0</span><span class="token punctuation">,</span>                                        <span class="token comment">// uint32_t                     signalSemaphoreCount</span>
  <span class="token keyword keyword-nullptr">nullptr</span>                                   <span class="token comment">// const VkSemaphore           *pSignalSemaphores</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword keyword-if">if</span><span class="token punctuation">(</span> <span class="token function">vkQueueSubmit</span><span class="token punctuation">(</span> <span class="token function">GetGraphicsQueue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>Handle<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>submit_info<span class="token punctuation">,</span> VK_NULL_HANDLE <span class="token punctuation">)</span> <span class="token operator">!=</span> VK_SUCCESS <span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword keyword-return">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">vkDeviceWaitIdle</span><span class="token punctuation">(</span> <span class="token function">GetDevice</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

<span aria-hidden="true" class="line-numbers-rows"><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 45px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre></div>

<p><strong>11.</strong><em>Tutorial06.cpp, function CopyTextureData()</em></p>

<p>Now our image is created and fully initialized (contains proper data). But we are not yet done preparing our texture.</p>

<h2>Creating a Sampler<a class="inpage-nav-anchor" id="inpage-nav-2"></a></h2>

<p>In OpenGL, when we created a texture, both the image and its sampling
 parameters had to be specified. In later versions of OpenGL we could 
also create separate sampler objects. Inside a shader, we usually 
created variables of type sampler2D, which also combined both images and
 their sampling parameters (samplers). In Vulkan, we need to create 
images and samplers separately.</p>

<p>Samplers define the way in which image data is read inside shaders: 
whether filtering is enabled, whether we want to use mipmaps (or maybe a
 specific subrange of mipmaps), or what kind of addressing mode we want 
to use (clamping or wrapping).</p>
<div class="code-toolbar"><pre class=" language-cpp line-numbers"><div class="toolbar" style="float: right;"><div class="toolbar-item"><a>Copy Code</a></div></div><code class=" language-cpp">VkSamplerCreateInfo sampler_create_info<span class="token operator">=</span> <span class="token punctuation">{</span>
  VK_STRUCTURE_TYPE_SAMPLER_CREATE_INFO<span class="token punctuation">,</span>  <span class="token comment">// VkStructureType        sType</span>
  <span class="token keyword keyword-nullptr">nullptr</span><span class="token punctuation">,</span>                                <span class="token comment">// const void*            pNext</span>
  <span class="token number">0</span><span class="token punctuation">,</span>                                      <span class="token comment">// VkSamplerCreateFlags   flags</span>
  VK_FILTER_LINEAR<span class="token punctuation">,</span>                       <span class="token comment">// VkFilter               magFilter</span>
  VK_FILTER_LINEAR<span class="token punctuation">,</span>                       <span class="token comment">// VkFilter               minFilter</span>
  VK_SAMPLER_MIPMAP_MODE_NEAREST<span class="token punctuation">,</span>         <span class="token comment">// VkSamplerMipmapMode    mipmapMode</span>
  VK_SAMPLER_ADDRESS_MODE_CLAMP_TO_EDGE<span class="token punctuation">,</span>  <span class="token comment">// VkSamplerAddressMode   addressModeU</span>
  VK_SAMPLER_ADDRESS_MODE_CLAMP_TO_EDGE<span class="token punctuation">,</span>  <span class="token comment">// VkSamplerAddressMode   addressModeV</span>
  VK_SAMPLER_ADDRESS_MODE_CLAMP_TO_EDGE<span class="token punctuation">,</span>  <span class="token comment">// VkSamplerAddressMode   addressModeW</span>
  <span class="token number">0.0f</span><span class="token punctuation">,</span>                                   <span class="token comment">// float                  mipLodBias</span>
  VK_FALSE<span class="token punctuation">,</span>                               <span class="token comment">// VkBool32               anisotropyEnable</span>
  <span class="token number">1.0f</span><span class="token punctuation">,</span>                                   <span class="token comment">// float                  maxAnisotropy</span>
  VK_FALSE<span class="token punctuation">,</span>                               <span class="token comment">// VkBool32               compareEnable</span>
  VK_COMPARE_OP_ALWAYS<span class="token punctuation">,</span>                   <span class="token comment">// VkCompareOp            compareOp</span>
  <span class="token number">0.0f</span><span class="token punctuation">,</span>                                   <span class="token comment">// float                  minLod</span>
  <span class="token number">0.0f</span><span class="token punctuation">,</span>                                   <span class="token comment">// float                  maxLod</span>
  VK_BORDER_COLOR_FLOAT_TRANSPARENT_BLACK<span class="token punctuation">,</span><span class="token comment">// VkBorderColor          borderColor</span>
  VK_FALSE                                <span class="token comment">// VkBool32               unnormalizedCoordinates</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword keyword-return">return</span> <span class="token function">vkCreateSampler</span><span class="token punctuation">(</span> <span class="token function">GetDevice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>sampler_create_info<span class="token punctuation">,</span> <span class="token keyword keyword-nullptr">nullptr</span><span class="token punctuation">,</span> sampler <span class="token punctuation">)</span> <span class="token operator">==</span> VK_SUCCESS<span class="token punctuation">;</span>

<span aria-hidden="true" class="line-numbers-rows"><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre></div>

<p><strong>12.</strong><em>Tutorial06.cpp, function CreateSampler()</em></p>

<p>All the above parameters are defined through variables of type VkSamplerCreateInfo. It has many members:</p>

<ul>
	<li>sType - Type of the structure. It should be equal to a VK_STRUCTURE_TYPE_SAMPLER_CREATE_INFO value.</li>
	<li>pNext - Pointer reserved for extensions.</li>
	<li>flags - Must be set to zero. This parameter is reserved for future use.</li>
	<li>magFilter - Type of filtering (nearest or linear) used for magnification.</li>
	<li>minFilter - Type of filtering (nearest or linear) used for minification.</li>
	<li>mipmapMode - Type of filtering (nearest or linear) used for mipmap lookup.</li>
	<li>addressModeU - Addressing mode for U coordinates that are outside of a &lt;0.0; 1.0&gt; range.</li>
	<li>addressModeV - Addressing mode for V coordinates that are outside of a &lt;0.0; 1.0&gt; range.</li>
	<li>addressModeW - Addressing mode for W coordinates that are outside of a &lt;0.0; 1.0&gt; range.</li>
	<li>mipLodBias - Value of bias added to mipmap’s level of detail 
calculations. If we want to offset fetching data from a specific mipmap,
 we can provide a value other than 0.0.</li>
	<li>anisotropyEnable - Parameter defining whether anisotropic filtering should be used.</li>
	<li>maxAnisotropy - Maximal allowed value used for anisotropic filtering (clamping value).</li>
	<li>compareEnable - Enables comparison against a reference value during texture lookups.</li>
	<li>compareOp–Type of comparison performed during lookups if the compareEnable parameter is set to true.</li>
	<li>minLod - Minimal allowed level of detail used during data fetching.
 If calculated level of detail (mipmap level) is lower than this value, 
it will be clamped.</li>
	<li>maxLod - Maximal allowed level of detail used during data fetching.
 If the calculated level of detail (mipmap level) is greater than this 
value, it will be clamped.</li>
	<li>borderColor - Specifies predefined color of border pixels. Border 
color is used when address mode includes clamping to border colors.</li>
	<li>unnormalizedCoordinates - Usually (when this parameter is set to 
false) we provide texture coordinates using a normalized &lt;0.0; 
1.0&gt; range. When set to true, this parameter allows us to specify 
that we want to use unnormalized coordinates and address texture using 
texels (in a &lt;0; texture dimension&gt; range, similar to OpenGL’s 
rectangle textures).</li>
</ul>

<p>Sampler object is created by calling the <strong>vkCreateSampler()</strong> function, for which we provide a pointer to the structure described above.</p>

<h2>Using Descriptor Sets<a class="inpage-nav-anchor" id="inpage-nav-3"></a></h2>

<p>We created an image, bound a memory to it, and we even uploaded data 
to the image. We also created a sampler to set up sampling parameters 
for our texture. Now we want to use the texture. How can we do this? We 
do it through descriptor sets.</p>

<p>As mentioned at the beginning, resources used inside shaders are called descriptors. In Vulkan we have 11 types of descriptors:</p>

<ul>
	<li><strong>Samplers</strong> - Define the way image data is read. Inside shaders, samplers can be used with multiple images.</li>
	<li><strong>Sampled images</strong> - Define images from which we can read data inside shaders. We can read data from a single image using different samplers.</li>
	<li><strong>Combined image samplers</strong> - These descriptors 
combine both sampler and sampled image as one object. From the API 
perspective (our application), we still need to create both a sampler 
and an image, but inside the shader they appear as a single object. 
Using them may be more optimal (may have better performance) than using 
separate samplers and sampled images.</li>
	<li><strong>Storage images</strong> - This descriptor allows us to both read and store data inside an image.</li>
	<li><strong>Input attachments</strong> - This a specific usage of 
render pass’s attachments. When we want to read data from an image which
 is used as an attachment inside the same render pass, we can only do it
 through an input attachment. This way we do not need to end a render 
pass and start another one, but we are restricted to only fragment 
shaders, and to only a single location per fragment shader instance (a 
given instance of a fragment shader can read data from coordinates 
associated with the fragment shader’s coordinates).</li>
	<li><strong>Uniform buffers</strong> (and their dynamic variation) - 
Uniform buffers allow us to read data from uniform variables. In Vulkan,
 such variables cannot be placed inside the global scope; we need to use
 uniform buffers.</li>
	<li><strong>Storage buffers</strong> (and their dynamic variation) - Storage buffers allow us to both read and store data inside variables.</li>
	<li><strong>Uniform texel buffers</strong> - These allow the contents 
of buffers to be treated as if they contain texture data, they are 
interpreted as texels with a selected number of components and format. 
In this way, we can access very large arrays of data (much larger than 
uniform buffers).</li>
	<li><strong>Storage texel buffers</strong> - hese are similar to uniform texel buffers. Not only can they be used for reading, but they can also be used for storing data.</li>
</ul>

<p>All of the above descriptors are created from samplers, images, or 
buffers. The difference is in the way that we use them and access inside
 shaders. All additional parameters of such access may have performance 
implications. For example, with storage buffers we can only read data, 
but reading data is probably much faster than storing data inside 
storage buffers. Similarly, texel buffers allow us to access more 
elements than with uniform buffers, but this may also come with the cost
 of worse performance. We should remember to select a descriptor that 
fits our needs.</p>

<p>In this tutorial we want to use a texture. For this purpose we 
created an image and a sampler. We will use both to prepare a combined 
image sampler descriptor.</p>

<h3>Creating a Descriptor Set Layout<a class="inpage-nav-anchor" id="inpage-nav-3-undefined"></a></h3>

<p>Preparing resources to be used by shaders should begin with creating a
 descriptor set layout. Descriptor sets are opaque objects in which we 
store handles of resources. Layouts define the structure of descriptor 
sets—what types of descriptors they contain, how many descriptors of 
each type there are, and what their order is.</p>

<p style="text-align:center"><img alt="image of a diagram" src="API%20without%20Secrets_%20Introduction%20to%20Vulkan_%20Part%206_files/descriptor-set-layout-738455.webp"></p>

<p>Descriptor set layout creation starts by defining the parameters of 
all descriptors available in a given set. This is done by filling a 
structure variable of type VkDescriptorSetLayoutBinding:</p>
<div class="code-toolbar"><pre class=" language-cpp line-numbers"><div class="toolbar" style="float: right;"><div class="toolbar-item"><a>Copy Code</a></div></div><code class=" language-cpp">VkDescriptorSetLayoutBinding layout_binding<span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token number">0</span><span class="token punctuation">,</span>                                          <span class="token comment">// uint32_t             binding</span>
  VK_DESCRIPTOR_TYPE_COMBINED_IMAGE_SAMPLER<span class="token punctuation">,</span>  <span class="token comment">// VkDescriptorType     descriptorType</span>
  <span class="token number">1</span><span class="token punctuation">,</span>                                          <span class="token comment">// uint32_t             descriptorCount</span>
  VK_SHADER_STAGE_FRAGMENT_BIT<span class="token punctuation">,</span>               <span class="token comment">// VkShaderStageFlags   stageFlags</span>
  <span class="token keyword keyword-nullptr">nullptr</span>                                     <span class="token comment">// const VkSampler     *pImmutableSamplers</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span aria-hidden="true" class="line-numbers-rows"><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre></div>

<p><strong>13.</strong><em>Tutorial06.cpp, function CreateDescriptorSetLayout()</em></p>

<p>The above description contains the following members:</p>

<ul>
	<li>binding – Index of a descriptor within a given set. All descriptors
 from a single layout (and set) must have a unique binding. This same 
binding is also used inside shaders to access a descriptor.</li>
	<li>descriptorType – The type of a descriptor (sampler, uniform buffer, and so on.)</li>
	<li>descriptorCount – Number of descriptors of a selected type accessed
 as an array. For a single descriptor, 1 value should be used.</li>
	<li>stageFlags – Set of flags defining all shader stages that will have
 access to a given descriptor. For better performance, we should specify
 only those stages that will access the given resource.</li>
	<li>pImmutableSamplers – Affects only samplers that should be 
permanently bound into the layout (and cannot be changed later). But we 
don’t have to worry about this parameter, and we can bind samplers as 
any other descriptors by setting this parameter to null.</li>
</ul>

<p>In our example, we want to use only one descriptor of a combined 
image sampler, which will be accessed only by a fragment shader. It will
 be the first (binding zero) descriptor in a given layout. To avoid 
wasting memory, we should keep bindings as compactly as possible (as 
close to zero as possible), because drivers may allocate memory for 
descriptor slots even if they are not used.</p>

<p>We can prepare similar parameters for other descriptors accessed from
 a single set. Then, pointers to such variables are provided to a 
variable of type VkDescriptorSetLayoutCreateInfo:</p>
<div class="code-toolbar"><pre class=" language-cpp line-numbers"><div class="toolbar" style="float: right;"><div class="toolbar-item"><a>Copy Code</a></div></div><code class=" language-cpp">VkDescriptorSetLayoutCreateInfo descriptor_set_layout_create_info<span class="token operator">=</span> <span class="token punctuation">{</span>
  VK_STRUCTURE_TYPE_DESCRIPTOR_SET_LAYOUT_CREATE_INFO<span class="token punctuation">,</span>  <span class="token comment">// VkStructureType                      sType</span>
  <span class="token keyword keyword-nullptr">nullptr</span><span class="token punctuation">,</span>                                              <span class="token comment">// const void                          *pNext</span>
  <span class="token number">0</span><span class="token punctuation">,</span>                                                    <span class="token comment">// VkDescriptorSetLayoutCreateFlags     flags</span>
  <span class="token number">1</span><span class="token punctuation">,</span>                                                    <span class="token comment">// uint32_t                             bindingCount</span>
  <span class="token operator">&amp;</span>layout_binding                                       <span class="token comment">// const VkDescriptorSetLayoutBinding  *pBindings</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword keyword-if">if</span><span class="token punctuation">(</span> <span class="token function">vkCreateDescriptorSetLayout</span><span class="token punctuation">(</span> <span class="token function">GetDevice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>descriptor_set_layout_create_info<span class="token punctuation">,</span> <span class="token keyword keyword-nullptr">nullptr</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>Vulkan<span class="token punctuation">.</span>DescriptorSet<span class="token punctuation">.</span>Layout <span class="token punctuation">)</span> <span class="token operator">!=</span> VK_SUCCESS <span class="token punctuation">)</span> <span class="token punctuation">{</span>
  std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Could not create descriptor set layout!"</span> <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
  <span class="token keyword keyword-return">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span aria-hidden="true" class="line-numbers-rows"><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 45px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre></div>

<p><strong>14.</strong><em>Tutorial06.cpp, function CreateDescriptorSetLayout()</em></p>

<p>This structure contains just a few members:</p>

<ul>
	<li>sType – The type of the structure. It should be equal to VK_STRUCTURE_TYPE_DESCRIPTOR_SET_LAYOUT_CREATE_INFO.</li>
	<li>pNext – Pointer reserved for extensions.</li>
	<li>flags – This parameter allows us to provide additional options for 
layout creation. But as they are connected with using extensions, we can
 set this parameter to zero.</li>
	<li>bindingCount – The number of bindings, elements in the pBindings array.</li>
	<li>pBindings – A pointer to an array with descriptions of all 
resources in a given layout. This array must be no smaller than the 
value of the bindingCount parameter.</li>
</ul>

<p>After we have filled in the structure, we can call the <strong>vkCreateDescriptorSetLayout()</strong> function to create a descriptor set layout. We will need this layout later, multiple times.</p>

<h3>Creating a Descriptor Pool<a class="inpage-nav-anchor" id="inpage-nav-3-1"></a></h3>

<p>Next step is to prepare a descriptor set. Descriptor sets, similar to
 command buffers, are not created directly; they are instead allocated 
from pools. Before we can allocate a descriptor set, we need to create a
 descriptor pool.</p>
<div class="code-toolbar"><pre class=" language-cpp line-numbers"><div class="toolbar" style="float: right;"><div class="toolbar-item"><a>Copy Code</a></div></div><code class=" language-cpp">VkDescriptorPoolSize pool_size<span class="token operator">=</span> <span class="token punctuation">{</span>
  VK_DESCRIPTOR_TYPE_COMBINED_IMAGE_SAMPLER<span class="token punctuation">,</span>      <span class="token comment">// VkDescriptorType               type</span>
  <span class="token number">1</span>                                               <span class="token comment">// uint32_t                       descriptorCount</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

VkDescriptorPoolCreateInfo descriptor_pool_create_info <span class="token operator">=</span> <span class="token punctuation">{</span>
  VK_STRUCTURE_TYPE_DESCRIPTOR_POOL_CREATE_INFO<span class="token punctuation">,</span>  <span class="token comment">// VkStructureType                sType</span>
  <span class="token keyword keyword-nullptr">nullptr</span><span class="token punctuation">,</span>                                        <span class="token comment">// const void                    *pNext</span>
  <span class="token number">0</span><span class="token punctuation">,</span>                                              <span class="token comment">// VkDescriptorPoolCreateFlags    flags</span>
  <span class="token number">1</span><span class="token punctuation">,</span>                                              <span class="token comment">// uint32_t                       maxSets</span>
  <span class="token number">1</span><span class="token punctuation">,</span>                                              <span class="token comment">// uint32_t                       poolSizeCount</span>
  <span class="token operator">&amp;</span>pool_size                                      <span class="token comment">// const VkDescriptorPoolSize    *pPoolSizes</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword keyword-if">if</span><span class="token punctuation">(</span> <span class="token function">vkCreateDescriptorPool</span><span class="token punctuation">(</span> <span class="token function">GetDevice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>descriptor_pool_create_info<span class="token punctuation">,</span> <span class="token keyword keyword-nullptr">nullptr</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>Vulkan<span class="token punctuation">.</span>DescriptorSet<span class="token punctuation">.</span>Pool <span class="token punctuation">)</span> <span class="token operator">!=</span> VK_SUCCESS <span class="token punctuation">)</span> <span class="token punctuation">{</span>
  std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Could not create descriptor pool!"</span> <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
  <span class="token keyword keyword-return">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 45px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre></div>

<p><strong>15.</strong><em>Tutorial06.cpp, function CreateDescriptorPool()</em></p>

<p>Creating a descriptor pool involves specifying how many descriptor 
sets can be allocated from it. At the same time, we also need to specify
 what types of descriptors, and how many of them can be allocated from 
the pool across all sets. For example, let’s imagine that we want to 
allocate a single sampled image and a single storage buffer from a given
 pool, and that we can allocate two descriptor sets from the pool. When 
doing this, if we allocate one descriptor set with a sampled image, the 
second descriptor can contain only a storage buffer. If a single 
descriptor set allocated from that pool contains both resources, we 
can’t allocate another set because it would have to be empty. During 
descriptor pool creation we define the total number of descriptors and 
total number of sets that can be allocated from it. This is done in two 
steps.</p>

<p>First, we prepare variables of type VkDescriptorPoolSize that specify
 the type of a descriptor and the total number of descriptors of a 
selected type that can be allocated from the pool. Next, we provide an 
array of such variables to a variable of type 
VkDescriptorPoolCreateInfo. It contains the following members:</p>

<ul>
	<li>sType – The type of the structure. In this case it should be set to VK_STRUCTURE_TYPE_DESCRIPTOR_POOL_CREATE_INFO.</li>
	<li>pNext – Pointer reserved for extensions.</li>
	<li>flags – This parameter defines (when using a 
VK_DESCRIPTOR_POOL_CREATE_FREE_DESCRIPTOR_SET_BIT flag) whether 
individual sets allocated from the pool can be freed or reset 
separately. If this parameter is set to zero, all descriptor sets 
allocated from the pool can only be reset at once (in bulk) by resetting
 the whole pool.</li>
	<li>maxSets – Is the total number of sets that can be allocated from the pool.</li>
	<li>poolSizeCount–Defines the number of elements in the pPoolSizes array.</li>
	<li>pPoolSizes – Is a pointer to an array containing no less than 
poolSizeCount elements containing descriptor types and a total number of
 descriptors of that type that can be allocated from the pool.</li>
</ul>

<p>In our example we want to allocate only a single descriptor set with 
only one descriptor of a combined image sampler type. We prepare 
parameters according to our example and create a descriptor pool by 
calling the <strong>vkCreateDescriptorPool()</strong> function.</p>

<h3>Allocating Descriptor Sets<a class="inpage-nav-anchor" id="inpage-nav-3-2"></a></h3>

<p>Now we are ready to allocate the descriptor set itself. Code that does this is quite short:</p>
<div class="code-toolbar"><pre class=" language-cpp line-numbers"><div class="toolbar" style="float: right;"><div class="toolbar-item"><a>Copy Code</a></div></div><code class=" language-cpp">VkDescriptorSetAllocateInfo descriptor_set_allocate_info<span class="token operator">=</span> <span class="token punctuation">{</span>
  VK_STRUCTURE_TYPE_DESCRIPTOR_SET_ALLOCATE_INFO<span class="token punctuation">,</span> <span class="token comment">// VkStructureType                sType</span>
  <span class="token keyword keyword-nullptr">nullptr</span><span class="token punctuation">,</span>                                        <span class="token comment">// const void                    *pNext</span>
  Vulkan<span class="token punctuation">.</span>DescriptorSet<span class="token punctuation">.</span>Pool<span class="token punctuation">,</span>                      <span class="token comment">// VkDescriptorPool               descriptorPool</span>
  <span class="token number">1</span><span class="token punctuation">,</span>                                              <span class="token comment">// uint32_t                       descriptorSetCount</span>
  <span class="token operator">&amp;</span>Vulkan<span class="token punctuation">.</span>DescriptorSet<span class="token punctuation">.</span>Layout                    <span class="token comment">// const VkDescriptorSetLayout   *pSetLayouts</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword keyword-if">if</span><span class="token punctuation">(</span> <span class="token function">vkAllocateDescriptorSets</span><span class="token punctuation">(</span> <span class="token function">GetDevice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>descriptor_set_allocate_info<span class="token punctuation">,</span> <span class="token operator">&amp;</span>Vulkan<span class="token punctuation">.</span>DescriptorSet<span class="token punctuation">.</span>Handle <span class="token punctuation">)</span> <span class="token operator">!=</span> VK_SUCCESS <span class="token punctuation">)</span> <span class="token punctuation">{</span>
  std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Could not allocate descriptor set!"</span> <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
  <span class="token keyword keyword-return">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span aria-hidden="true" class="line-numbers-rows"><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 45px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre></div>

<p><strong>16.</strong><em>Tutorial06.cpp, function AllocateDescriptorSet()</em></p>

<p>To allocate a descriptor set we need to prepare a variable of VkDescriptorSetAllocateInfo type, which has the following members:</p>

<ul>
	<li>sType – Standard type of the structure. For the purpose of 
descriptor set allocation we need to set this member to a value of 
VK_STRUCTURE_TYPE_DESCRIPTOR_SET_ALLOCATE_INFO.</li>
	<li>pNext – Pointer reserved for extensions.</li>
	<li>descriptorPool – Handle of a descriptor pool from which the command buffer should be allocated.</li>
	<li>descriptorSetCount – Number of descriptor sets we want to allocate (and number of elements in the pSetLayouts member).</li>
	<li>pSetLayouts – Pointer to an array with at least descriptorSetCount 
elements. Each element of this array must contain a descriptor set 
layout that defines the inner structure of the allocated descriptor set 
(elements may repeat; for example, we can allocate five descriptor sets 
at once, all with the same layout).</li>
</ul>

<p>As we can see in the above structure, we need to provide descriptor 
set layouts. That’s why we needed to create them earlier. To allocate a 
selected number of descriptor sets from a provided pool we need to 
provide a pointer to the above structure to the <strong>vkAllocateDescriptorSets()</strong> function.</p>

<h3>Updating Descriptor Sets<a class="inpage-nav-anchor" id="inpage-nav-3-3"></a></h3>

<p>We prepared a descriptor set, but it is <em>empty</em>; it’s uninitialized. Now we need to <em>fill</em> it or update it. This means that we tell the driver which resources should be used for descriptors inside the set.</p>

<p>We can update a descriptor set in two ways:</p>

<ul>
	<li>By writing to the descriptor set—this way we provide new resources.</li>
	<li>By copying data from another descriptor set—if we have a previously
 updated descriptor set and if we also want to use some of its 
descriptors in another descriptor we can copy them; this approach can be
 much faster than writing descriptor sets directly from the CPU.</li>
</ul>

<p>As we don’t have another descriptor set, we need to write to our 
single descriptor set directly. For each descriptor type we need to 
prepare two structures. One, common for all descriptor types, is the 
VkWriteDescriptorSet structure. It contains the following members:</p>

<ul>
	<li>sType – Type of the structure. We need to use a VK_STRUCTURE_TYPE_WRITE_DESCRIPTOR_SET value.</li>
	<li>pNext – Pointer reserved for extensions.</li>
	<li>dstSet – Handle of a descriptor set that we want to update (fill with specific resources).</li>
	<li>dstBinding – Index within the descriptor set that we want to 
update. We must provide one of the bindings specified during descriptor 
set layout creation. What’s more, the selected binding must correspond 
to a provided type of the descriptor.</li>
	<li>dstArrayElement – Specifies the first array index we want to 
update. Using a single VkWriteDescriptorSet structure we can update 
multiple elements of a single array. Let’s say we have a four-element 
array of samplers and we want to update the last two (with indices 2 and
 3); we can provide two samplers and update the array starting from 
index 2.</li>
	<li>descriptorCount – Number of descriptors we want to update (number 
of elements in pImageInfo or pBufferInfo, or pTexelBufferView array). 
For ordinary descriptors we set the value to one. But for arrays we can 
provide larger values.</li>
	<li>descriptorType – Type of the descriptor we are going to update. It 
must be the same as the descriptor type provided during descriptor set 
layout creation with the same binding (index within a descriptor set).</li>
	<li>pImageInfo – Pointer to an array with at least descriptorCount 
elements of type VkDescriptorImageInfo. Each such element must contain 
handles of specific resources when we want to update 
VK_DESCRIPTOR_TYPE_SAMPLER, VK_DESCRIPTOR_TYPE_SAMPLED_IMAGE, 
VK_DESCRIPTOR_TYPE_COMBINED_IMAGE_SAMPLER, 
VK_DESCRIPTOR_TYPE_STORAGE_IMAGE, or VK_DESCRIPTOR_TYPE_INPUT_ATTACHMENT
 descriptors.</li>
	<li>pBufferInfo – Pointer to an array with at least descriptorCount 
elements of type VkDescriptorBufferInfo. Each such element must contain 
handles of specific resources when we want to update 
VK_DESCRIPTOR_TYPE_UNIFORM_BUFFER, VK_DESCRIPTOR_TYPE_STORAGE_BUFFER, 
VK_DESCRIPTOR_TYPE_UNIFORM_BUFFER_DYNAMIC, or 
VK_DESCRIPTOR_TYPE_STORAGE_BUFFER_DYNAMIC descriptors.</li>
	<li>pTexelBufferView – Array with at least descriptorCount VkBufferView
 handles. This array is used when we want to update 
VK_DESCRIPTOR_TYPE_UNIFORM_BUFFER, VK_DESCRIPTOR_TYPE_STORAGE_BUFFER, 
VK_DESCRIPTOR_TYPE_UNIFORM_BUFFER_DYNAMIC, or 
VK_DESCRIPTOR_TYPE_STORAGE_BUFFER_DYNAMIC descriptors.</li>
</ul>

<p>Depending on the type of descriptor we want to update, we need to 
prepare a variable (or an array of variables) of type 
VkDescriptorImageInfo, VkDescriptorBufferInfo, or VkBufferView. Here, we
 want to update a combined image sampler descriptor, so we need to 
prepare a variable of type VkDescriptorImageInfo. It contains the 
following members:</p>

<ul>
	<li>sampler – Handle of a sampler object.</li>
	<li>imageView – Handle of an image view.</li>
	<li>imageLayout – Here we provide a layout that the image will have when the descriptor is accessed inside shaders.</li>
</ul>

<p>In this structure we provide parameters of specific resources; we 
point to created and valid resources that we want to use inside shaders.
 Members of this structure are initialized based on the descriptor type.
 For example, if we update a sampler, we need to provide only the handle
 of a sampler. If we want to update a sampled image, we need to provide 
an image view’s handle and an image’s layout. But image won’t be 
transitioned to this layout automatically (as in render passes). We need
 to perform the transition to this layout ourselves, explicitly through 
pipeline barriers or, in case of input attachments, through render 
passes. What’s more, we need to provide a layout that corresponds to a 
given usage.</p>

<p>In our example we want to use a texture. We can do this either by 
using separate sampler and sampled image descriptors or by using a 
combined image sampler descriptor (as in typical OpenGL applications). 
The latter approach can be more optimal (some hardware platforms may 
sample data from combined image samplers faster than from separate 
samplers and sampled images), and we present that approach here. When we
 want to update a combined image sampler, we need to provide all three 
members of the VkDescriptorImageInfo structure:</p>
<div class="code-toolbar"><pre class=" language-cpp line-numbers"><div class="toolbar" style="float: right;"><div class="toolbar-item"><a>Copy Code</a></div></div><code class=" language-cpp">VkDescriptorImageInfo image_info<span class="token operator">=</span> <span class="token punctuation">{</span>
  Vulkan<span class="token punctuation">.</span><span class="token type-opencl-host-c++ keyword">Image</span><span class="token punctuation">.</span><span class="token type-opencl-host-c++ keyword">Sampler</span><span class="token punctuation">,</span>                       <span class="token comment">// VkSampler                      sampler</span>
  Vulkan<span class="token punctuation">.</span><span class="token type-opencl-host-c++ keyword">Image</span><span class="token punctuation">.</span>View<span class="token punctuation">,</span>                          <span class="token comment">// VkImageView                    imageView</span>
  VK_IMAGE_LAYOUT_SHADER_READ_ONLY_OPTIMAL    <span class="token comment">// VkImageLayout                  imageLayout</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

VkWriteDescriptorSet descriptor_writes <span class="token operator">=</span> <span class="token punctuation">{</span>
  VK_STRUCTURE_TYPE_WRITE_DESCRIPTOR_SET<span class="token punctuation">,</span>     <span class="token comment">// VkStructureType                sType</span>
  <span class="token keyword keyword-nullptr">nullptr</span><span class="token punctuation">,</span>                                    <span class="token comment">// const void                    *pNext</span>
  Vulkan<span class="token punctuation">.</span>DescriptorSet<span class="token punctuation">.</span>Handle<span class="token punctuation">,</span>                <span class="token comment">// VkDescriptorSet                dstSet</span>
  <span class="token number">0</span><span class="token punctuation">,</span>                                          <span class="token comment">// uint32_t                       dstBinding</span>
  <span class="token number">0</span><span class="token punctuation">,</span>                                          <span class="token comment">// uint32_t                       dstArrayElement</span>
  <span class="token number">1</span><span class="token punctuation">,</span>                                          <span class="token comment">// uint32_t                       descriptorCount</span>
  VK_DESCRIPTOR_TYPE_COMBINED_IMAGE_SAMPLER<span class="token punctuation">,</span>  <span class="token comment">// VkDescriptorType               descriptorType</span>
  <span class="token operator">&amp;</span>image_info<span class="token punctuation">,</span>                                <span class="token comment">// const VkDescriptorImageInfo   *pImageInfo</span>
  <span class="token keyword keyword-nullptr">nullptr</span><span class="token punctuation">,</span>                                    <span class="token comment">// const VkDescriptorBufferInfo  *pBufferInfo</span>
  <span class="token keyword keyword-nullptr">nullptr</span>                                     <span class="token comment">// const VkBufferView            *pTexelBufferView</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token function">vkUpdateDescriptorSets</span><span class="token punctuation">(</span> <span class="token function">GetDevice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>descriptor_writes<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword keyword-nullptr">nullptr</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

<span aria-hidden="true" class="line-numbers-rows"><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre></div>

<p><strong>17.</strong><em>Tutorial06.cpp, function UpdateDescriptorSet()</em></p>

<p>A pointer to a variable of type VkDescriptorImageInfo is then 
provided in a variable of type VkWriteDescriptorSet. As we update only 
one descriptor, we need only one instance of both structures. But of 
course we can update more descriptors at a time, in which case we need 
to prepare more variables, which are then provided to the <strong>vkUpdateDescriptorSets()</strong> function.</p>

<h3>Creating a Pipeline Layout<a class="inpage-nav-anchor" id="inpage-nav-3-4"></a></h3>

<p>We are not yet done. When we want to use descriptors, allocating and 
updating descriptor sets is not the only job we need to perform. We have
 prepared specific resources that are almost ready to be used inside 
shaders, but descriptor sets are used to store handles of specific 
resources. These handles are provided during command buffer recording. 
We need to prepare information <em>for the other side of the barricade:</em>
 the driver also needs to know what types of resources the given 
pipeline needs access to. This information is crucial when we create a 
pipeline as it may impact its internal structure or maybe even a shader 
compilation. And this information is provided in a so-called <em>pipeline layout</em>.</p>

<p>The pipeline layout stores information about resource types that the 
given pipeline has access to. These resources involve descriptors and 
push constant ranges. For now we can skip push constants and focus only 
on descriptors.</p>

<p>To create a pipeline layout and prepare information about the types 
of resources accessed by the pipeline, we need to provide an array of 
descriptor set layouts. This is done through the following members of a 
variable of type VkPipelineLayoutCreateInfo:</p>

<ul>
	<li>sType – Pointer reserved for extensions.</li>
	<li>flags – This parameter is reserved for future use.</li>
	<li>setLayoutCount – Number of elements in the pSetLayouts member and 
number of separate descriptor sets that can be used with this pipeline.</li>
	<li>pSetLayouts – Array with descriptor set layouts.</li>
	<li>pushConstantRangeCount – Number of separate push constant ranges.</li>
	<li>pPushConstantRanges – Array with elements describing push constant ranges.</li>
</ul>

<p>And this is when descriptor set layouts are used again. The single 
descriptor set layout defines resource types contained within a single 
descriptor set. And an array of these layouts defines resource types 
that the given pipeline needs access to.</p>

<p>To create a pipeline layout we just call the <strong>vkCreatePipelineLayout()</strong> function. We did this in <a href="https://web.archive.org/web/20200917044700/https://software.intel.com/en-us/articles/api-without-secrets-introduction-to-vulkan-part-3#_Toc445674491">Introduction to Vulkan Part 3: First Triangle</a>.
 But there we created an empty layout (with no push constants and with 
no access to descriptor resources). Here, we create a more typical 
pipeline layout.</p>
<div class="code-toolbar"><pre class=" language-cpp line-numbers"><div class="toolbar" style="float: right;"><div class="toolbar-item"><a>Copy Code</a></div></div><code class=" language-cpp">VkPipelineLayoutCreateInfo layout_create_info<span class="token operator">=</span> <span class="token punctuation">{</span>
  VK_STRUCTURE_TYPE_PIPELINE_LAYOUT_CREATE_INFO<span class="token punctuation">,</span>  <span class="token comment">// VkStructureType                sType</span>
  <span class="token keyword keyword-nullptr">nullptr</span><span class="token punctuation">,</span>                                        <span class="token comment">// const void                    *pNext</span>
  <span class="token number">0</span><span class="token punctuation">,</span>                                              <span class="token comment">// VkPipelineLayoutCreateFlags    flags</span>
  <span class="token number">1</span><span class="token punctuation">,</span>                                              <span class="token comment">// uint32_t                       setLayoutCount</span>
  <span class="token operator">&amp;</span>Vulkan<span class="token punctuation">.</span>DescriptorSet<span class="token punctuation">.</span>Layout<span class="token punctuation">,</span>                   <span class="token comment">// const VkDescriptorSetLayout   *pSetLayouts</span>
  <span class="token number">0</span><span class="token punctuation">,</span>                                              <span class="token comment">// uint32_t                       pushConstantRangeCount</span>
  <span class="token keyword keyword-nullptr">nullptr</span>                                         <span class="token comment">// const VkPushConstantRange     *pPushConstantRanges</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword keyword-if">if</span><span class="token punctuation">(</span> <span class="token function">vkCreatePipelineLayout</span><span class="token punctuation">(</span> <span class="token function">GetDevice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>layout_create_info<span class="token punctuation">,</span> <span class="token keyword keyword-nullptr">nullptr</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>Vulkan<span class="token punctuation">.</span>PipelineLayout <span class="token punctuation">)</span> <span class="token operator">!=</span> VK_SUCCESS <span class="token punctuation">)</span> <span class="token punctuation">{</span>
  std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Could not create pipeline layout!"</span> <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
  <span class="token keyword keyword-return">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword keyword-return">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>

<span aria-hidden="true" class="line-numbers-rows"><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre></div>

<p><strong>18.</strong><em>Tutorial06.cpp, function CreatePipelineLayout()</em></p>

<p>Such layout is then provided during pipeline creation. We also need 
to use this layout when we bind descriptor sets during command buffer 
recording. So we need to store the pipeline layout handle.</p>

<h3>Binding Descriptor Sets<a class="inpage-nav-anchor" id="inpage-nav-3-5"></a></h3>

<p>One last thing is to bind descriptor sets to the command buffer 
during recording. We can have multiple different descriptor sets or 
multiple, similar descriptor sets (with the same layouts), but they may 
contain different resource handles. Which of these descriptors are used 
during rendering is defined during command buffer recording. Before we 
can draw anything, we need to set up a valid state (according to the 
drawing parameters). For each command buffer we record we need to do it 
from scratch.</p>

<p>Drawing operations requires us to use render passes and pipelines. If
 a pipeline uses descriptor resources (when shaders access images or 
buffers), we need to bind descriptor sets by calling the <strong>vkCmdBindDescriptorSets()</strong>
 function. For this function we must provide a handle of the pipeline 
layout and an array of descriptor set handles. We bind descriptor sets 
to specific indices. The given index we bind a descriptor set to must 
correspond to its layout provided at the same index during pipeline 
creation.</p>
<div class="code-toolbar"><pre class=" language-cpp line-numbers"><div class="toolbar" style="float: right;"><div class="toolbar-item"><a>Copy Code</a></div></div><code class=" language-cpp"><span class="token function">vkCmdBeginRenderPass</span><span class="token punctuation">(</span> command_buffer<span class="token punctuation">,</span> <span class="token operator">&amp;</span>render_pass_begin_info<span class="token punctuation">,</span> VK_SUBPASS_CONTENTS_INLINE <span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">vkCmdBindPipeline</span><span class="token punctuation">(</span> command_buffer<span class="token punctuation">,</span> VK_PIPELINE_BIND_POINT_GRAPHICS<span class="token punctuation">,</span> Vulkan<span class="token punctuation">.</span>GraphicsPipeline <span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// ...</span>

<span class="token function">vkCmdBindDescriptorSets</span><span class="token punctuation">(</span> command_buffer<span class="token punctuation">,</span> VK_PIPELINE_BIND_POINT_GRAPHICS<span class="token punctuation">,</span> Vulkan<span class="token punctuation">.</span>PipelineLayout<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>Vulkan<span class="token punctuation">.</span>DescriptorSet<span class="token punctuation">.</span>Handle<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword keyword-nullptr">nullptr</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">vkCmdDraw</span><span class="token punctuation">(</span> command_buffer<span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">vkCmdEndRenderPass</span><span class="token punctuation">(</span> command_buffer <span class="token punctuation">)</span><span class="token punctuation">;</span>

<span aria-hidden="true" class="line-numbers-rows"><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 45px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre></div>

<p><strong>19.</strong><em>Tutorial06.cpp, function PrepareFrame()</em></p>

<h3>Accessing Descriptors in Shaders<a class="inpage-nav-anchor" id="inpage-nav-3-6"></a></h3>

<p>One more thing. We need to write proper shaders. In this example, we 
access a texture inside a fragment shader only, so only the fragment 
shader will be presented.</p>

<p>From the beginning of this tutorial we have been referring to 
descriptor sets, bindings within descriptor sets, and about binding 
descriptor sets themselves. At the same time, we may have multiple 
descriptor sets bound to a command buffer. Each descriptor set may 
contain multiple resources. This data conforms to a specific <em>address</em> that we use inside shaders. This address is defined through a layout() specifier like this:</p>

<p>layout(set=S, binding=B) uniform &lt;variable type&gt; &lt;variable name&gt;</p>

<p><strong><em>Set</em></strong> defines an index that the given descriptor set was bound to through the <strong>vkCmdBindDescriptorSets()</strong> function. <strong><em>Binding</em></strong>
 specifies the index of a resource within the provided set and 
corresponds to the binding defined during descriptor set layout 
creation. In our case, we have only one descriptor set provided at index
 zero, with only one combined image sampler at binding zero. Combined 
image samplers are accessed inside shaders through sampler1D, sampler2D,
 or sampler 3D variables. So our fragment shader’s source code looks 
like this:</p>
<div class="code-toolbar"><pre class=" language-cpp line-numbers"><div class="toolbar" style="float: right;"><div class="toolbar-item"><a>Copy Code</a></div></div><code class=" language-cpp"><span class="token macro property">#version 450</span>

<span class="token function">layout</span><span class="token punctuation">(</span>set<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> binding<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span> uniform sampler2D u_Texture<span class="token punctuation">;</span>

<span class="token function">layout</span><span class="token punctuation">(</span>location <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span> in vec2 v_Texcoord<span class="token punctuation">;</span>

<span class="token function">layout</span><span class="token punctuation">(</span>location <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span> out vec4 o_Color<span class="token punctuation">;</span>

<span class="token keyword keyword-void">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  o_Color <span class="token operator">=</span> <span class="token function">texture</span><span class="token punctuation">(</span> u_Texture<span class="token punctuation">,</span> v_Texcoord <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span aria-hidden="true" class="line-numbers-rows"><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre></div>

<p><strong>20.</strong><em>shader.frag, -</em></p>

<h2>Tutorial06 Execution<a class="inpage-nav-anchor" id="inpage-nav-4"></a></h2>

<p>We can see below how the final image generated by the sample program should look:</p>

<p style="text-align:center"><img alt="Image of a large semi truck with intel logo on the side, speeding down the road" src="API%20without%20Secrets_%20Introduction%20to%20Vulkan_%20Part%206_files/intel-truck-2-738455.webp"></p>

<p>We render a quad that has a texture applied to its surface. The quad 
should adjust its size (and aspect) to match the window’s size and shape
 (if we stretch the window, the quad and the image will be stretched 
too).</p>

<h2>Cleaning Up<a class="inpage-nav-anchor" id="inpage-nav-5"></a></h2>

<p>Before we can end our application, we should perform a cleanup.</p>
<div class="code-toolbar"><pre class=" language-cpp line-numbers"><div class="toolbar" style="float: right;"><div class="toolbar-item"><a>Copy Code</a></div></div><code class=" language-cpp"><span class="token comment">// ...</span>

<span class="token keyword keyword-if">if</span><span class="token punctuation">(</span> Vulkan<span class="token punctuation">.</span>GraphicsPipeline <span class="token operator">!=</span> VK_NULL_HANDLE <span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">vkDestroyPipeline</span><span class="token punctuation">(</span> <span class="token function">GetDevice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> Vulkan<span class="token punctuation">.</span>GraphicsPipeline<span class="token punctuation">,</span> <span class="token keyword keyword-nullptr">nullptr</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
  Vulkan<span class="token punctuation">.</span>GraphicsPipeline <span class="token operator">=</span> VK_NULL_HANDLE<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword keyword-if">if</span><span class="token punctuation">(</span> Vulkan<span class="token punctuation">.</span>PipelineLayout <span class="token operator">!=</span> VK_NULL_HANDLE <span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">vkDestroyPipelineLayout</span><span class="token punctuation">(</span> <span class="token function">GetDevice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> Vulkan<span class="token punctuation">.</span>PipelineLayout<span class="token punctuation">,</span> <span class="token keyword keyword-nullptr">nullptr</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
  Vulkan<span class="token punctuation">.</span>PipelineLayout <span class="token operator">=</span> VK_NULL_HANDLE<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// ...</span>

<span class="token keyword keyword-if">if</span><span class="token punctuation">(</span> Vulkan<span class="token punctuation">.</span>DescriptorSet<span class="token punctuation">.</span>Pool <span class="token operator">!=</span> VK_NULL_HANDLE <span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">vkDestroyDescriptorPool</span><span class="token punctuation">(</span> <span class="token function">GetDevice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> Vulkan<span class="token punctuation">.</span>DescriptorSet<span class="token punctuation">.</span>Pool<span class="token punctuation">,</span> <span class="token keyword keyword-nullptr">nullptr</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
  Vulkan<span class="token punctuation">.</span>DescriptorSet<span class="token punctuation">.</span>Pool <span class="token operator">=</span> VK_NULL_HANDLE<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword keyword-if">if</span><span class="token punctuation">(</span> Vulkan<span class="token punctuation">.</span>DescriptorSet<span class="token punctuation">.</span>Layout <span class="token operator">!=</span> VK_NULL_HANDLE <span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">vkDestroyDescriptorSetLayout</span><span class="token punctuation">(</span> <span class="token function">GetDevice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> Vulkan<span class="token punctuation">.</span>DescriptorSet<span class="token punctuation">.</span>Layout<span class="token punctuation">,</span> <span class="token keyword keyword-nullptr">nullptr</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
  Vulkan<span class="token punctuation">.</span>DescriptorSet<span class="token punctuation">.</span>Layout <span class="token operator">=</span> VK_NULL_HANDLE<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword keyword-if">if</span><span class="token punctuation">(</span> Vulkan<span class="token punctuation">.</span><span class="token type-opencl-host-c++ keyword">Image</span><span class="token punctuation">.</span><span class="token type-opencl-host-c++ keyword">Sampler</span> <span class="token operator">!=</span> VK_NULL_HANDLE <span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">vkDestroySampler</span><span class="token punctuation">(</span> <span class="token function">GetDevice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> Vulkan<span class="token punctuation">.</span><span class="token type-opencl-host-c++ keyword">Image</span><span class="token punctuation">.</span><span class="token type-opencl-host-c++ keyword">Sampler</span><span class="token punctuation">,</span> <span class="token keyword keyword-nullptr">nullptr</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
  Vulkan<span class="token punctuation">.</span><span class="token type-opencl-host-c++ keyword">Image</span><span class="token punctuation">.</span><span class="token type-opencl-host-c++ keyword">Sampler</span> <span class="token operator">=</span> VK_NULL_HANDLE<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword keyword-if">if</span><span class="token punctuation">(</span> Vulkan<span class="token punctuation">.</span><span class="token type-opencl-host-c++ keyword">Image</span><span class="token punctuation">.</span>View <span class="token operator">!=</span> VK_NULL_HANDLE <span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">vkDestroyImageView</span><span class="token punctuation">(</span> <span class="token function">GetDevice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> Vulkan<span class="token punctuation">.</span><span class="token type-opencl-host-c++ keyword">Image</span><span class="token punctuation">.</span>View<span class="token punctuation">,</span> <span class="token keyword keyword-nullptr">nullptr</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
  Vulkan<span class="token punctuation">.</span><span class="token type-opencl-host-c++ keyword">Image</span><span class="token punctuation">.</span>View <span class="token operator">=</span> VK_NULL_HANDLE<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword keyword-if">if</span><span class="token punctuation">(</span> Vulkan<span class="token punctuation">.</span><span class="token type-opencl-host-c++ keyword">Image</span><span class="token punctuation">.</span>Handle <span class="token operator">!=</span> VK_NULL_HANDLE <span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">vkDestroyImage</span><span class="token punctuation">(</span> <span class="token function">GetDevice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> Vulkan<span class="token punctuation">.</span><span class="token type-opencl-host-c++ keyword">Image</span><span class="token punctuation">.</span>Handle<span class="token punctuation">,</span> <span class="token keyword keyword-nullptr">nullptr</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
  Vulkan<span class="token punctuation">.</span><span class="token type-opencl-host-c++ keyword">Image</span><span class="token punctuation">.</span>Handle <span class="token operator">=</span> VK_NULL_HANDLE<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword keyword-if">if</span><span class="token punctuation">(</span> Vulkan<span class="token punctuation">.</span><span class="token type-opencl-host-c++ keyword">Image</span><span class="token punctuation">.</span><span class="token type-opencl-host-c++ keyword">Memory</span> <span class="token operator">!=</span> VK_NULL_HANDLE <span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">vkFreeMemory</span><span class="token punctuation">(</span> <span class="token function">GetDevice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> Vulkan<span class="token punctuation">.</span><span class="token type-opencl-host-c++ keyword">Image</span><span class="token punctuation">.</span><span class="token type-opencl-host-c++ keyword">Memory</span><span class="token punctuation">,</span> <span class="token keyword keyword-nullptr">nullptr</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
  Vulkan<span class="token punctuation">.</span><span class="token type-opencl-host-c++ keyword">Image</span><span class="token punctuation">.</span><span class="token type-opencl-host-c++ keyword">Memory</span> <span class="token operator">=</span> VK_NULL_HANDLE<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span aria-hidden="true" class="line-numbers-rows"><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span><span style="height: 22.5px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre></div>

<p><strong>21.</strong><em>Tutorial06.cpp, function destructor</em></p>

<p>We destroy both pipeline and its layout by calling the <strong>vkDestroyPipeline()</strong> and <strong>vkDestroyPipelineLayout()</strong> functions. Next, we destroy the descriptor pool with the <strong>vkDestroyDescriptorPool()</strong> function and the descriptor set layout with the <strong>vkDestroyDescriptorSetLayout()</strong>
 function. We of course destroy other resources, but we already know how
 to do this. You may notice that we don’t free a descriptor set. We can 
free each descriptor set separately if a proper flag was provided during
 descriptor pool creation. But we don’t have to—when we destroy a 
descriptor pool all sets allocated from this pool are also freed.</p>

<h2>Conclusion<a class="inpage-nav-anchor" id="inpage-nav-6"></a></h2>

<p>This part of the tutorial presented a way to use textures (combined 
image samplers, in fact) inside shaders. To do this we created an image 
and allocated and bound a memory to it. We also created an image view. 
Next, we copied data from a staging buffer to the image to initialize 
its contents. We also created a sampler object that defined a way in 
which image data was read inside shaders.</p>

<p>Next, we prepared a descriptor set. First, we created a descriptor 
set layout. After that, a descriptor pool was created from which a 
single descriptor set was allocated. We updated this set with the 
sampler and the image view handles.</p>

<p>The descriptor set layout was also used to define resources to which 
our graphics pipeline had access. This was done during pipeline layout 
creation. This layout was then used when we bound the descriptor sets to
 a command buffer.</p>

<p>We also learned how to prepare a shader code that accessed the 
combined image sampler to read its data (to sample it as a texture). It 
was done inside a fragment shader that was used during rendering of our 
simple geometry. This way we applied a texture to the surface of this 
geometry.</p>

<p>&nbsp;</p>

<p><strong>Next Up: <a href="https://web.archive.org/web/20200917044700/https://software.intel.com/content/www/us/en/develop/articles/api-without-secrets-introduction-to-vulkan-part-7.html">Uniform Buffers- Using Buffers in Shaders</a></strong></p>

<p>&nbsp;</p>

<hr>
<p>This sample source code is released under the <a href="https://web.archive.org/web/20200917044700/https://software.intel.com/en-us/articles/intel-sample-source-code-license-agreement/">Intel Sample Source Code License Agreement</a>.</p>
<p></p>
    </div>
</div>
<div class="clearfix"></div>
<div class="ct-outer-table">
    
</div>
</div>

<div class="idzRelatedContent">












































</div>

<div class="bladepar intelparsys">
</div>


    <div class="hidden">
    <sup>1</sup></div>
    <div class="disclaimer parbase editorial-disclaimer">












    
    
        
        
        
            <div class="disclaimer-component">
                <div class="container">
                    <h4>Product and Performance Information</h4>
                    
                    
                    
                        
                            <div class="disclaimer"><sup>1</sup><p>Intel's
 compilers may or may not optimize to the same degree for non-Intel 
microprocessors for optimizations that are not unique to Intel 
microprocessors. These optimizations include SSE2, SSE3, and SSSE3 
instruction sets and other optimizations. Intel does not guarantee the 
availability, functionality, or effectiveness of any optimization on 
microprocessors not manufactured by Intel. Microprocessor-dependent 
optimizations in this product are intended for use with Intel 
microprocessors. Certain optimizations not specific to Intel 
microarchitecture are reserved for Intel microprocessors. Please refer 
to the applicable product User and Reference Guides for more information
 regarding the specific instruction sets covered by this notice.</p>
<p>Notice revision #20110804</p>
</div>
                        
                    
                    
                </div>
            </div>
        
    

</div>


<div class="idzRateUs parbase">








<div class="rate-us-container">
    <div class="idz-survey">
        <div class="rate-us">
            <section class="blade blade-support-featured-content blade-featured-content solid theme-dark-1 no-print">
                <input type="hidden" id="hostname" value="/feedback/uri">
                <div class="container">
                    <div class="support-options">
                        <div class="blade-support-feedback">
                            <div class="container">
                                <div class="row">
                                    <div class="col-sm-10 rateUs-title text-left">
                                        <figure>
                                            <span class="feedback-icon"></span>
                                        </figure>
                                        <h2>Give Feedback</h2>
                                        <h2 class="feedback-close-btn"></h2>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="clearfix visible-xs space-xs"></div>
                </div>
            </section>
        </div>
        <div class="iframe-survey">
            <div class="iframe-form"><iframe src="https://web.archive.org/web/20200917044700if_/https://intel.az1.qualtrics.com/jfe/form/SV_eai43JosW74IFxz?Q_JFE=qdg" data-ruffle-polyfilled=""></iframe></div>
        </div>
    </div>
</div>
</div>

<script src="API%20without%20Secrets_%20Introduction%20to%20Vulkan_%20Part%206_files/prism.js"></script>

    
        <div id="contextualFooter-PlaceHolder" class="contextualFooter"></div>
    



































<footer class="global blade solid brand-lighter-gray theme-light-2 component" data-component-id="1" data-component="footer" role="contentinfo" data-wap_type="wa_skip_track" id="skip-footer">
    <div class="container">
        <div class="content-footer">
            <div class="content">
                
                    
                        
                            <ul class="footer-links">
                                
                                    <li>
                                        <a href="https://web.archive.org/web/20200917044700/https://software.intel.com/content/www/us/en/company-overview/company-overview.html">Company Information</a>
                                    </li>
                                
                                    <li>
                                        <a href="https://web.archive.org/web/20200917044700/https://software.intel.com/content/www/us/en/corporate-responsibility/corporate-responsibility.html">Our Commitment</a>
                                    </li>
                                
                                    <li>
                                        <a href="https://web.archive.org/web/20200917044700/https://software.intel.com/content/www/us/en/blogs-communities-social.html">Communities </a>
                                    </li>
                                
                                    <li>
                                        <a href="https://web.archive.org/web/20200917044700/https://www.intc.com/investor-relations/default.aspx">Investor Relations</a>
                                    </li>
                                
                                    <li>
                                        <a href="https://web.archive.org/web/20200917044700/https://software.intel.com/content/www/us/en/company-overview/contact-us.html">Contact Us</a>
                                    </li>
                                
                                    <li>
                                        <a href="https://web.archive.org/web/20200917044700/https://newsroom.intel.com/">Newsroom</a>
                                    </li>
                                
                                    <li>
                                        <a href="https://web.archive.org/web/20200917044700/https://software.intel.com/content/www/us/en/jobs/jobs-at-intel.html"> Jobs</a>
                                    </li>
                                
                            </ul>
                        
                        
                        
                    
                
                    
                        
                        
                            <ul class="footer-links social">
                                
                                    <li>
                                        
                                            
                                            
                                                <a href="https://web.archive.org/web/20200917044700/https://www.facebook.com/Intel" target="" aria-label="Intel on Facebook" data-wap="{&quot;linktype&quot;:&quot;footersocial&quot;}">
                                                    <i aria-hidden="true" class="fa-facebook"></i>
                                                </a>
                                            
                                        
                                    </li>
                                
                                    <li>
                                        
                                            
                                            
                                                <a href="https://web.archive.org/web/20200917044700/https://twitter.com/intel" target="" aria-label="Intel on Twitter" data-wap="{&quot;linktype&quot;:&quot;footersocial&quot;}">
                                                    <i aria-hidden="true" class="fa-twitter"></i>
                                                </a>
                                            
                                        
                                    </li>
                                
                                    <li>
                                        
                                            
                                            
                                                <a href="https://web.archive.org/web/20200917044700/https://www.linkedin.com/company/intel-corporation" target="" aria-label="Intel on LinkedIn" data-wap="{&quot;linktype&quot;:&quot;footersocial&quot;}">
                                                    <i aria-hidden="true" class="fa-linkedin"></i>
                                                </a>
                                            
                                        
                                    </li>
                                
                                    <li>
                                        
                                            
                                            
                                                <a href="https://web.archive.org/web/20200917044700/https://www.youtube.com/user/channelintel?sub_confirmation=1" target="" aria-label="Intel on YouTube" data-wap="{&quot;linktype&quot;:&quot;footersocial&quot;}">
                                                    <i aria-hidden="true" class="fa-youtube"></i>
                                                </a>
                                            
                                        
                                    </li>
                                
                                    <li>
                                        
                                            
                                            
                                                <a href="https://web.archive.org/web/20200917044700/https://www.instagram.com/intel/" target="" aria-label="Intel on Instagram" data-wap="{&quot;linktype&quot;:&quot;footersocial&quot;}">
                                                    <i aria-hidden="true" class="fa-instagram"></i>
                                                </a>
                                            
                                        
                                    </li>
                                
                            </ul>
                        
                        
                    
                
                    
                        
                        
                        
                            <ul class="footer-links secondary-links" id="footerSecondaryLinks">
                                
                                    <li>
                                        
                                            
                                            
                                                <small>© Intel Corporation</small>
                                            
                                        
                                    </li>
                                
                                    <li>
                                        
                                            
                                                <a href="https://web.archive.org/web/20200917044700/https://software.intel.com/content/www/us/en/legal/terms-of-use.html">
                                                    <small>Terms of Use</small>
                                                </a>
                                            
                                            
                                        
                                    </li>
                                
                                    <li>
                                        
                                            
                                                <a href="https://web.archive.org/web/20200917044700/https://software.intel.com/content/www/us/en/legal/trademarks.html">
                                                    <small>*Trademarks</small>
                                                </a>
                                            
                                            
                                        
                                    </li>
                                
                                    <li>
                                        
                                            
                                                <a href="https://web.archive.org/web/20200917044700/https://software.intel.com/content/www/us/en/privacy/intel-privacy-notice.html">
                                                    <small>Privacy</small>
                                                </a>
                                            
                                            
                                        
                                    </li>
                                
                                    <li>
                                        
                                            
                                                <a href="https://web.archive.org/web/20200917044700/https://software.intel.com/content/www/us/en/privacy/intel-cookie-notice.html">
                                                    <small>Cookies</small>
                                                </a>
                                            
                                            
                                        
                                    </li>
                                
                                    <li>
                                        
                                            
                                                <a href="https://web.archive.org/web/20200917044700/https://software.intel.com/content/www/us/en/corporate-responsibility/statement-combating-modern-slavery.html">
                                                    <small>Supply Chain Transparency </small>
                                                </a>
                                            
                                            
                                        
                                    </li>
                                
                                    <li>
                                        
                                            
                                                <a href="https://web.archive.org/web/20200917044700/https://software.intel.com/content/www/us/en/siteindex.html">
                                                    <small>Site Map</small>
                                                </a>
                                            
                                            
                                        
                                    </li>
                                
                            </ul>
                        
                    
                
            </div>
            <div class="logo-container">
                <a href="https://web.archive.org/web/20200917044700/https://software.intel.com/content/www/us/en/homepage.html" class="footer-logo-rebrand" aria-label="Intel Footer Logo" title="Intel Footer Logo">
                    <img src="API%20without%20Secrets_%20Introduction%20to%20Vulkan_%20Part%206_files/intel-footer-logo.svg" class="footer-logo-rebrand" alt="Intel Footer Logo" title="Intel Footer Logo">
                </a>
            </div>
        </div>
    </div>
</footer>












    <textarea id="defers" title="" style="display:none;">    
        &lt;script&gt;var isTargetEnabled =false;&lt;/script&gt;
        
        
            















    
    
        
        
        
        
        
        
        
    




    
    
        
    




    
    
    
    
        
    

&lt;script type="text/javascript"&gt;
    var cq_tms = {
        wa_emtcontenttype: 
"emtcontenttype:webpage/article,emtcontenttype:softwareordriver/
sourcecode/codesample,emtcontenttype:training/tutorial",
        wa_emtprogramminglanguage: "emtprogramminglanguage:cc",
        wa_emttechnology: 
"emttechnology:thirdpartytechnologies/
opengl,emttechnology:inteltechnologies/
intelgraphicsandvisualtechnologies/
virtualrealitypoweredbyinteltechnology,emttechnology:inteltechnologies/
intelgraphicsandvisualtechnologies,emttechnology:thirdpartytechnologies/
vulkan",
        wa_emtskilllevel: 
"emtskilllevel:intermediate,emtskilllevel:beginner",
        wa_idzcustomtags: 
"idzcustomtags:gameteam,idzcustomtags:featured",
        wa_emtsubject: 
"emtsubject:itinformationtechnology/visualcomputing/
videogamedevelopment",
        
        wa_industry_type: "",
        wa_partner_prog: "",
        wa_subject: 
"emtsubject:itinformationtechnology/visualcomputing/
videogamedevelopment",
        wa_biz_size: "",
        wa_emt_org: "",
        wa_emt_intel: "",
        wa_partner_type: "",
        wa_programidentifier: "",
        wa_location: "us",
        wa_language: "en",
        wa_english_title: "API without Secrets: Introduction to Vulkan* 
Part 6",
        wa_content_type: "article",
        wa_intel_platform: "",
        wa_applications: "",
        wa_local: "en_US",
        wa_intel_technology: 
"emttechnology:inteltechnologies/
intelgraphicsandvisualtechnologies,emttechnology:inteltechnologies/
intelgraphicsandvisualtechnologies/
virtualrealitypoweredbyinteltechnology,emttechnology:thirdpartytechnologies/
opengl,emttechnology:thirdpartytechnologies/vulkan",
        wa_system_type: "",
        wa_product_name: "",
        wa_audience: 
"emtaudience:business/btssbusinesstechnologysolutionspecialist/
softwaredeveloper",
        wa_life_cycle: "",
        wa_cq_url: 
"/content/www/us/en/develop/articles/api-without-secrets-introduction-
to-vulkan-part-6.html",
        wa_page_type_micro: "editorialposttemplate",
        wa_env: "prd",
        wa_cq_pub_env: "publish",
        wa_transl_status: "",
        wa_product_id: "",
        wa_software: "",
        wa_reference_design: "",
        wa_codename: "",
        wa_created_date: "1587984593897",
        wa_modifed_date: "1586858224455",
        wa_off_time: "1633707367406",
        wa_ownedby: "",
        wa_managedby: "",
        wa_idz_nid : "738455",
        wa_event_type: "",
        wa_idz_custom_tags: 
"idzcustomtags:featured,idzcustomtags:gameteam",
        wa_programming_language: "emtprogramminglanguage:cc",
        wa_skill_level: 
"emtskilllevel:beginner,emtskilllevel:intermediate",
        wa_solution: "",
        wa_product_formFactor: "",
        wa_operating_system: "",
        wa_marketing_products: "",
        wa_ssg_third_party_prod_sys_sol: "",
        
        wa_secondary_content_type: 
"emtcontenttype:softwareordriver/sourcecode/
codesample,emtcontenttype:training/tutorial"
    };
    
    
    
    cq_tms.wa_tms_sync_load = "deferred";
    
&lt;/script&gt;





    &lt;script type="text/javascript" 
src="/web/20200917044700js_/https://software.intel.com/content/dam/www/
global/wap/tms.sync.js" async&gt;&lt;/script&gt;


        
    
    &lt;link rel="stylesheet" 
href="/web/20200917044700cs_/https://software.intel.com/etc.clientlibs/
settings/wcm/designs/ver/8.0.00.50/intel/clientlibs/pages/commons-
page.min.css" type="text/css"&gt;&lt;script 
src="/web/20200917044700js_/https://software.intel.com/etc.clientlibs/
settings/wcm/designs/ver/8.0.00.50/intel/clientlibs/pages/commons-
page.min.js" defer&gt;&lt;/script&gt;


&lt;script&gt;!function(){var 
e=setInterval(function(){"undefined"!=typeof 
$CQ&amp;&amp;($CQ(function(){CQ_Analytics.SegmentMgr.loadSegments("/etc/
segmentation"),CQ_Analytics.ClientContextUtils.init("/etc/clientcontext/
intel",window.location.pathname.substr(0,window.location.pathname.indexOf(".")))}),clearInterval(e))},100)}
();&lt;/script&gt;










&lt;link rel="stylesheet" type="text/css" 
href="/web/20200917044700cs_/https://software.intel.com/etc.clientlibs/
settings/wcm/designs/intel/us/en/css/resources/css/
intel.rwd.override.css"/&gt;

</textarea>







<deepl-input-controller translate="no"></deepl-input-controller></body></html>
<!--
     FILE ARCHIVED ON 04:47:00 Sep 17, 2020 AND RETRIEVED FROM THE
     INTERNET ARCHIVE ON 21:54:30 Sep 10, 2025.
     JAVASCRIPT APPENDED BY WAYBACK MACHINE, COPYRIGHT INTERNET ARCHIVE.

     ALL OTHER CONTENT MAY ALSO BE PROTECTED BY COPYRIGHT (17 U.S.C.
     SECTION 108(a)(3)).
-->
<!--
playback timings (ms):
  captures_list: 0.885
  exclusion.robots: 0.049
  exclusion.robots.policy: 0.03
  esindex: 0.023
  cdx.remote: 13.27
  LoadShardBlock: 188.31 (3)
  PetaboxLoader3.datanode: 80.345 (4)
  PetaboxLoader3.resolve: 196.149 (2)
  load_resource: 155.335
-->